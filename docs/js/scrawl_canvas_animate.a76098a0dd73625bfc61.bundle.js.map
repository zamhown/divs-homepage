{"version":3,"sources":["webpack:///./src/scrawlCanvas.js","webpack:///./src/scrawl_canvas_animate.js"],"names":["window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","scrawl","my","work","nameslist","sectionlist","radian","Math","PI","promise","d","v","colv1","colv2","o","workquat","f","document","createDocumentFragment","loadAlias","block","wheel","phrase","path","shape","images","animation","collisions","factories","color","filters","physics","saveload","stacks","frame","quaternion","imageload","extensions","modules","device","loadDependencies","init","entity","reset","Device","pageInit","createDefaultPad","setDisplayOffsets","physicsInit","filtersInit","animationInit","canvas","getCanvases","cellname","name","addCanvasToPage","removeItem","padnames","activeListeners","appendChild","cv","cvx","context","cvmodel","ctx","cvwrapper","cell","cvcontroller","pad","i","iz","length","j","jz","simpleLoader","_load","tag","url","Promise","resolve","reject","element","createElement","parent","attr","onload","onerror","type","async","rel","css","js","img","checkForPromise","toString","indexOf","loadExtensions","items","loadExtensionsUsingPromise","loadExtensionsUsingVanilla","error","mini","tail","loaded","required","startTime","getExtensions","done","safeObject","isa_fn","xtGet","minified","Date","now","ext","scriptTag","myExt","contains","e","src","test","body","m","pushUnique","loadExtensionsConcatenator","concat","loader","file","alias","request","push","all","then","catch","exts","xt","pu","depends","loadModules","mergeInto","o1","o2","key","hasOwnProperty","mergeOver","item","k","Array","isArray","toInt","substring","parseFloat","toFixed","index","splice","isBetween","no","a","b","value","isa_whitelist","isa","arg","label","arguments","toLowerCase","isa_str","isa_arr","isa_bool","isa_canvas","Object","prototype","call","isa_date","isa_dom","querySelector","dispatchEvent","isa_event","preventDefault","initEvent","isa_img","isa_num","isa_realnum","isNaN","isFinite","isa_obj","isa_quaternion","isa_vector","isa_video","xtGetTrue","xta","slice","xto","makeName","nameArray","target","replace","split","floor","random","elements","getElementsByTagName","makePad","canvasElement","currentPad","get","getElementById","parentElement","width","height","Pad","clear","pads","compile","mouse","show","render","addPercentages","reversePercentage","subtractPercentages","CustomEvent","triggerTouchEnter","el","updateCustomTouch","triggerTouchLeave","triggerTouchFollow","cloneTouchEventItem","oT","nT","clientX","clientY","force","identifier","pageX","pageY","radiusX","radiusY","screenX","screenY","evt","changedTouches","targetTouches","touches","getTouch","altKey","bubbles","cancelBubble","cancelable","charCode","clipboardData","ctrlKey","currentTarget","defaultPrevented","detail","eventPhase","keyCode","layerX","layerY","metaKey","returnValue","shiftKey","srcElement","timestamp","view","which","addNativeListener","fn","targ","targets","removeNativeListener","querySelectorAll","addEventListener","removeEventListener","addListener","nav","removeListener","navigator","pointerEnabled","msPointerEnabled","bucketSort","section","attribute","apply","correctCoordinates","coords","vector","w","h","makeVector","x","y","base","localWidth","localHeight","actualWidth","actualHeight","addNewCell","data","deleteCells","group","groupnames","ri","deleteCell","c","ctxnames","cellnames","addEntitysToGroups","groups","entitys","groupArray","entityArray","addEntitysToGroup","removeEntitysFromGroups","removeEntitysFromGroup","deleteEntity","entityName","contextName","animationnames","pathDeleteEntity","entitynames","newVector","newPad","newCell","makeCell","newContext","makeContext","newGroup","makeGroup","newGradient","makeGradient","newRadialGradient","makeRadialGradient","Vector","Cell","Context","Group","Gradient","RadialGradient","setPerspectives","this","z","create","setMagnitudeTo","normalize","scalarMultiply","getMagnitude","val","zero","set","isEqual","isLike","getData","hasCoordinates","vectorAdd","vectorSubtract","vectorMultiply","vectorDivide","scalarDivide","sqrt","checkNotZero","getVector","getCrossProduct","u","v1x","v1y","v1z","v2x","v2y","v2z","getDotProduct","getTripleScalarProduct","ux","uy","uz","vx","vy","vz","wx","wy","wz","rotate","angle","stat_vr","atan2","cos","sin","reverse","rotate3d","mag","q1","q2","q3","conjugate","quaternionMultiply","Base","classname","comment","title","clone","merged","keys","parse","JSON","stringify","numberConvert","dim","result","offsetX","offsetY","expectTouch","canvasGcoSourceIn","canvasGcoSourceOut","canvasGcoDestinationAtop","canvasGcoDestinationIn","canvasGcoCopy","canvasEvenOddWinding","canvasDashedLine","getDeviceData","video","videoAutoplay","videoForceFullScreen","checkCanvas","checkCanvasEvenOddWinding","checkCanvasDashedLine","checkCanvasGco","getViewportDimensions","getViewportPosition","getStacksDeviceData","getImagesDeviceData","checkTouch","DocumentTouch","getContext","beginPath","moveTo","lineTo","closePath","mozFillRule","msFillRule","fill","getImageData","mozDash","lineDash","setLineDash","lineWidth","stroke","fillStyle","fillRect","globalCompositeOperation","clearRect","documentElement","clientWidth","clientHeight","ox","oy","doc","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","isLandscape","isPortrait","Position","so","vec","temp","start","startX","startY","currentStart","flag","handle","handleX","handleY","currentHandle","maxDimensions","left","right","top","bottom","pivot","scale","roll","flipReverse","flipUpend","lockX","lockY","mouseIndex","animationPositionInit","pathPositionInit","animationPositionGet","getX","getY","setStart","setHandle","currentPivotIndex","animationPositionSet","isvec","updateStart","revertStart","setDeltaAttribute","setDelta","setDeltaStart","pathPositionSetDelta","setDeltaHandle","setDeltaScale","setDeltaRoll","setDeltaWidth","setDeltaHeight","perc","animationPositionClone","getReferenceDimensions","reference","Block","Wheel","Phrase","Picture","pasteData","Path","isLine","Shape","Frame","updateCurrentHandle","dims","cont","conv","testx","testy","updateCurrentStart","setStampUsingPivot","p","point","action","setStampUsingPivotCalculations","stack","currentPivot","obj","current","getCurrentCoordinates","ignore","mice","oldX","oldY","PageElement","propogateTouch","setLocalDimensions","stacksPageElementConstructor","id","active","displayOffsetX","displayOffsetY","interactive","position","getElement","style","setDimensions","initMouse","setAccessibility","removeMouseMove","addMouseMove","setAttribute","offsetParent","offsetLeft","offsetTop","scaleDimensions","getMouse","r","pointerType","pointerId","t0","p1","pen","getMouseIdFromEvent","handleMouseMove","mouseX","mouseY","maxX","maxY","wrapper","newActive","altEl","altWrapper","elid","localMouse","al","id2","stk","elm","round","parentNode","handleMouseTilt","pickupEntity","dropEntity","display","match","cells","compiled","shown","cloneNode","compileOrder","filtersPadInit","padStacksConstructor","cellsCompileOrder","cellsShowOrder","resortCompile","resortShow","stacksPadInit","pasteWidth","pasteHeight","padStacksSet","backgroundColor","globalAlpha","sortCellsCompile","sortCellsShow","rendered","cleared","order","copyCellToSelf","addCells","makeCurrent","innerHTML","coreCellInit","animationCellInit","collisionsCellInit","filtersCellInit","copy","Y","copyWidth","copyHeight","copyData","fieldLabel","showOrder","copyX","copyY","pasteX","pasteY","sortGroups","setCopy","setPaste","animationCellGet","paste","setPasteVector","setCopyVector","setCopyWidth","setCopyHeight","setPasteWidth","setPasteHeight","setActualWidth","setActualHeight","getContextFromEngine","setDirtyHandles","setDirtyStarts","animationCellSet","g","recalc","setDeltaCopy","setDeltaPaste","setDeltaCopyWidth","setDeltaCopyHeight","setDeltaPasteWidth","setDeltaPasteHeight","setDeltaActualWidth","setDeltaActualHeight","setDeltaGlobalAlpha","setEngine","cellContext","cellEngine","changes","cName","eName","setEngineActions","stat1","fastStamp","getChanges","s","design","update","font","lineCap","lineDashOffset","mozDashOffset","lineJoin","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","miterLimit","textAlign","textBaseline","winding","groupSort","setTransform","visibility","stamp","rotateDestination","engine","upend","rotation","addPathRoll","pathRoll","prepareToCopyCell","pathPrepareToCopyCell","bet","cw","ch","aw","ah","setReference","isRaw","isBase","isDisplay","isFirstCellInPad","destinationContext","destinationEngine","sourceEngine","sourceCanvas","offset","drawImage","clearShadow","restoreShadow","entitycontext","entityContext","setToClearShape","saveContext","save","restoreContext","restore","dimensions","imageData","contextKeys","getNonDefaultAttributes","ca","ea","df","scaleOutline","autoUpdate","resort","entitySort","regionRadius","sortEntitys","forceStamp","method","updateEntitysBy","setEntitysTo","pivotEntitysTo","pivotVector","entityVector","local","getEntityAt","coordinate","v1","v2","rad","checkHit","getEntitysByMouseIndex","getAllEntitysAt","results","Entity","myContext","getGroup","collisionsEntityConstructor","filtersEntityInit","radius","registerInLibrary","collisionsEntityRegisterInLibrary","collisionsEntitySet","collisionsEntitySetDelta","enhancedItems","createNewContext","getEntityCell","sFlag","hFlag","resetCollisionPoints","pathStamp","stampFilter","stampFilterDimensionsActions","rotateCell","getStartValues","getHandleValues","getStart","clearWithBackground","draw","drawFill","fillDraw","sinkInto","floatOver","clip","none","oldPivot","here","tests","lw","lh","rect","isPointInPath","Design","lockTo","stop","endX","endY","startRadius","endRadius","end","shift","applyStops","dsn","sx","sy","sr","ex","ey","er","fsx","fsy","fex","fey","createLinearGradient","createRadialGradient","addColorStop","remove","designnames","makeAnimation","Animation","newAnimation","animate","doAnimation","orderAnimations","resortAnimations","animationLoop","sortAnimations","testDims","testPos","dev","delay","run","isRunning","halt","kill","newBlock","makeBlock","bg","myCellCtx","strokeRect","getMaxDimensions","xtl","xtr","xbl","ytl","ytr","ybl","max","min","ax","ay","ref","t","l","halfW","halfH","cx","cy","fr","fu","hx","hy","line","ceil","between","delta","deltaPathPlace","pathSpeedConstant","tweenLock","Stack","Element","convertTime","timeUnit","timeValue","addWithinBounds","deltaX","deltaY","updateStartActions","collisionArray","add","pathPlace","revertStartActions","exchange","reverseActions","copyDelta","copyMinWidth","copyMaxWidth","copyMinHeight","copyMaxHeight","copyDeltaX","copyDeltaY","zoom","sWidth","sHeight","aWidth","aHeight","minWidth","minHeight","maxWidth","maxHeight","myW","myH","myX","myY","spliceCell","myStrip","myRemains","myEdge","myShift","edge","shiftCopy","strip","Pattern","sortStops","sort","makeTicker","Ticker","newTween","makeTween","Tween","newAction","makeAction","Action","locateTarget","sections","subscribers","duration","eventChoke","killOnComplete","cycles","cycleCount","effectiveDuration","currentTime","tick","lastEvent","subscribe","setEffectiveDuration","makeTickerUpdateEvent","reverseTick","MSInputMethodContext","createEvent","initCustomEvent","myItems","sortSubscribers","recalculateEffectiveDuration","unsubscribe","durationValue","tween","getEndTime","calculateEffectiveTime","calculateEffectiveDuration","reverseOrder","subs","willLoop","next","killTweens","updateSubscribers","reversed","changeSubscriberDirection","sub","complete","timePlayed","resume","seekTo","milliseconds","backwards","seekFor","autokill","setTargets","reverseOnCycleEnd","revert","time","triggered","tweennames","ticker","addToTicker","calculatedTime","cTime","cType","tickerDuration","effectiveTime","removeFromTicker","newTargets","_typeof","addToTargets","removeFromTargets","kz","doRemove","objName","identifiers","updateTargets","tickerName","definitions","setDefinitionsValues","status","tweenDuration","calculatedDur","cDur","starts","ends","revTick","doSimpleUpdate","updateCleanup","effectiveTick","def","progress","actions","engineActions","setObj","effectiveStart","effectiveChange","integer","suffix","out","change","in","easeIn","easeIn3","easeIn4","easeIn5","easeOutIn","easeOutIn3","easeOutIn4","easeOutIn5","easeOut","easeOut3","easeOut4","easeOut5","linear","parseDefinitionsValue","effectiveEnd","__webpack_exports__","radialGradient","gradient1","gradient2","spotlight","light1","light2","ww","wh","animationState","animationDirection","self","getPerpendicularVector","num","limit","abs","changeParam"],"mappings":"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","file":"js/scrawl_canvas_animate.a76098a0dd73625bfc61.bundle.js","sourcesContent":["/* eslint-disable no-unused-vars, no-useless-escape, no-empty, no-undef */\r\n// scrawl-canvasscrawlCorescrawlBlockscrawlAnimation\r\n\r\n//---------------------------------------------------------------------------------\r\n// The MIT License (MIT)\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n// \r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n// \r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//---------------------------------------------------------------------------------\r\n\r\n/**\r\n# scrawlCore\r\n\r\n## Version 6.0.1 - 14 January 2017\r\n\r\nDeveloped by Rik Roots - <rik.roots@gmail.com>, <rik@rikweb.org.uk>\r\n\r\nScrawl demo website: <http://scrawl.rikweb.org.uk>\r\n\r\n## Purpose and features\r\n\r\nThe core module is the only essential file in Scrawl. It must always be directly, and completely, loaded into the web page before any Scrawl extensions are added to it. \r\n\r\n* Defines the Scrawl scope - __window.scrawl__\r\n\r\n* Defines a number of utility methods used throughout Scrawl.js\r\n\r\n* Defines the Scrawl library - all significant objects created by Scrawl can be found here\r\n\r\n* Searches the DOM for &lt;canvas&gt; elements, and imports them into the Scrawl library\r\n\r\n* Instantiates controllers (Pad objects) and wrappers (Cell objects) for each &lt;canvas&gt; element\r\n\r\n* Instantiates Context engine objects for each Cell object\r\n\r\n* Defines mouse functionality in relation to &lt;canvas&gt; elements\r\n\r\n* Defines the core functionality for Entity objects to be displayed on &lt;canvas&gt; elements; the different types of Entitys are defined in separate extensions which need to be loaded into the core\r\n\r\n* Defines Group objects, used to group entitys together for display and interaction purposes\r\n\r\n* Defines Design objects - Gradient and RadialGradient - which can be used by Entity objects for their _fill_ and _stroke_ styles; additional Design objects (Pattern, Color) are defined in separate extensions\r\n\r\n## Loading the module\r\n\r\n\r\n\r\n@module scrawlCore\r\n**/\r\n\r\nwindow.requestAnimFrame = (function(callback) {\r\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(callback) {\r\n        window.setTimeout(callback, 1000 / 60);\r\n    };\r\n})();\r\n\r\nvar scrawl = window.scrawl || (function() {\r\n    'use strict';\r\n    var my = {};\r\n\r\n    /**\r\n# window.scrawl\r\n\r\nThe Scrawl library object. All objects, attributes and functions contained in the library can be accessed by any other JavaScript code running on the web page.\r\n\r\nThe library will expand and change as Scrawl extensions load.\r\n\r\n## Purpose:\r\n\r\n* Holds links to every substantive object created by Scrawl.js and user code\r\n* Also holds links to key DOM objects\r\n* Functions for loading canvas elements on initialization, and for dynamically creating canvases on the web page\r\n* Shorthand functions for rendering canvases\r\n* Some general helper functions for testing variables that can be used by coders \r\n\r\nCore creates the following sections in the library:\r\n\r\n* scrawl.__object__ - Contains key:value pairs for storing miscellaneous objects, for instance handles to DOM image elements imported into scrawl via scrawl.getImagesByClass()\r\n* scrawl.__pad__ - Contains PADNAME:Object pairs for each instantiated Pad canvas controller object\r\n* scrawl.__cell__ - Contains CELLNAME:Object pairs for each instantiated Cell canvas wrapper object\r\n* scrawl.__canvas__ - Contains CELLNAME:object pairs linking to each Cell object's DOM &lt;canvas&gt; element\r\n* scrawl.__context__ - Contains CELLNAME:Object pairs linking to each &lt;canvas&gt; element's context engine\r\n* scrawl.__ctx__ - Contains CONTEXTNAME:Object pairs linking to each instantiated Scrawl Context object (used by Cell and Entity objects)\r\n* scrawl.__imageData__ - Contains key:value pairs linking to JavaScript image data objects\r\n* scrawl.__group__ - Contains GROUPNAME:Object pairs linking to each instantiated Group object\r\n* scrawl.__design__ - Contains DESIGNNAME:Object pairs for each instantiated design object (Gradient, RadialGradient, Pattern, Color)\r\n* scrawl.__dsn__ - Contains DESIGNNAME:precompiled gradient/pattern context object pairs (Gradient, RadialGradient, Pattern)\r\n* scrawl.__entity__ - Contains SPRITENAME:Object pairs for each instantiated entity object (Block, Phrase, Picture, Wheel, Path, Shape, Particle)\r\n\r\n@class window.scrawl\r\n**/\r\n\r\n    /**\r\nScrawl.js version number\r\n@property version\r\n@type {String}\r\n@default 6.0.1\r\n@final\r\n**/\r\n    my.version = '6.0.1';\r\n    /**\r\nArray of array object keys used to define the sections of the Scrawl library\r\n@property nameslist\r\n@type {Array}\r\n@private\r\n**/\r\n    my.work = {};\r\n    my.work.nameslist = ['padnames', 'cellnames', 'ctxnames', 'groupnames', 'designnames', 'entitynames', 'animationnames'];\r\n    /**\r\nArray of objects which define the sections of the Scrawl library\r\n@property sectionlist\r\n@type {Array}\r\n@private\r\n**/\r\n    my.work.sectionlist = ['pad', 'cell', 'canvas', 'context', 'ctx', 'imageData', 'group', 'design', 'dsn', 'entity', 'animation'];\r\n    /**\r\nFor converting between degrees and radians\r\n@property radian\r\n@type {Number}\r\n@default Math.PI/180\r\n@final\r\n**/\r\n    my.work.radian = Math.PI / 180;\r\n    /**\r\nFlag - Promise API is supported by browser\r\n@property promise\r\n@type {Boolean}\r\n@default null\r\n@final\r\n**/\r\n    my.work.promise = null;\r\n    /**\r\nAn Object containing OBJECTTYPE:Object pairs which in turn contain default attribute values for each Scrawl object constructor\r\n@property d\r\n@type {Object}\r\n@private\r\n**/\r\n    my.work.d = {};\r\n    /**\r\nWork vector, for calculations\r\n@property v\r\n@type {Vector}\r\n@private\r\n**/\r\n    my.work.v = null;\r\n    /**\r\nWork vector, for calculations\r\n@property colv1\r\n@type {Vector}\r\n@private\r\n**/\r\n    my.work.colv1 = null;\r\n    /**\r\nWork vector, for calculations\r\n@property colv2\r\n@type {Vector}\r\n@private\r\n**/\r\n    my.work.colv2 = null;\r\n    /**\r\nDefault empty object - passed to various functions, to prevent them generating superfluous objects\r\n@property o\r\n@type {Object}\r\n@private\r\n**/\r\n    my.work.o = {};\r\n    /**\r\nWork quaternions, for calculations\r\n@property workquat\r\n@type {Object}\r\n@private\r\n**/\r\n    my.work.workquat = null;\r\n    /**\r\nDOM document fragment\r\n@property f\r\n@type {Object}\r\n@private\r\n**/\r\n    my.work.f = document.createDocumentFragment();\r\n    /**\r\nKey:value pairs of extension alias:filename Strings, used by scrawl.loadExtensions()\r\n@property loadAlias\r\n@type {Object}\r\n@private\r\n**/\r\n    my.work.loadAlias = {\r\n        block: 'scrawlBlock',\r\n        wheel: 'scrawlWheel',\r\n        phrase: 'scrawlPhrase',\r\n        path: 'scrawlPath',\r\n        shape: 'scrawlShape',\r\n        images: 'scrawlImages',\r\n        animation: 'scrawlAnimation',\r\n        collisions: 'scrawlCollisions',\r\n        factories: 'scrawlPathFactories',\r\n        color: 'scrawlColor',\r\n        filters: 'scrawlFilters',\r\n        physics: 'scrawlPhysics',\r\n        saveload: 'scrawlSaveLoad',\r\n        stacks: 'scrawlStacks',\r\n        frame: 'scrawlFrame',\r\n        quaternion: 'scrawlQuaternion',\r\n        imageload: 'scrawlImageLoad'\r\n    };\r\n    /**\r\nArray of loaded extensions arrays\r\n@property extensions\r\n@type {Array}\r\n@private\r\n**/\r\n    my.work.extensions = [];\r\n    /**\r\nArray of loaded extensions arrays (name changed from modules to extensions because Scrawl 'modules' are not modules)\r\n@property modules\r\n@type {Array}\r\n@private\r\n@deprecated\r\n**/\r\n    my.work.modules = my.work.extensions;\r\n    /**\r\nDevice object - holds details about the browser environment and viewport\r\n@property device\r\n@type {Object}\r\n**/\r\n    my.device = {};\r\n    /**\r\nKey:value pairs of extension alias:Array, used by scrawl.loadExtensions()\r\n@property loadDependencies\r\n@type {Object}\r\n@private\r\n**/\r\n    my.work.loadDependencies = {\r\n        block: [],\r\n        wheel: [],\r\n        phrase: [],\r\n        path: [],\r\n        shape: [],\r\n        images: ['imageload'],\r\n        imageload: [],\r\n        animation: [],\r\n        collisions: [],\r\n        factories: [],\r\n        color: [],\r\n        filters: [],\r\n        physics: ['quaternion'],\r\n        saveload: [],\r\n        stacks: ['quaternion'],\r\n        frame: [],\r\n        quaternion: []\r\n    };\r\n    /**\r\nA __general__ function that initializes (or resets) the Scrawl library and populates it with data, including existing &lt;canvas&gt; element data in the web page\r\n@method init\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.init = function() {\r\n        if (!my.entity) {\r\n            my.reset();\r\n            my.device = new my.Device();\r\n            my.pageInit();\r\n            my.createDefaultPad();\r\n            my.setDisplayOffsets('all');\r\n            my.physicsInit();\r\n            my.filtersInit();\r\n            my.animationInit();\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nscrawl.init hook function - modified by stacks extension\r\n@method pageInit\r\n@private\r\n**/\r\n    my.pageInit = function() {\r\n        if (my.device.canvas) {\r\n            my.getCanvases();\r\n        }\r\n    };\r\n    /**\r\nscrawl.init hook function - modified by physics extension\r\n@method physicsInit\r\n@private\r\n**/\r\n    my.physicsInit = function() {};\r\n    /**\r\nscrawl.init hook function - modified by filters extension\r\n@method filtersInit\r\n@private\r\n**/\r\n    my.filtersInit = function() {};\r\n    /**\r\nscrawl.init hook function - modified by stacks extension\r\n@method pageInit\r\n@private\r\n**/\r\n    my.createDefaultPad = function() {\r\n        var p, cellname, name;\r\n        if (my.device.canvas) {\r\n            name = 'defaultHiddenCanvasElement';\r\n            p = my.addCanvasToPage({\r\n                name: name,\r\n            });\r\n            name = p.name;\r\n            cellname = name + '_base';\r\n            my.removeItem(my.padnames, name);\r\n            my.removeItem(my.work.activeListeners, name);\r\n            my.work.f.appendChild(my.canvas[name]);\r\n            my.work.cv = my.canvas[cellname];\r\n            my.work.cvx = my.context[cellname];\r\n            my.work.cvmodel = my.ctx[cellname];\r\n            my.work.cvwrapper = my.cell[cellname];\r\n            my.work.cvcontroller = my.pad[name];\r\n        }\r\n    };\r\n    /**\r\nA __general__ function that resets the Scrawl library to empty arrays and objects\r\n@method reset\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.reset = function() {\r\n        for (var i = 0, iz = my.work.nameslist.length; i < iz; i++) {\r\n            my[my.work.nameslist[i]] = [];\r\n        }\r\n        for (var j = 0, jz = my.work.sectionlist.length; j < jz; j++) {\r\n            my[my.work.sectionlist[j]] = {};\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __general__ function for loading img, css and js files\r\n\r\nCopied and pasted (a terrible example - don't do this!) from https://davidwalsh.name/javascript-loader\r\n\r\nAll assets are added to the body tag in the DOM\r\n\r\nThis function auto-runs when scrawl.core loads\r\n@method simpleLoader\r\n@return Javascript object containing .css(), .js() and .img() load functions\r\n@private\r\n**/\r\n    my.simpleLoader = (function() {\r\n        function _load(tag) {\r\n            return function(url) {\r\n                return new Promise(function(resolve, reject) {\r\n                    var element = document.createElement(tag),\r\n                        parent = 'body',\r\n                        attr = 'src';\r\n                    element.onload = function() {\r\n                        resolve(url);\r\n                    };\r\n                    element.onerror = function() {\r\n                        reject(url);\r\n                    };\r\n                    switch (tag) {\r\n                    case 'script':\r\n                        element.type = 'text/javascript';\r\n                        element.async = true;\r\n                        break;\r\n                    case 'link':\r\n                        element.type = 'text/css';\r\n                        element.rel = 'stylesheet';\r\n                        attr = 'href';\r\n                        parent = 'head';\r\n                    }\r\n                    element[attr] = url;\r\n                    document[parent].appendChild(element);\r\n                });\r\n            };\r\n        }\r\n        return {\r\n            css: _load('link'),\r\n            js: _load('script'),\r\n            img: _load('img')\r\n        };\r\n    })();\r\n    /**\r\nA __general__ function that checks to see if the Promise API is supported by the browser\r\n@method checkForPromise\r\n@return true if Promise is supported natively; false otherwise\r\n@private\r\n**/\r\n    my.checkForPromise = function() {\r\n        if (my.work.promise !== null) {\r\n            return my.work.promise;\r\n        }\r\n        else {\r\n            if (typeof Promise !== 'undefined' && Promise.toString().indexOf('[native code]') !== -1) {\r\n                my.work.promise = true;\r\n                return true;\r\n            }\r\n            my.work.promise = false;\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\nA __general__ function that loads supporting extensions and integrates them into the core\r\n\r\nExtension names are supplied as an array of Strings, each of which should be an _alias_ string, as follows:\r\n\r\nScrawl currently supports the following extensions:\r\n* __scrawlAnimation.js__ - alias __animation__ - adds animation and tween functionality to the core\r\n* __scrawlBlock.js__ - alias __block__ - adds _Block_ (square and rectangle) entitys to the core\r\n* __scrawlCollisions.js__ - alias __collisions__ - adds entity collision detection functionality to the core\r\n* __scrawlColor.js__ - alias __color__ - adds the _Color_ Design object to the core\r\n* __scrawlFilters.js__ - alias __filters__ - adds image filter functionality to the core\r\n* __scrawlFrame.js__ - alias __frame__ - enhanced Picture entity\r\n* __scrawlImages.js__ - alias __images__ - adds all image functionality, including static and animated _Picture_ entitys and the _Pattern_ Design object, to the core\r\n* __scrawlPath.js__ - alias __path__ - adds _Path_ (SVGTiny path data) entitys to the core\r\n* __scrawlPathFactories.js__ - alias __factories__ - adds user-friendly Path and Shape factory functions (for lines, quadratic and bezier curves, ellipses, round-corner rectangles, regular shapes such as stars, triangles, etc) to the core\r\n* __scrawlPhrase.js__ - alias __phrase__ - adds _Phrase_ (single and multiline text) entitys to the core\r\n* __scrawlPerspective.js__ - alias __perspective__ - adds _Perspective_ functionality to the core (experimental)\r\n* __scrawlPhysics.js__ - alias __physics__ - adds a physics engine to the core (experimental)\r\n* __scrawlSaveLoad.js__ - alias __saveload__ - adds JSON object save and load functionality to the core (experimental)\r\n* __scrawlShape.js__ - alias __shape__ - adds _Shape_ (path-like shapes) entitys to the core\r\n* __scrawlStacks.js__ - alias __stacks__ - adds the ability to position, manipulate and animate &lt;canvas&gt; and other DOM elements in a 3d space on the web page\r\n* __scrawlWheel.js__ - alias __wheel__ - adds _Wheel_ (circle and segment) entitys to the core\r\n* __scrawlImageLoad.js__ - alias __imageload__ - adds the ability to load img elements into the library\r\n* __scrawlQuaternion.js__ - alias __quaternion__ - adds quaternion maths functionality to the core\r\n\r\nWhere permitted, Scrawl will load extensions asynchronously. Extensions have no external dependencies beyond their need for the core module, and can be loaded in any order.\r\n\r\nAny supplied callback function will only be run once all extensions have been loaded.\r\n\r\nThe argument object can include the following attributes:\r\n\r\n* __path__ - String path-to-directory/folder where scrawl extension files are kept (default: '')\r\n* __minified__ - Boolean - if true (default) minified extensions will be loaded; false for source extensions\r\n* __extensions__ - an Array of extension alias Strings\r\n* __callback__ - Function to run once all extension files have been loaded (defaults to an empty function)\r\n* __error__ - Function to run if one or more extension files fails to load (defaults to an empty function)\r\n\r\n\r\n@method loadExtensions\r\n@param {Object} items - JavaScript object containing key:value pairs\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.loadExtensions = function(items) {\r\n        if (my.checkForPromise()) {\r\n            return my.loadExtensionsUsingPromise(items);\r\n        }\r\n        else {\r\n            return my.loadExtensionsUsingVanilla(items);\r\n        }\r\n    };\r\n    /**\r\nloadExtensions helper function\r\n@method loadExtensionsUsingVanilla\r\n@param {Object} items - JavaScript object containing key:value pairs\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n@private\r\n**/\r\n    my.loadExtensionsUsingVanilla = function(items) {\r\n        var path, callback, error, mini, tail, loaded, required, startTime, timeout, i, iz, getExtensions, done;\r\n        items = my.safeObject(items);\r\n        path = items.path || '';\r\n        callback = (my.isa_fn(items.callback)) ? items.callback : function() {};\r\n        error = (my.isa_fn(items.error)) ? items.error : function() {};\r\n        mini = my.xtGet(items.minified, true);\r\n        tail = (mini) ? '-min.js' : '.js';\r\n        loaded = [];\r\n        startTime = Date.now();\r\n        timeout = 30000; // allow a maximum of 30 seconds to get all extensions\r\n        getExtensions = function(ext) {\r\n            var scriptTag,\r\n                myExt = my.work.loadAlias[ext] || ext;\r\n            if (!my.contains(my.work.extensions, myExt)) {\r\n                scriptTag = document.createElement('script');\r\n                scriptTag.type = 'text/javascript';\r\n                scriptTag.async = 'true';\r\n                scriptTag.onload = function(e) {\r\n                    done(ext);\r\n                };\r\n                scriptTag.onerror = function(e) {\r\n                    done(ext, true);\r\n                };\r\n                scriptTag.src = (/\\.js$/.test(myExt)) ? path + myExt : path + myExt + tail;\r\n                document.body.appendChild(scriptTag);\r\n            }\r\n        };\r\n        done = function(m, e) {\r\n            my.removeItem(loaded, m);\r\n            if (e || Date.now() > startTime + timeout) {\r\n                error();\r\n            }\r\n            else {\r\n                my.pushUnique(my.work.extensions, m);\r\n            }\r\n            if (loaded.length === 0) {\r\n                callback();\r\n            }\r\n        };\r\n        required = my.loadExtensionsConcatenator(items);\r\n        loaded = [].concat(required);\r\n        for (i = 0, iz = required.length; i < iz; i++) {\r\n            getExtensions(required[i]);\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nloadExtensions helper function - uses the new Promise api, if it is available\r\n@method loadExtensionsUsingPromise\r\n@param {Object} items - JavaScript object containing key:value pairs\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n@private\r\n**/\r\n    my.loadExtensionsUsingPromise = function(items) {\r\n        items = my.safeObject(items);\r\n        var loader, path, file, alias, callback, error, mini, tail, required, request, i, iz;\r\n        loader = my.simpleLoader;\r\n        path = items.path || '';\r\n        alias = my.work.loadAlias;\r\n        callback = (my.isa_fn(items.callback)) ? items.callback : function() {};\r\n        error = (my.isa_fn(items.error)) ? items.error : function() {};\r\n        mini = my.xtGet(items.minified, true);\r\n        tail = (mini) ? '-min.js' : '.js';\r\n        required = my.loadExtensionsConcatenator(items);\r\n        request = [];\r\n        for (i = 0, iz = required.length; i < iz; i++) {\r\n            file = alias[required[i]] || required[i];\r\n            request.push(loader.js((/\\.js$/.test(file)) ? path + file : path + file + tail));\r\n        }\r\n        Promise.all(request).then(callback).catch(error);\r\n        return my;\r\n    };\r\n    /**\r\nloadExtensions helper function\r\n@method loadExtensionsConcatenator\r\n@param {Object} items - JavaScript object containing key:value pairs\r\n@return Array of extension aliases\r\n@private\r\n**/\r\n    my.loadExtensionsConcatenator = function(items) {\r\n        items = my.safeObject(items);\r\n        var exts = [],\r\n            required = [],\r\n            xt = my.xt,\r\n            pu = my.pushUnique,\r\n            depends = my.work.loadDependencies,\r\n            i, iz, j, jz;\r\n        if (xt(items.extensions)) {\r\n            exts = exts.concat([].concat(items.extensions));\r\n        }\r\n        if (xt(items.modules)) {\r\n            exts = exts.concat([].concat(items.modules));\r\n        }\r\n        for (i = 0, iz = exts.length; i < iz; i++) {\r\n            for (j = 0, jz = depends[exts[i]].length; j < jz; j++) {\r\n                pu(required, depends[exts[i]][j]);\r\n            }\r\n            pu(required, exts[i]);\r\n        }\r\n        return required;\r\n    };\r\n    /**\r\nA __general__ function that loads supporting extensions and integrates them into the core\r\n\r\n(function name changed from loadModules to loadExtensions because Scrawl 'modules' are not modules)\r\n\r\n@method loadModules\r\n@param {Object} items - JavaScript object containing key:value pairs\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n@deprecated\r\n**/\r\n    my.loadModules = my.loadExtensions;\r\n    /**\r\nA __utility__ function that adds the attributes of the additive object to those of the reference object, where those attributes don't already exist in the reference object\r\n@method mergeInto\r\n@param {Object} o1 reference object\r\n@param {Object} o2 additive object\r\n@return Merged object\r\n**/\r\n    my.mergeInto = function(o1, o2) {\r\n        for (var key in o2) {\r\n            if (o2.hasOwnProperty(key) && !my.xt(o1[key])) {\r\n                o1[key] = o2[key];\r\n            }\r\n        }\r\n        return o1;\r\n    };\r\n    /**\r\nA __utility__ function that adds the attributes of the additive object to those of the reference object, overwriting attributes where necessary\r\n@method mergeOver\r\n@param {Object} o1 reference object\r\n@param {Object} o2 additive object\r\n@return Merged object\r\n**/\r\n    my.mergeOver = function(o1, o2) {\r\n        for (var key in o2) {\r\n            if (o2.hasOwnProperty(key)) {\r\n                o1[key] = o2[key];\r\n            }\r\n        }\r\n        return o1;\r\n    };\r\n    /**\r\nA __utility__ function that checks an array to see if it contains a given value\r\n@method contains\r\n@param {Array} item Reference array\r\n@param {Mixed} k value to be checked\r\n@return True if value is in array; false otherwise\r\n**/\r\n    my.contains = function(item, k) {\r\n        if (Array.isArray(item)) {\r\n            return (item.indexOf(k) >= 0) ? true : false;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nA __utility__ function to convert strings (such as percentages) to integer values\r\n@method toInt\r\n@param {String} item\r\n@return Integer number; 0 on error\r\n**/\r\n    my.toInt = function(item) {\r\n        if (item.substring) {\r\n            item = parseFloat(item);\r\n        }\r\n        return (item.toFixed) ? item | 0 : 0;\r\n    };\r\n    /**\r\nA __utility__ function that adds a value to an array if the array doesn't already contain an element with that value\r\n@method pushUnique\r\n@param {Array} item Reference array\r\n@param {Mixed} o value to be added to array\r\n@return Amended array\r\n**/\r\n    my.pushUnique = function(item, o) {\r\n        if (item.indexOf(o) < 0) {\r\n            item.push(o);\r\n        }\r\n        return item;\r\n    };\r\n    /**\r\nA __utility__ function that removes a value from an array\r\n@method removeItem\r\n@param {Array} item Reference array\r\n@param {Mixed} o value to be removed from array\r\n@return Amended array\r\n**/\r\n    my.removeItem = function(item, o) {\r\n        var index = item.indexOf(o);\r\n        if (index >= 0) {\r\n            item.splice(index, 1);\r\n        }\r\n        return item;\r\n    };\r\n    /**\r\nA __utility__ function that checks to see if a number is between two other numbers\r\n@method isBetween\r\n@param {Number} no Reference number\r\n@param {Number} a Minimum or maximum number\r\n@param {Number} b Maximum or minimum number\r\n@param {Boolean} [e] If true, reference number can equal maximum/minimum number; on false, number must lie between the maximum and minimum (default: false)\r\n@return True if value is between maximum and minimum; false otherwise\r\n**/\r\n    my.isBetween = function(no, a, b, e) {\r\n        var value;\r\n        if (a > b) {\r\n            value = a;\r\n            a = b;\r\n            b = value;\r\n        }\r\n        if (e) {\r\n            if (no >= a && no <= b) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        else {\r\n            if (no > a && no < b) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\nA __utility__ function for variable type checking\r\n\r\nValid identifier Strings include:\r\n\r\n* __num__ for numbers\r\n* __str__ for strings\r\n* __bool__ for booleans\r\n* __fn__ for Function objects\r\n* __arr__ for Array objects\r\n* __obj__ for Object objects (excluding DOM objects)\r\n* __dom__ for DOM objects\r\n* __event__ for DOM event objects\r\n* __date__ for Date objects\r\n* __vector__ for Scrawl Vector objects\r\n* __quaternion__ for Scrawl Quaternion objects\r\n@method isa\r\n@param {Mixed} item Primative or object for identification\r\n@param {String} identifier Identifier String\r\n@return True if item type matches the identifier\r\n**/\r\n    my.work.isa_whitelist = ['str', 'fn', 'arr', 'bool', 'canvas', 'date', 'dom', 'event', 'img', 'num', 'realnum', 'obj', 'quaternion', 'vector', 'video'];\r\n    my.isa = function() {\r\n        var len = arguments.length,\r\n            arg, label;\r\n        if (len == 2) {\r\n            arg = arguments[0];\r\n            label = arguments[1].toLowerCase();\r\n            if (typeof arg != 'undefined' && my.work.isa_whitelist.indexOf(label) >= 0) {\r\n                return my['isa_' + label](arg);\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    my.isa_str = function(item) {\r\n        return (item && item.substring) ? true : false;\r\n    };\r\n    my.isa_fn = function(item) {\r\n        return (typeof item === 'function') ? true : false;\r\n    };\r\n    my.isa_arr = function(item) {\r\n        return (Array.isArray(item)) ? true : false;\r\n    };\r\n    my.isa_bool = function(item) {\r\n        return (typeof item === 'boolean') ? true : false;\r\n    };\r\n    my.isa_canvas = function(item) {\r\n        return (Object.prototype.toString.call(item) === '[object HTMLCanvasElement]') ? true : false;\r\n    };\r\n    my.isa_date = function(item) {\r\n        return (Object.prototype.toString.call(item) === '[object Date]') ? true : false;\r\n    };\r\n    my.isa_dom = function(item) {\r\n        return (item && item.querySelector && item.dispatchEvent) ? true : false;\r\n    };\r\n    my.isa_event = function(item) {\r\n        return (item && item.preventDefault && item.initEvent) ? true : false;\r\n    };\r\n    my.isa_img = function(item) {\r\n        return (Object.prototype.toString.call(item) === '[object HTMLImageElement]') ? true : false;\r\n    };\r\n    my.isa_num = function(item) {\r\n        return (item && item.toFixed) ? true : false;\r\n    };\r\n    my.isa_realnum = function(item) {\r\n        return (item && item.toFixed && !isNaN(item) && isFinite(item)) ? true : false;\r\n    };\r\n    my.isa_obj = function(item) {\r\n        return (Object.prototype.toString.call(item) === '[object Object]') ? true : false;\r\n    };\r\n    my.isa_quaternion = function(item) {\r\n        return (item && item.type && item.type === 'Quaternion') ? true : false;\r\n    };\r\n    my.isa_vector = function(item) {\r\n        return (item && item.type && item.type === 'Vector') ? true : false;\r\n    };\r\n    my.isa_video = function(item) {\r\n        return (Object.prototype.toString.call(item) === '[object HTMLVideoElement]') ? true : false;\r\n    };\r\n    /**\r\nCheck to see if variable is an Object \r\n@method safeObject\r\n@param {Mixed} items Variable for checking\r\n@return Parameter being checked, if it is an object; returns an empty object on failure\r\n@private\r\n**/\r\n    my.safeObject = function(items) {\r\n        return (Object.prototype.toString.call(items) === '[object Object]') ? items : my.work.o;\r\n    };\r\n    /**\r\nA __utility__ function for variable type checking\r\n@method xt\r\n@param {Mixed} item Primative or object for identification\r\n@return False if item is 'undefined'\r\n**/\r\n    my.xt = function(item) {\r\n        return (typeof item == 'undefined') ? false : true;\r\n    };\r\n    /**\r\nA __utility__ function that checks an argument list of values and returns the first value that exists\r\n@method xtGet\r\n@return first defined variable; null if all values are undefined\r\n**/\r\n    my.xtGet = function() {\r\n        var slice,\r\n            i,\r\n            iz;\r\n        if (arguments.length > 0) {\r\n            for (i = 0, iz = arguments.length; i < iz; i++) {\r\n                if (typeof arguments[i] !== 'undefined') {\r\n                    return arguments[i];\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\nA __utility__ function that checks an argument list values and returns the first value that evaluates to true\r\n\r\nFalse: 0, -0, '', undefined, null, false, NaN\r\n\r\n@method xtGetTrue\r\n@return first true variable; null if all values are false\r\n**/\r\n    my.xtGetTrue = function() {\r\n        var slice,\r\n            i,\r\n            iz;\r\n        if (arguments.length > 0) {\r\n            for (i = 0, iz = arguments.length; i < iz; i++) {\r\n                if (arguments[i]) {\r\n                    return arguments[i];\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\nA __utility__ function for variable type checking\r\n@method xta\r\n@param {Array} item Array of primatives or objects for identification\r\n@return False if any item is 'undefined'\r\n**/\r\n    my.xta = function() {\r\n        var slice,\r\n            i,\r\n            iz;\r\n        slice = arguments;\r\n        if (Array.isArray(arguments[0])) {\r\n            slice = arguments[0];\r\n        }\r\n        if (slice.length > 0) {\r\n            for (i = 0, iz = slice.length; i < iz; i++) {\r\n                if (typeof slice[i] === 'undefined') {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nA __utility__ function for variable type checking\r\n@method xto\r\n@return True if any item is not 'undefined'\r\n**/\r\n    my.xto = function() {\r\n        var slice,\r\n            i,\r\n            iz;\r\n        slice = arguments;\r\n        if (Array.isArray(arguments[0])) {\r\n            slice = arguments[0];\r\n        }\r\n        if (slice.length > 0) {\r\n            for (i = 0, iz = slice.length; i < iz; i++) {\r\n                if (typeof slice[i] !== 'undefined') {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nGenerate unique names for new Scrawl objects\r\n@method makeName\r\n@param {Object} [item] Object with attributes: name, type, target\r\n@return Unique generated name\r\n@private\r\n**/\r\n    my.makeName = function(item) {\r\n        var name,\r\n            nameArray;\r\n        item = my.safeObject(item);\r\n        if (my.contains(my.work.nameslist, item.target)) {\r\n            name = my.xtGetTrue(item.name, item.type, 'default');\r\n            name = name.replace(/[\\.\\/ \\+\\*\\[\\{\\(\\)~\\-#\\\\\\^\\$\\|\\?]/g, '_');\r\n            nameArray = name.split('___');\r\n            return (my.contains(my[item.target], nameArray[0])) ? nameArray[0] + '___' + Math.floor(Math.random() * 100000000) : nameArray[0];\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nA __general__ function to reset display offsets for all pads, stacks and elements\r\n\r\nThe argument is an optional String - permitted values include 'stack', 'pad', 'element'; default: 'all'\r\n\r\n(This function is replaced by the scrawlStacks extension)\r\n@method setDisplayOffsets\r\n@param {String} [item] Command string detailing which element types are to be set\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.setDisplayOffsets = function() {\r\n        var i,\r\n            iz,\r\n            padnames = my.padnames,\r\n            pad = my.pad;\r\n        for (i = 0, iz = padnames.length; i < iz; i++) {\r\n            pad[padnames[i]].setDisplayOffsets();\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __private__ function that searches the DOM for canvas elements and generates Pad/Cell/Context objects for each of them\r\n\r\n(This function is replaced by the scrawlStacks extension)\r\n@method getCanvases\r\n@return True on success; false otherwise\r\n@private\r\n**/\r\n    my.getCanvases = function() {\r\n        var elements,\r\n            pad,\r\n            i,\r\n            iz;\r\n        elements = document.getElementsByTagName('canvas');\r\n        if (elements.length > 0) {\r\n            for (i = 0, iz = elements.length; i < iz; i++) {\r\n                pad = my.makePad({\r\n                    canvasElement: elements[i]\r\n                });\r\n                if (i === 0) {\r\n                    my.work.currentPad = pad.name;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nA __general__ function to add a visible &lt;canvas&gt; element to the web page, and create a Pad controller and Cell wrappers for it\r\n\r\nThe argument object should include the following attributes:\r\n\r\n* __stackName__ (String) - STACKNAME of existing or new stack (optional)\r\n* __parentElement__ - (String) CSS #id of parent element, or the DOM element itself; default: document.body\r\n* any other legitimate Pad and/or Cell object attribute\r\n\r\n(This function is replaced by the scrawlStacks extension)\r\n@method addCanvasToPage\r\n@param {Object} items Object containing new Cell's parameters\r\n@return The new Pad object\r\n**/\r\n    my.addCanvasToPage = function(items) {\r\n        var parent,\r\n            canvas,\r\n            pad,\r\n            get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        parent = document.getElementById(items.parentElement) || document.body;\r\n        canvas = document.createElement('canvas');\r\n        parent.appendChild(canvas);\r\n        items.width = get(items.width, 300);\r\n        items.height = get(items.height, 150);\r\n        items.canvasElement = canvas;\r\n        pad = new my.Pad(items);\r\n        my.setDisplayOffsets();\r\n        return pad;\r\n    };\r\n    /**\r\nA __display__ function to ask Pads to get their Cells to clear their &lt;canvas&gt; elements\r\n@method clear\r\n@param {Array} [pads] Array of PADNAMEs - can also be a String\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.clear = function(pads) {\r\n        var padnames,\r\n            pad = my.pad,\r\n            i,\r\n            iz;\r\n        padnames = (pads) ? [].concat(pads) : my.padnames;\r\n        for (i = 0, iz = padnames.length; i < iz; i++) {\r\n            pad[padnames[i]].clear();\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __display__ function to ask Pads to get their Cells to compile their scenes\r\n@method compile\r\n@param {Array} [pads] Array of PADNAMEs - can also be a String\r\n@param {Vector} [mouse] coordinates to be used for any entity currently pivoted to a mouse/touch event\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.compile = function(pads, mouse) {\r\n        var padnames,\r\n            pad = my.pad,\r\n            i,\r\n            iz;\r\n        padnames = (pads) ? [].concat(pads) : my.padnames;\r\n        for (i = 0, iz = padnames.length; i < iz; i++) {\r\n            pad[padnames[i]].compile(mouse);\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __display__ function to ask Pads to show the results of their latest display cycle\r\n@method show\r\n@param {Array} [pads] Array of PADNAMEs - can also be a String\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.show = function(pads) {\r\n        var padnames,\r\n            pad = my.pad,\r\n            i,\r\n            iz;\r\n        padnames = (pads) ? [].concat(pads) : my.padnames;\r\n        for (i = 0, iz = padnames.length; i < iz; i++) {\r\n            pad[padnames[i]].show();\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __display__ function to ask Pads to undertake a complete clear-compile-show display cycle\r\n@method render\r\n@param {Array} [pads] Array of PADNAMEs - can also be a String\r\n@param {Vector} [mouse] coordinates to be used for any entity currently pivoted to a mouse/touch event\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.render = function(pads, mouse) {\r\n        var padnames,\r\n            pad = my.pad,\r\n            i,\r\n            iz;\r\n        padnames = (pads) ? [].concat(pads) : my.padnames;\r\n        for (i = 0, iz = padnames.length; i < iz; i++) {\r\n            pad[padnames[i]].render(mouse);\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __utility__ function to add two percent strings together\r\n@method addPercentages\r\n@param {String} a - first value\r\n@param {String} b - second value\r\n@return String result\r\n**/\r\n    my.addPercentages = function(a, b) {\r\n        a = parseFloat(a);\r\n        b = parseFloat(b);\r\n        return (a + b) + '%';\r\n    };\r\n    /**\r\nA __utility__ function to reverse the value of a percentage string\r\n@method reversePercentage\r\n@param {String} a - value\r\n@return String result\r\n**/\r\n    my.reversePercentage = function(a) {\r\n        a = parseFloat(a);\r\n        a = -a;\r\n        return a + '%';\r\n    };\r\n    /**\r\nA __utility__ function to subtract a percent string from another\r\n@method subtractPercentages\r\n@param {String} a - initial value\r\n@param {String} b - value to be subtracted from initial value\r\n@return String result\r\n**/\r\n    my.subtractPercentages = function(a, b) {\r\n        a = parseFloat(a);\r\n        b = parseFloat(b);\r\n        return (a - b) + '%';\r\n    };\r\n    /**\r\nA custom __event listener__ helper array\r\n@property activeListeners\r\n@type {Array}\r\n@private\r\n**/\r\n    my.work.activeListeners = [];\r\n    if (window.CustomEvent) {\r\n        /**\r\nA custom __event listener__ function\r\n\r\nThe touchenter event is deprecated, but necessary for scrawl functionality\r\n\r\n@method triggerTouchEnter\r\n@private\r\n**/\r\n        my.triggerTouchEnter = function(e, el) {\r\n            my.updateCustomTouch(e, el, 'touchenter');\r\n        };\r\n        /**\r\nA custom __event listener__ function\r\n\r\nThe touchleave event is deprecated, but necessary for scrawl functionality\r\n\r\n@method triggerTouchLeave\r\n@private\r\n**/\r\n        my.triggerTouchLeave = function(e, el) {\r\n            my.updateCustomTouch(e, el, 'touchleave');\r\n        };\r\n        /**\r\nA custom __event listener__ function\r\n\r\nThe touchfollow event is entirely custom, designed to allow elements to subscribe to an event that started in a different element\r\n\r\n@method triggerTouchFollow\r\n@private\r\n**/\r\n        my.triggerTouchFollow = function(e, el) {\r\n            my.updateCustomTouch(e, el, 'touchfollow');\r\n        };\r\n        /**\r\nA custom __event listener__ helper function\r\n\r\n@method cloneTouchEventItem\r\n@private\r\n**/\r\n        my.cloneTouchEventItem = function(oT) {\r\n            var nT = {};\r\n            nT.clientX = oT.clientX;\r\n            nT.clientY = oT.clientY;\r\n            nT.force = oT.force;\r\n            nT.identifier = oT.identifier;\r\n            nT.pageX = oT.pageX;\r\n            nT.pageY = oT.pageY;\r\n            nT.radiusX = oT.radiusX;\r\n            nT.radiusY = oT.radiusY;\r\n            nT.screenX = oT.screenX;\r\n            nT.screenY = oT.screenY;\r\n            nT.target = oT.target;\r\n            return nT;\r\n        };\r\n        /**\r\nA custom __event listener__ helper function\r\n@method updateCustomTouch\r\n@private\r\n**/\r\n        my.updateCustomTouch = function(e, el, type) {\r\n            var evt,\r\n                changedTouches = [],\r\n                targetTouches = [],\r\n                touches = [],\r\n                i, iz,\r\n                xt = my.xt,\r\n                getTouch = my.cloneTouchEventItem;\r\n            if (xt(e.changedTouches)) {\r\n                for (i = 0, iz = e.changedTouches.length; i < iz; i++) {\r\n                    changedTouches.push(getTouch(e.changedTouches[i]));\r\n                }\r\n            }\r\n            if (xt(e.targetTouches)) {\r\n                for (i = 0, iz = e.targetTouches.length; i < iz; i++) {\r\n                    targetTouches.push(getTouch(e.targetTouches[i]));\r\n                }\r\n            }\r\n            if (xt(e.touches)) {\r\n                for (i = 0, iz = e.touches.length; i < iz; i++) {\r\n                    touches.push(getTouch(e.touches[i]));\r\n                }\r\n            }\r\n            evt = new CustomEvent(type, {\r\n                altKey: e.altKey,\r\n                bubbles: e.bubbles,\r\n                cancelBubble: e.cancelBubble,\r\n                cancelable: e.cancelable,\r\n                changedTouches: changedTouches,\r\n                charCode: e.charCode,\r\n                clipboardData: e.clipboardData,\r\n                ctrlKey: e.ctrlKey,\r\n                currentTarget: e.currentTarget,\r\n                defaultPrevented: e.defaultPrevented,\r\n                detail: {},\r\n                eventPhase: e.eventPhase,\r\n                keyCode: e.eventPhase,\r\n                layerX: e.layerX,\r\n                layerY: e.layerY,\r\n                metaKey: e.metaKey,\r\n                pageX: e.pageX,\r\n                pageY: e.pageY,\r\n                path: e.path,\r\n                returnValue: e.returnValue,\r\n                shiftKey: e.shiftKey,\r\n                srcElement: e.srcElement,\r\n                target: e.target,\r\n                targetTouches: targetTouches,\r\n                timestamp: e.timestamp,\r\n                touches: touches,\r\n                view: e.view,\r\n                which: e.which\r\n            });\r\n            el.dispatchEvent(evt);\r\n        };\r\n    }\r\n    /**\r\nA utility function for adding JavaScript event listeners to multiple elements\r\n@method addNativeListener\r\n@param {String} evt - or an Array of Strings\r\n@param {Function} fn - function to be called when event triggers\r\n@param {String} targ - either a querySelectorAll string, or a DOM element, or an Array of DOM elements\r\n@return always true\r\n**/\r\n    my.addNativeListener = function(evt, fn, targ) {\r\n        var targets, i, iz, j, jz;\r\n        my.removeNativeListener(evt, fn, targ);\r\n        evt = [].concat(evt);\r\n        if (targ.substring) {\r\n            targets = document.body.querySelectorAll(targ);\r\n        }\r\n        else if (Array.isArray(targ)) {\r\n            targets = targ;\r\n        }\r\n        else {\r\n            targets = [targ];\r\n        }\r\n        if (my.isa_fn(fn)) {\r\n            for (j = 0, jz = evt.length; j < jz; j++) {\r\n                for (i = 0, iz = targets.length; i < iz; i++) {\r\n                    targets[i].addEventListener(evt[j], fn, false);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\nA utility function for adding JavaScript event listeners to multiple elements\r\n@method addNativeListener\r\n@param {String} evt - or an Array of Strings\r\n@param {Function} fn - function to be called when event triggers\r\n@param {String} targ - either a querySelectorAll string, or a DOM element, or an Array of DOM elements\r\n@return always true\r\n**/\r\n    my.removeNativeListener = function(evt, fn, targ) {\r\n        var targets, i, iz, j, jz;\r\n        evt = [].concat(evt);\r\n        if (targ.substring) {\r\n            targets = document.body.querySelectorAll(targ);\r\n        }\r\n        else if (Array.isArray(targ)) {\r\n            targets = targ;\r\n        }\r\n        else {\r\n            targets = [targ];\r\n        }\r\n        if (my.isa_fn(fn)) {\r\n            for (j = 0, jz = evt.length; j < jz; j++) {\r\n                for (i = 0, iz = targets.length; i < iz; i++) {\r\n                    targets[i].removeEventListener(evt[j], fn, false);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\nAdds event listeners to the element\r\n@method addListener\r\n@param {String} evt - or an Array of Strings from: 'up', 'down', 'enter', 'leave', 'move'\r\n@param {Function} fn - function to be called when event triggers\r\n@param {String} targ - either a querySelectorAll string, or a DOM element, or an Array of DOM elements\r\n@return always true\r\n**/\r\n    my.addListener = function(evt, fn, targ) {\r\n        var targets, i, iz, j, jz, nav;\r\n        my.removeListener(evt, fn, targ);\r\n        nav = (navigator.pointerEnabled || navigator.msPointerEnabled) ? true : false;\r\n        evt = [].concat(evt);\r\n        if (targ.substring) {\r\n            targets = document.body.querySelectorAll(targ);\r\n        }\r\n        else if (Array.isArray(targ)) {\r\n            targets = targ;\r\n        }\r\n        else {\r\n            targets = [targ];\r\n        }\r\n        if (my.isa_fn(fn)) {\r\n            for (j = 0, jz = evt.length; j < jz; j++) {\r\n                for (i = 0, iz = targets.length; i < iz; i++) {\r\n                    if (my.isa_dom(targets[i])) {\r\n                        switch (evt[j]) {\r\n                        case 'move':\r\n                            if (nav) {\r\n                                targets[i].addEventListener('pointermove', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].addEventListener('mousemove', fn, false);\r\n                                targets[i].addEventListener('touchmove', fn, false);\r\n                                targets[i].addEventListener('touchfollow', fn, false);\r\n                            }\r\n                            break;\r\n                        case 'up':\r\n                            if (nav) {\r\n                                targets[i].addEventListener('pointerup', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].addEventListener('mouseup', fn, false);\r\n                                targets[i].addEventListener('touchend', fn, false);\r\n                            }\r\n                            break;\r\n                        case 'down':\r\n                            if (nav) {\r\n                                targets[i].addEventListener('pointerdown', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].addEventListener('mousedown', fn, false);\r\n                                targets[i].addEventListener('touchstart', fn, false);\r\n                            }\r\n                            break;\r\n                        case 'leave':\r\n                            if (nav) {\r\n                                targets[i].addEventListener('pointerleave', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].addEventListener('mouseleave', fn, false);\r\n                                targets[i].addEventListener('touchleave', fn, false);\r\n                            }\r\n                            break;\r\n                        case 'enter':\r\n                            if (nav) {\r\n                                targets[i].addEventListener('pointerenter', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].addEventListener('mouseenter', fn, false);\r\n                                targets[i].addEventListener('touchenter', fn, false);\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\nRemove event listeners from the element\r\n@method removeListener\r\n@param {String} evt - one from: 'up', 'down', 'enter', 'leave', 'move'\r\n@param {Function} fn - function to be called when event triggers\r\n@param {String} targ - either a querySelectorAll string, or a DOM element\r\n@return true on success; false otherwise\r\n**/\r\n    my.removeListener = function(evt, fn, targ) {\r\n        var targets, i, iz, j, jz, nav;\r\n        evt = [].concat(evt);\r\n        nav = (navigator.pointerEnabled || navigator.msPointerEnabled) ? true : false;\r\n        if (targ.substring) {\r\n            targets = document.body.querySelectorAll(targ);\r\n        }\r\n        else if (Array.isArray(targ)) {\r\n            targets = targ;\r\n        }\r\n        else {\r\n            targets = [targ];\r\n        }\r\n\r\n        if (my.isa_fn(fn)) {\r\n            for (j = 0, jz = evt.length; j < jz; j++) {\r\n                for (i = 0, iz = targets.length; i < iz; i++) {\r\n                    if (my.isa_dom(targets[i])) {\r\n                        switch (evt[j]) {\r\n                        case 'move':\r\n                            if (nav) {\r\n                                targets[i].removeEventListener('pointermove', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].removeEventListener('mousemove', fn, false);\r\n                                targets[i].removeEventListener('touchmove', fn, false);\r\n                                targets[i].removeEventListener('touchfollow', fn, false);\r\n                            }\r\n                            break;\r\n                        case 'up':\r\n                            if (nav) {\r\n                                targets[i].removeEventListener('pointerup', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].removeEventListener('mouseup', fn, false);\r\n                                targets[i].removeEventListener('touchend', fn, false);\r\n                            }\r\n                            break;\r\n                        case 'down':\r\n                            if (nav) {\r\n                                targets[i].removeEventListener('pointerdown', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].removeEventListener('mousedown', fn, false);\r\n                                targets[i].removeEventListener('touchstart', fn, false);\r\n                            }\r\n                            break;\r\n                        case 'leave':\r\n                            if (nav) {\r\n                                targets[i].removeEventListener('pointerleave', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].removeEventListener('mouseleave', fn, false);\r\n                                targets[i].removeEventListener('touchleave', fn, false);\r\n                            }\r\n                            break;\r\n                        case 'enter':\r\n                            if (nav) {\r\n                                targets[i].removeEventListener('pointerenter', fn, false);\r\n                            }\r\n                            else {\r\n                                targets[i].removeEventListener('mouseenter', fn, false);\r\n                                targets[i].removeEventListener('touchenter', fn, false);\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\nA __utility__ function for performing bucket sorts on scrawl string arrays eg Group.entitys\r\n@method bucketSort\r\n@param {String} section scrawl library section name\r\n@param {String} attribute on which sort will be performed\r\n@param {Array} a array to be sorted\r\n@return sorted array\r\n@private\r\n**/\r\n    my.bucketSort = function(section, attribute, a) {\r\n        var b, i, iz, o, f;\r\n        b = [[]];\r\n        for (i = 0, iz = a.length; i < iz; i++) {\r\n            o = Math.floor(my[section][a[i]][attribute]);\r\n            if (!b[o]) {\r\n                b[o] = [];\r\n            }\r\n            b[o].push(a[i]);\r\n        }\r\n        f = [];\r\n        for (i = 0, iz = b.length; i < iz; i++) {\r\n            if (b[i]) {\r\n                f.push(b[i]);\r\n            }\r\n        }\r\n        return [].concat.apply([], f);\r\n    };\r\n    /**\r\nGeneral helper function - correct mouse coordinates if pad dimensions not equal to base cell dimensions\r\n\r\n@method correctCoordinates\r\n@param {Object} coords An object containing x and y attributes\r\n@param {String} [cell] CELLNAME String\r\n@return Amended coordinate object; false on error\r\n**/\r\n    my.correctCoordinates = function(coords, cell) {\r\n        var vector,\r\n            pad,\r\n            w, h,\r\n            get = my.xtGet;\r\n        coords = my.safeObject(coords);\r\n        vector = my.makeVector(coords);\r\n        if (my.xta(coords.x, coords.y)) {\r\n            cell = (my.cell[cell]) ? my.cell[cell] : my.cell[my.pad[my.work.currentPad].base];\r\n            pad = my.pad[cell.pad];\r\n            w = get(pad.localWidth, pad.width, 300);\r\n            h = get(pad.localHeight, pad.height, 150);\r\n            if (w !== cell.actualWidth) {\r\n                vector.x /= (w / cell.actualWidth);\r\n            }\r\n            if (h !== cell.actualHeight) {\r\n                vector.y /= (h / cell.actualHeight);\r\n            }\r\n            return vector;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nA __general__ function which passes on requests to Pads to generate new &lt;canvas&gt; elements and associated objects - see Pad.addNewCell() for more details\r\n@method addNewCell\r\n@param {Object} data Initial attribute values for new object\r\n@param {String} pad PADNAME\r\n@return New Cell object\r\n**/\r\n    my.addNewCell = function(data, pad) {\r\n        pad = (pad && pad.substring) ? pad : my.work.currentPad;\r\n        return my.pad[pad].addNewCell(data);\r\n    };\r\n    /**\r\nA __general__ function which deletes Cell objects and their associated paraphinalia - see Pad.deleteCells() for more details\r\n@method deleteCells\r\n@param {Array} cells Array of CELLNAMEs - can also be a String\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.deleteCells = function() {\r\n        var slice,\r\n            i,\r\n            iz,\r\n            j,\r\n            jz,\r\n            group = my.group,\r\n            groupnames = my.groupnames,\r\n            ri = my.removeItem;\r\n        slice = Array.prototype.slice.call(arguments);\r\n        if (Array.isArray(slice[0])) {\r\n            slice = slice[0];\r\n        }\r\n        for (i = 0, iz = slice.length; i < iz; i++) {\r\n            for (j = 0, jz = my.padnames.length; j < jz; j++) {\r\n                my.pad[my.padnames[j]].deleteCell(c[i]);\r\n            }\r\n            delete group[slice[i]];\r\n            delete group[slice[i] + '_field'];\r\n            delete group[slice[i] + '_fence'];\r\n            ri(groupnames, slice[i]);\r\n            ri(groupnames, slice[i] + '_field');\r\n            ri(groupnames, slice[i] + '_fence');\r\n            delete my.context[slice[i]];\r\n            delete my.canvas[slice[i]];\r\n            delete my.ctx[my.cell[slice[i]].context];\r\n            ri(my.ctxnames, my.cell[slice[i]].context);\r\n            delete my.cell[slice[i]];\r\n            ri(my.cellnames, slice[i]);\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __general__ function which adds supplied entitynames to Group.entitys attribute\r\n@method addEntitysToGroups\r\n@param {Array} groups Array of GROUPNAME Strings - can also be a String\r\n@param {Array} entitys Array of SPRITENAME Strings - can also be a String\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.addEntitysToGroups = function(groups, entitys) {\r\n        var groupArray,\r\n            entityArray,\r\n            group,\r\n            i,\r\n            iz;\r\n        if (my.xta(groups, entitys)) {\r\n            groupArray = [].concat(groups);\r\n            entityArray = [].concat(entitys);\r\n            for (i = 0, iz = groupArray.length; i < iz; i++) {\r\n                group = my.group[groupArray[i]];\r\n                if (group) {\r\n                    group.addEntitysToGroup(entityArray);\r\n                }\r\n            }\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __general__ function which removes supplied entitynames from Group.entitys attribute\r\n@method removeEntitysFromGroups\r\n@param {Array} groups Array of GROUPNAME Strings - can also be a String\r\n@param {Array} entitys Array of SPRITENAME Strings - can also be a String\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.removeEntitysFromGroups = function(groups, entitys) {\r\n        var groupArray,\r\n            entityArray,\r\n            group,\r\n            i,\r\n            iz;\r\n        if (my.xta(groups, entitys)) {\r\n            groupArray = [].concat(groups);\r\n            entityArray = [].concat(entitys);\r\n            for (i = 0, iz = groupArray.length; i < iz; i++) {\r\n                group = my.group[groupArray[i]];\r\n                if (group) {\r\n                    group.removeEntitysFromGroup(entityArray);\r\n                }\r\n            }\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nA __general__ function to delete entity objects\r\n@method deleteEntity\r\n@param {Array} items Array of SPRITENAME Strings - can also be a String\r\n@return The Scrawl library object (scrawl)\r\n@chainable\r\n**/\r\n    my.deleteEntity = function() {\r\n        var slice,\r\n            i,\r\n            iz,\r\n            j,\r\n            jz,\r\n            k,\r\n            kz,\r\n            t,\r\n            tz,\r\n            targets,\r\n            target,\r\n            targetFlag,\r\n            entityName,\r\n            contextName,\r\n            ri = my.removeItem,\r\n            anim = my.animation,\r\n            animnames = my.animationnames,\r\n            a;\r\n        slice = Array.prototype.slice.call(arguments);\r\n        if (Array.isArray(slice[0])) {\r\n            slice = slice[0];\r\n        }\r\n        for (i = 0, iz = slice.length; i < iz; i++) {\r\n            entityName = my.entity[slice[i]];\r\n            if (entityName) {\r\n                my.pathDeleteEntity(entityName);\r\n                contextName = entityName.context;\r\n                ri(my.ctxnames, contextName);\r\n                delete my.ctx[contextName];\r\n                ri(my.entitynames, slice[i]);\r\n                delete my.entity[slice[i]];\r\n                for (j = 0, jz = my.groupnames.length; j < jz; j++) {\r\n                    ri(my.group[my.groupnames[j]].entitys, slice[i]);\r\n                }\r\n            }\r\n        }\r\n        return my;\r\n    };\r\n    /**\r\nscrawl.deleteEntity hook function - modified by path extension\r\n@method pathDeleteEntity\r\n@private\r\n**/\r\n    my.pathDeleteEntity = function(items) {};\r\n    /**\r\nAlias for makeVector()\r\n@method newVector\r\n@deprecated\r\n**/\r\n    my.newVector = function(items) {\r\n        return my.makeVector(items);\r\n    };\r\n    /**\r\nAlias for makePad()\r\n@method newPad\r\n@private\r\n@deprecated\r\n**/\r\n    my.newPad = function(items) {\r\n        return my.makePad(items);\r\n    };\r\n    /**\r\nAlias for makeCell()\r\n@method newCell\r\n@private\r\n@deprecated\r\n**/\r\n    my.newCell = function(items) {\r\n        return my.makeCell(items);\r\n    };\r\n    /**\r\nAlias for makeContext()\r\n@method newContext\r\n@private\r\n@deprecated\r\n**/\r\n    my.newContext = function(items) {\r\n        return my.makeContext(items);\r\n    };\r\n    /**\r\nAlias for makeGroup()\r\n@method newGroup\r\n@deprecated\r\n**/\r\n    my.newGroup = function(items) {\r\n        return my.makeGroup(items);\r\n    };\r\n    /**\r\nAlias for makeGradient()\r\n@method newGradient\r\n@deprecated\r\n**/\r\n    my.newGradient = function(items) {\r\n        return my.makeGradient(items);\r\n    };\r\n    /**\r\nAlias for makeRadialGradient()\r\n@method newRadialGradient\r\n@deprecated\r\n**/\r\n    my.newRadialGradient = function(items) {\r\n        return my.makeRadialGradient(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Vector objects\r\n@method makeVector\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Vector object\r\n**/\r\n    my.makeVector = function(items) {\r\n        return new my.Vector(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Pad objects\r\n@method makePad\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Pad object\r\n@private\r\n**/\r\n    my.makePad = function(items) {\r\n        return new my.Pad(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Cell objects\r\n@method makeCell\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Cell object\r\n@private\r\n**/\r\n    my.makeCell = function(items) {\r\n        return new my.Cell(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Context objects\r\n@method makeContext\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Context object\r\n@private\r\n**/\r\n    my.makeContext = function(items) {\r\n        return new my.Context(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Group objects\r\n@method makeGroup\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Group object\r\n**/\r\n    my.makeGroup = function(items) {\r\n        return new my.Group(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Gradient objects\r\n@method makeGradient\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Gradient object\r\n**/\r\n    my.makeGradient = function(items) {\r\n        return new my.Gradient(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new RadialGradient objects\r\n@method makeRadialGradient\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return RadialGradient object\r\n**/\r\n    my.makeRadialGradient = function(items) {\r\n        return new my.RadialGradient(items);\r\n    };\r\n    my.setPerspectives = function() {};\r\n\r\n    /**\r\n# Vector\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeVector()\r\n\r\n## Purpose\r\n\r\n* To hold vector (coordinate, movement) data\r\n@class Vector\r\n@constructor\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Vector = function(items) {\r\n        items = my.safeObject(items);\r\n        /**\r\nX coordinate (px)\r\n@property x\r\n@type Number\r\n@default 0\r\n**/\r\n        this.x = items.x || 0;\r\n        /**\r\nY coodinate (px)\r\n@property y\r\n@type Number\r\n@default 0\r\n**/\r\n        this.y = items.y || 0;\r\n        /**\r\nZ coordinate (px)\r\n@property z\r\n@type Number\r\n@default 0\r\n**/\r\n        this.z = items.z || 0;\r\n        /**\r\nVector name - not guaranteed to be unique\r\n@property name\r\n@type String\r\n@default 'generic'\r\n**/\r\n        this.name = items.name || 'generic';\r\n        return this;\r\n    };\r\n    my.Vector.prototype = Object.create(Object.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Vector'\r\n@final\r\n**/\r\n    my.Vector.prototype.type = 'Vector';\r\n    my.work.d.Vector = {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0,\r\n        name: 'generic'\r\n    };\r\n    /**\r\nSet the Vector's coordinates to values that will result in the given magnitude\r\n@method setMagnitudeTo\r\n@param {Number} item New magnitude\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.setMagnitudeTo = function(item) {\r\n        this.normalize();\r\n        this.scalarMultiply(item);\r\n        if (this.getMagnitude() !== item) {\r\n            this.normalize();\r\n            this.scalarMultiply(item);\r\n            if (this.getMagnitude() !== item) {\r\n                this.normalize();\r\n                this.scalarMultiply(item);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nNormalize the Vector to a unit vector\r\n@method normalize\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.normalize = function() {\r\n        var val = this.getMagnitude();\r\n        if (val > 0) {\r\n            this.x /= val;\r\n            this.y /= val;\r\n            this.z /= val;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nSet all attributes to zero\r\n@method zero\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.zero = function() {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.z = 0;\r\n        return this;\r\n    };\r\n    /**\r\nSet attributes to new values\r\n@method set\r\n@param {Object} items Object containing attribute key:value pairs\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.set = function(items) {\r\n        items = my.safeObject(items);\r\n        var get = my.xtGet;\r\n        this.x = (get(items.x, this.x));\r\n        this.y = (get(items.y, this.y));\r\n        this.z = (get(items.z, this.z));\r\n        return this;\r\n    };\r\n    /**\r\nCompare two Vector objects for equality\r\n@method isEqual\r\n@param {Mixed} item Object to be tested against this\r\n@return True if argument object is a Vector, and all attributes match; false otherwise\r\n**/\r\n    my.Vector.prototype.isEqual = function(item) {\r\n        if (my.isa_vector(item)) {\r\n            if (this.x === item.x && this.y === item.y && this.z === item.z) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nComparea vector-like object to this one for equality\r\n@method isLike\r\n@param {Mixed} item Object to be tested against this\r\n@return True if all attributes match; false otherwise\r\n**/\r\n    my.Vector.prototype.isLike = function(item) {\r\n        if (my.isa_obj(item)) {\r\n            if (this.x === item.x && this.y === item.y && this.z === item.z) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nextracts x and y data\r\n@method getData\r\n@return Object (not vector) with x and y attributes\r\n**/\r\n    my.Vector.prototype.getData = function() {\r\n        return {\r\n            x: this.x,\r\n            y: this.y,\r\n            z: this.z\r\n        };\r\n    };\r\n    /**\r\nCheck if x and y attributes are set\r\n@method hasCoordinates\r\n@param {Mixed} item Object to be tested\r\n@return True if argument possesses x and y attributes\r\n**/\r\n    my.Vector.prototype.hasCoordinates = function(item) {\r\n        return (my.xta(item, item.x, item.y)) ? true : false;\r\n    };\r\n    /**\r\nAdd a Vector to this Vector\r\n\r\n@method vectorAdd\r\n@param {Object} item Vector to be added to this; can also be an Object with x, y and z attributes (all optional)\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.vectorAdd = function(item) {\r\n        item = my.safeObject(item);\r\n        this.x += item.x || 0;\r\n        this.y += item.y || 0;\r\n        this.z += item.z || 0;\r\n        return this;\r\n    };\r\n    /**\r\nSubtract a Vector from this Vector\r\n@method vectorSubtract\r\n@param {Object} item Vector to be subtracted from this; can also be an Object with x, y and z attributes (all optional)\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.vectorSubtract = function(item) {\r\n        item = my.safeObject(item);\r\n        this.x -= item.x || 0;\r\n        this.y -= item.y || 0;\r\n        this.z -= item.z || 0;\r\n        return this;\r\n    };\r\n    /**\r\nMultiply a Vector with this Vector\r\n@method vectorMultiply\r\n@param {Object} item Vector to be multiplied with this; can also be an Object with x, y and z attributes (all optional)\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.vectorMultiply = function(item) {\r\n        item = my.safeObject(item);\r\n        this.x *= item.x || 1;\r\n        this.y *= item.y || 1;\r\n        this.z *= item.z || 1;\r\n        return this;\r\n    };\r\n    /**\r\nDivide a Vector into this Vector\r\n@method vectorDivide\r\n@param {Object} item Vector to be divided into this; can also be an Object with x, y and z attributes (all optional)\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.vectorDivide = function(item) {\r\n        item = my.safeObject(item);\r\n        this.x /= ((item.x || 0) !== 0) ? item.x : 1;\r\n        this.y /= ((item.y || 0) !== 0) ? item.y : 1;\r\n        this.z /= ((item.z || 0) !== 0) ? item.z : 1;\r\n        return this;\r\n    };\r\n    /**\r\nMultiply this Vector by a scalar value\r\n@method scalarMultiply\r\n@param {Number} item Multiplier scalar\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.scalarMultiply = function(item) {\r\n        if (item.toFixed) {\r\n            this.x *= item;\r\n            this.y *= item;\r\n            this.z *= item;\r\n            return this;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nDivide this Vector by a scalar value\r\n@method scalarDivide\r\n@param {Number} item Division scalar\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.scalarDivide = function(item) {\r\n        if ((item.toFixed) && item !== 0) {\r\n            this.x /= item;\r\n            this.y /= item;\r\n            this.z /= item;\r\n            return this;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRetrieve Vector's magnitude value\r\n@method getMagnitude\r\n@return Magnitude value\r\n**/\r\n    my.Vector.prototype.getMagnitude = function() {\r\n        return Math.sqrt((this.x * this.x) + (this.y * this.y) + (this.z * this.z));\r\n    };\r\n    /**\r\nCheck to see if Vector is a zero vector\r\n@method checkNotZero \r\n@return True if Vector is non-zero; false otherwise\r\n**/\r\n    my.Vector.prototype.checkNotZero = function() {\r\n        return (this.x || this.y || this.z) ? true : false;\r\n    };\r\n    /**\r\nReturn a clone of this Vector\r\n@method getVector\r\n@return Clone of this Vector\r\n**/\r\n    my.Vector.prototype.getVector = function() {\r\n        return my.makeVector({\r\n            x: this.x,\r\n            y: this.y,\r\n            z: this.z\r\n        });\r\n    };\r\n    /**\r\nObtain the cross product of one Vector and a copy of this, or another, Vector\r\n\r\nArithmetic is v(crossProduct)u, not u(crossProduct)v\r\n\r\n@method getCrossProduct\r\n@param {Object} u Vector to be used to calculate cross product; can also be an Object with x, y and z attributes (all optional)\r\n@param {Vector} [v] Source vector (by default: this)\r\n@return New cross product Vector; this on failure\r\n@chainable\r\n**/\r\n    my.Vector.prototype.getCrossProduct = function(u, v) {\r\n        var v1x,\r\n            v1y,\r\n            v1z,\r\n            v2x,\r\n            v2y,\r\n            v2z;\r\n        if (my.isa_obj(u)) {\r\n            v = (my.isa_obj(v)) ? v : this;\r\n            v1x = v.x || 0;\r\n            v1y = v.y || 0;\r\n            v1z = v.z || 0;\r\n            v2x = u.x || 0;\r\n            v2y = u.y || 0;\r\n            v2z = u.z || 0;\r\n            return my.makeVector({\r\n                x: (v1y * v2z) - (v1z * v2y),\r\n                y: -(v1x * v2z) + (v1z * v2x),\r\n                z: (v1x * v2y) + (v1y * v2x)\r\n            });\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nObtain the dot product of one Vector and this, or another, Vector\r\n\r\nArithmetic is v(dotProduct)u, not u(dotProduct)v\r\n\r\n@method getDotProduct\r\n@param {Object} u Vector to be used to calculate dot product; can also be an Object with x, y and z attributes (all optional)\r\n@param {Vector} [v] Source vector (by default: this)\r\n@return Dot product result; false on failure\r\n**/\r\n    my.Vector.prototype.getDotProduct = function(u, v) {\r\n        if (my.isa_obj(u)) {\r\n            v = (my.isa_obj(v)) ? v : this;\r\n            return ((u.x || 0) * (v.x || 0)) + ((u.y || 0) * (v.y || 0)) + ((u.z || 0) * (v.z || 0));\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nObtain the triple scalar product of two Vectors and this, or a third, Vector\r\n@method getTripleScalarProduct\r\n@param {Object} u First vector to be used to calculate triple scalar product; can also be an Object with x, y and z attributes (all optional)\r\n@param {Object} v Second vector to be used to calculate triple scalar product; can also be an Object with x, y and z attributes (all optional)\r\n@param {Vector} [w] Third vector to be used to calculate triple scalar product (by default: this)\r\n@return Triple scalar product result; false on failure\r\n**/\r\n    my.Vector.prototype.getTripleScalarProduct = function(u, v, w) {\r\n        var ux,\r\n            uy,\r\n            uz,\r\n            vx,\r\n            vy,\r\n            vz,\r\n            wx,\r\n            wy,\r\n            wz;\r\n        if (my.isa_obj(u) && my.isa_obj(v)) {\r\n            w = (my.isa_obj(w)) ? w : this;\r\n            ux = u.x || 0;\r\n            uy = u.y || 0;\r\n            uz = u.z || 0;\r\n            vx = v.x || 0;\r\n            vy = v.y || 0;\r\n            vz = v.z || 0;\r\n            wx = w.x || 0;\r\n            wy = w.y || 0;\r\n            wz = w.z || 0;\r\n            return (ux * ((vy * wz) - (vz * wy))) + (uy * (-(vx * wz) + (vz * wx))) + (uz * ((vx * wy) - (vy * wx)));\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nRotate the Vector by a given angle\r\n@method rotate\r\n@param {Number} angle Rotation angle (in degrees)\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.rotate = function(angle) {\r\n        var stat_vr = [0, 0];\r\n        if (angle.toFixed) {\r\n            stat_vr[0] = Math.atan2(this.y, this.x);\r\n            stat_vr[0] += (angle * 0.01745329251);\r\n            stat_vr[1] = this.getMagnitude();\r\n            this.x = stat_vr[1] * Math.cos(stat_vr[0]);\r\n            this.y = stat_vr[1] * Math.sin(stat_vr[0]);\r\n            return this;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRotate the Vector by 180 degrees\r\n@method reverse\r\n@return This\r\n@chainable\r\n**/\r\n    my.Vector.prototype.reverse = function() {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        this.z = -this.z;\r\n        return this;\r\n    };\r\n    /**\r\nRotate a Vector object by a Quaternion rotation\r\n@method quaternionMultiply\r\n@param {Quaternion} item Quaternion object\r\n@param {Number} [mag] Magnitude value to which Vector needs to be set after rotation\r\n@return Amended version of Vector; this on failure\r\n@chainable\r\n**/\r\n    my.Vector.prototype.rotate3d = function(item, mag) {\r\n        var q1,\r\n            q2,\r\n            q3,\r\n            w;\r\n        if (my.isa_quaternion(item)) {\r\n            w = my.work.workquat;\r\n            mag = (mag && mag.toFixed) ? mag : this.getMagnitude();\r\n            q1 = w.q1.set(item);\r\n            q2 = w.q2.set(this);\r\n            q3 = w.q3.set(item).conjugate();\r\n            q1.quaternionMultiply(q2);\r\n            q1.quaternionMultiply(q3);\r\n            this.set(q1.v).setMagnitudeTo(mag);\r\n            return this;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n# Base \r\n\r\n## Instantiation\r\n\r\n* This object should never be instantiated by users\r\n\r\n## Purpose\r\n\r\n* the root object for all other Scrawl objects (except Vectors, Quaternions)\r\n* gives every object its (unique) name attribute\r\n* also supplies title and comment attributes (very basic assistive technology)\r\n* provides basic getter and setter functions, and a JSON-based toString function\r\n* sets out the cloning strategy for other objects, and restricts which object types can be cloned\r\n@class Base\r\n@constructor\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Base = function(items) {\r\n        items = my.safeObject(items);\r\n        /**\r\nUnique identifier for each object; default: computer-generated String based on Object's type\r\n@property name\r\n@type String\r\n**/\r\n        this.name = my.makeName({\r\n            name: items.name,\r\n            type: this.type,\r\n            target: this.classname\r\n        });\r\n        return this;\r\n    };\r\n    my.Base.prototype = Object.create(Object.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Base'\r\n@final\r\n**/\r\n    my.Base.prototype.type = 'Base';\r\n    my.Base.prototype.classname = 'objectnames';\r\n    my.work.d.Base = {\r\n        /**\r\nComment, for accessibility\r\n@property comment\r\n@type String\r\n@default ''\r\n**/\r\n        comment: '',\r\n        /**\r\nTitle, for accessibility\r\n@property title\r\n@type String\r\n@default ''\r\n**/\r\n        title: '',\r\n        /**\r\nCreation timestamp\r\n@property timestamp\r\n@type String\r\n@default ''\r\n**/\r\n        timestamp: ''\r\n    };\r\n    /**\r\nRetrieve an attribute value. If the attribute value has not been set, then the default value for that attribute will be returned.\r\n@method get\r\n@param {String} item Attribute key\r\n@return Attribute value\r\n**/\r\n    my.Base.prototype.get = function(item) {\r\n        return my.xtGet(this[item], my.work.d[this.type][item]);\r\n    };\r\n    /**\r\nSet attribute values. Multiple attributes can be set in the one call by including the attribute key:value pair in the argument object.\r\n\r\nAn attribute value will only be set if the object already has a default value for that attribute. This restricts the ability of coders to add attributes to Scrawl objects.\r\n@method set\r\n@param {Object} items Object containing attribute key:value pairs\r\n@return This\r\n@chainable\r\n**/\r\n    my.Base.prototype.set = function(items) {\r\n        var d = my.work.d[this.type],\r\n            xt = my.xt;\r\n        for (var i in items) {\r\n            if (xt(d[i])) {\r\n                this[i] = items[i];\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nClone a Scrawl.js object, optionally altering attribute values in the cloned object\r\n\r\nNote that any callback or fn attribute functions will be referenced by the clone, not copied to the clone; these can be overwritten with new anonymous functions by including them in the items argument object\r\n\r\n(This function is replaced by the path extension)\r\n\r\n@method clone\r\n@param {Object} items Object containing attribute key:value pairs; will overwrite existing values in the cloned, but not the source, Object\r\n@return Cloned object\r\n@chainable\r\n**/\r\n    my.Base.prototype.clone = function(items) {\r\n        var merged,\r\n            keys,\r\n            that,\r\n            i,\r\n            iz;\r\n        merged = my.mergeOver(this.parse(), my.safeObject(items));\r\n        delete merged.context; //required for successful cloning of entitys\r\n        keys = Object.keys(this);\r\n        that = this;\r\n        for (i = 0, iz = keys.length; i < iz; i++) {\r\n            if (my.isa_fn(this[keys[i]])) {\r\n                merged[keys[i]] = that[keys[i]];\r\n            }\r\n        }\r\n        return new my[this.type](merged);\r\n    };\r\n    /**\r\nTurn the object into a JSON String\r\n@method parse\r\n@return object of object's currently set attributes\r\n**/\r\n    my.Base.prototype.parse = function() {\r\n        return JSON.parse(JSON.stringify(this));\r\n    };\r\n    /**\r\nStamp helper function - convert string percentage values to numerical values\r\n@method numberConvert\r\n@param {String} val coordinate String\r\n@param {Number} dim dimension value\r\n@return Number - value\r\n@private\r\n**/\r\n    my.Base.prototype.numberConvert = function(val, dim) {\r\n        var result = parseFloat(val) / 100;\r\n        if (isNaN(result)) {\r\n            switch (val) {\r\n            case 'right':\r\n            case 'bottom':\r\n                return dim;\r\n            case 'center':\r\n                return dim / 2;\r\n            default:\r\n                return 0;\r\n            }\r\n        }\r\n        return result * dim;\r\n    };\r\n\r\n    /**\r\n# Device\r\n\r\n## Instantiation\r\n\r\n* This object should never be instantiated by users\r\n\r\n## Purpose\r\n\r\n* Wraps the browser's viewport, and includes basic information about the device\r\n\r\n@class Device\r\n@constructor\r\n@extends Base\r\n**/\r\n    my.Device = function() {\r\n        this.name = 'scrawl_viewport';\r\n        /**\r\nviewport width\r\n@property width\r\n@type Number\r\n@default calculated automatically\r\n**/\r\n        this.width = null;\r\n        /**\r\nviewport height\r\n@property height\r\n@type Number\r\n@default calculated automatically\r\n**/\r\n        this.height = null;\r\n        /**\r\nviewport offset from the top of the document\r\n@property offsetX\r\n@type Number\r\n@default calculated automatically\r\n**/\r\n        this.offsetX = null;\r\n        /**\r\nviewport offset from the left side of the document\r\n@property offsetY\r\n@type Number\r\n@default calculated automatically\r\n**/\r\n        this.offsetY = null;\r\n        /**\r\nDevice/browser is touch-enabled and we should expect to receive touch events\r\n@property expectTouch\r\n@type Number\r\n@default calculated automatically\r\n**/\r\n        this.expectTouch = false;\r\n        /**\r\ncanvas support\r\n\r\nFalse if device does not support the canvas element; true otherwise\r\n@property canvas\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.canvas = false;\r\n        /**\r\ncanvas global composite operation support: source-in\r\n\r\nFalse if device incorrectly supports the GCO source-in functionality\r\n@property canvasGcoSourceIn\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.canvasGcoSourceIn = false;\r\n        /**\r\ncanvas global composite operation support: source-out\r\n\r\nFalse if device incorrectly supports the GCO source-out functionality\r\n@property canvasGcoSourceOut\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.canvasGcoSourceOut = false;\r\n        /**\r\ncanvas global composite operation support: destination-atop\r\n\r\nFalse if device incorrectly supports the GCO destination-atop functionality\r\n@property canvasGcoDestinationAtop\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.canvasGcoDestinationAtop = false;\r\n        /**\r\ncanvas global composite operation support: destination-in\r\n\r\nFalse if device incorrectly supports the GCO destination-in functionality\r\n@property canvasGcoDestinationIn\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.canvasGcoDestinationIn = false;\r\n        /**\r\ncanvas global composite operation support: copy\r\n\r\nFalse if device incorrectly supports the GCO copy functionality\r\n@property canvasGcoCopy\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.canvasGcoCopy = false;\r\n        /**\r\ncanvas even-odd winding functionality\r\n\r\nFalse if device does not support the canvas even-odd winding functionality; true otherwise\r\n@property canvasEvenOddWinding\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.canvasEvenOddWinding = false;\r\n        /**\r\ncanvas dashed line functionality\r\n\r\nFalse if device does not support the canvas dashed line functionality; true otherwise\r\n@property canvasDashedLine\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.canvasDashedLine = false;\r\n        this.getDeviceData();\r\n        return this;\r\n    };\r\n    my.Device.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Device'\r\n@final\r\n**/\r\n    my.Device.prototype.type = 'Device';\r\n    my.Device.prototype.classname = 'objectnames';\r\n    my.work.d.Device = {\r\n        width: null,\r\n        height: null,\r\n        offsetX: null,\r\n        offsetY: null,\r\n        expectTouch: false,\r\n        canvas: false,\r\n        canvasEvenOddWinding: false,\r\n        canvasDashedLine: false,\r\n        canvasGcoSourceIn: false,\r\n        canvasGcoSourceOut: false,\r\n        canvasGcoDestinationAtop: false,\r\n        canvasGcoDestinationIn: false,\r\n        canvasGcoCopy: false,\r\n        video: false,\r\n        videoAutoplay: false,\r\n        videoForceFullScreen: false\r\n    };\r\n    my.mergeInto(my.work.d.Device, my.work.d.Base);\r\n\r\n    /**\r\nFeature detection\r\n@method getDeviceData\r\n@private\r\n**/\r\n    my.Device.prototype.getDeviceData = function() {\r\n        this.checkCanvas();\r\n        if (this.canvas) {\r\n            this.checkCanvasEvenOddWinding();\r\n            this.checkCanvasDashedLine();\r\n            this.checkCanvasGco();\r\n        }\r\n        this.getViewportDimensions();\r\n        this.getViewportPosition();\r\n        this.getStacksDeviceData();\r\n        this.getImagesDeviceData();\r\n        this.checkTouch();\r\n    };\r\n    /**\r\nCheck if we should expect to receive touch events\r\n\r\nModern IE uses pointer events, so Device will not check for IE specific touch-enabled devices\r\n\r\n@method checkTouch\r\n@private\r\n**/\r\n    my.Device.prototype.checkTouch = function() {\r\n        var test = false;\r\n        if ('ontouchstart' in window) {\r\n            test = true;\r\n        }\r\n        else if (window.DocumentTouch && document instanceof DocumentTouch) {\r\n            test = true;\r\n        }\r\n        this.expectTouch = test;\r\n    };\r\n    /**\r\nCheck if device supports canvas element\r\n@method checkCanvas\r\n@private\r\n**/\r\n    my.Device.prototype.checkCanvas = function() {\r\n        var c = document.createElement('canvas'),\r\n            test = c.getContext('2d');\r\n        this.canvas = (test) ? true : false;\r\n    };\r\n    /**\r\nCheck if device supports canvas evenOdd winding\r\n@method checkCanvasEvenOddWinding\r\n@private\r\n**/\r\n    my.Device.prototype.checkCanvasEvenOddWinding = function() {\r\n        var c = document.createElement('canvas'),\r\n            x = c.getContext('2d'),\r\n            w = 'evenodd',\r\n            test;\r\n        c.width = 10;\r\n        c.height = 10;\r\n        x.beginPath();\r\n        x.moveTo(0, 0);\r\n        x.lineTo(10, 0);\r\n        x.lineTo(10, 10);\r\n        x.lineTo(0, 10);\r\n        x.lineTo(0, 0);\r\n        x.moveTo(3, 3);\r\n        x.lineTo(7, 3);\r\n        x.lineTo(7, 7);\r\n        x.lineTo(3, 7);\r\n        x.lineTo(3, 3);\r\n        x.moveTo(0, 0);\r\n        x.closePath();\r\n        x.mozFillRule = w;\r\n        x.msFillRule = w;\r\n        x.fill(w);\r\n        test = x.getImageData(5, 5, 1, 1);\r\n        this.canvasEvenOddWinding = (test.data[3]) ? false : true;\r\n    };\r\n    /**\r\nCheck if device supports dashed line functionality\r\n@method checkCanvasDashedLine\r\n@private\r\n**/\r\n    my.Device.prototype.checkCanvasDashedLine = function() {\r\n        var c = document.createElement('canvas'),\r\n            x = c.getContext('2d'),\r\n            d = [5, 5],\r\n            test;\r\n        c.width = 10;\r\n        c.height = 10;\r\n        x.mozDash = d;\r\n        x.lineDash = d;\r\n        try {\r\n            x.setLineDash(d);\r\n        }\r\n        catch (e) {}\r\n        x.lineWidth = 10;\r\n        x.beginPath();\r\n        x.moveTo(0, 5);\r\n        x.lineTo(10, 5);\r\n        x.stroke();\r\n        test = x.getImageData(8, 5, 1, 1);\r\n        this.canvasDashedLine = (test.data[3]) ? false : true;\r\n    };\r\n    /**\r\nCheck if device supports various global composition operation functionalities\r\n@method checkCanvasGco\r\n@private\r\n**/\r\n    my.Device.prototype.checkCanvasGco = function() {\r\n        var c = document.createElement('canvas'),\r\n            x = c.getContext('2d'),\r\n            test;\r\n        c.width = 10;\r\n        c.height = 10;\r\n\r\n        // canvasGcoSourceIn\r\n        x.fillStyle = 'red';\r\n        x.fillRect(3, 0, 4, 10);\r\n        x.globalCompositeOperation = 'source-in';\r\n        x.fillStyle = 'blue';\r\n        x.fillRect(0, 3, 10, 4);\r\n        test = x.getImageData(5, 1, 1, 1);\r\n        this.canvasGcoSourceIn = (test.data[3]) ? false : true;\r\n        x.globalCompositeOperation = 'source-over';\r\n        x.clearRect(0, 0, 10, 10);\r\n\r\n        // canvasGcoSourceOut\r\n        x.fillStyle = 'red';\r\n        x.fillRect(3, 0, 4, 10);\r\n        x.globalCompositeOperation = 'source-out';\r\n        x.fillStyle = 'blue';\r\n        x.fillRect(0, 3, 10, 4);\r\n        test = x.getImageData(5, 1, 1, 1);\r\n        this.canvasGcoSourceOut = (test.data[3]) ? false : true;\r\n        x.globalCompositeOperation = 'source-over';\r\n        x.clearRect(0, 0, 10, 10);\r\n\r\n        // canvasGcoDestinationAtop\r\n        x.fillStyle = 'red';\r\n        x.fillRect(3, 0, 4, 10);\r\n        x.globalCompositeOperation = 'destination-atop';\r\n        x.fillStyle = 'blue';\r\n        x.fillRect(0, 3, 10, 4);\r\n        test = x.getImageData(5, 1, 1, 1);\r\n        this.canvasGcoDestinationAtop = (test.data[3]) ? false : true;\r\n        x.globalCompositeOperation = 'source-over';\r\n        x.clearRect(0, 0, 10, 10);\r\n\r\n        // canvasGcoDestinationIn\r\n        x.fillStyle = 'red';\r\n        x.fillRect(3, 0, 4, 10);\r\n        x.globalCompositeOperation = 'destination-in';\r\n        x.fillStyle = 'blue';\r\n        x.fillRect(0, 3, 10, 4);\r\n        test = x.getImageData(5, 1, 1, 1);\r\n        this.canvasGcoDestinationIn = (test.data[3]) ? false : true;\r\n        x.globalCompositeOperation = 'source-over';\r\n        x.clearRect(0, 0, 10, 10);\r\n\r\n        // canvasGcoCopy\r\n        x.fillStyle = 'red';\r\n        x.fillRect(3, 0, 4, 10);\r\n        x.globalCompositeOperation = 'copy';\r\n        x.fillStyle = 'blue';\r\n        x.fillRect(0, 3, 10, 4);\r\n        test = x.getImageData(5, 1, 1, 1);\r\n        this.canvasGcoCopy = (test.data[3]) ? false : true;\r\n    };\r\n    /**\r\nDetermine viewport dimensions\r\n@method getViewportDimensions\r\n@return Boolean - true if dimensions have changed; false otherwise\r\n@private\r\n**/\r\n    my.Device.prototype.getViewportDimensions = function(e) {\r\n        var d, w, h;\r\n        if (e) {\r\n            d = my.device;\r\n            w = d.width;\r\n            h = d.height;\r\n            d.width = document.documentElement.clientWidth - 1;\r\n            d.height = document.documentElement.clientHeight - 1;\r\n            return (w != d.width || h != d.height) ? true : false;\r\n        }\r\n        w = this.width;\r\n        h = this.height;\r\n        this.width = document.documentElement.clientWidth - 1;\r\n        this.height = document.documentElement.clientHeight - 1;\r\n        return (w != this.width || h != this.height) ? true : false;\r\n    };\r\n    /**\r\nDetermine viewport position within the page\r\n@method getViewportPosition\r\n@return Boolean - true if scrolling has occurred; false otherwise\r\n@private\r\n**/\r\n    my.Device.prototype.getViewportPosition = function(e) {\r\n        var d, get, ox, oy, doc;\r\n        if (e) {\r\n            d = my.device;\r\n            get = my.xtGet;\r\n            ox = d.offsetX;\r\n            oy = d.offsetY;\r\n            d.offsetX = get(e.pageX, e.target.offsetX, 0);\r\n            d.offsetY = get(e.pageY, e.target.offsetY, 0);\r\n            return (ox != d.offsetX || oy != d.offsetY) ? true : false;\r\n        }\r\n        doc = document.documentElement;\r\n        ox = this.offsetX;\r\n        oy = this.offsetY;\r\n        this.offsetX = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\r\n        this.offsetY = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\r\n        return (ox != this.offsetX || oy != this.offsetY) ? true : false;\r\n    };\r\n    /**\r\nFeature detection - hook function\r\n@method getStacksDeviceData\r\n@private\r\n**/\r\n    my.Device.prototype.getStacksDeviceData = function() {};\r\n    /**\r\nFeature detection - hook function\r\n@method getImagesDeviceData\r\n@private\r\n**/\r\n    my.Device.prototype.getImagesDeviceData = function() {};\r\n    /**\r\nDetermine if viewport is in landscape mode - if width and height arte equal, landscape mode is assumend\r\n@method isLandscape\r\n@private\r\n**/\r\n    my.Device.prototype.isLandscape = function() {\r\n        return (this.width < this.height) ? false : true;\r\n    };\r\n    /**\r\nDetermine if viewport is in portrait mode - if width and height arte equal, landscape mode is assumend\r\n@method isPortrait\r\n@private\r\n**/\r\n    my.Device.prototype.isPortrait = function() {\r\n        return (this.width < this.height) ? true : false;\r\n    };\r\n\r\n    /**\r\n# Position\r\n\r\n## Instantiation\r\n\r\n* This object should never be instantiated by users\r\n\r\n## Purpose\r\n\r\n* supplies objects with basic positional and scaling attributes, and methods for manipulating them\r\n* start coordinates are relative to the top left corner of the object's Cell\r\n* handle coordinates are relative to the object's start coordinate\r\n\r\nCertain Scrawl extensions will add functionality to this object, for instance scrawlAnimation adds delta attributes which can be used to automatically update the position of a Scrawl entity.\r\n@class Position\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Position = function(items) {\r\n        var so = my.safeObject,\r\n            d = my.work.d[this.type],\r\n            get = my.xtGet,\r\n            vec = my.makeVector;\r\n        my.Base.call(this, items);\r\n        items = so(items);\r\n        /**\r\nThe coordinate Vector representing the object's rotation/flip point\r\n\r\nSubScrawl, and all Objects that prototype chain to Subscrawl, supports the following 'virtual' attributes for this attribute:\r\n\r\n* __startX__ - (Number) the x coordinate of the object's rotation/flip point, in pixels, from the left side of the object's cell\r\n* __startY__ - (Number) the y coordinate of the object's rotation/flip point, in pixels, from the top side of the object's cell\r\n\r\n@property start\r\n@type Vector\r\n**/\r\n        var temp = so(items.start);\r\n        this.start = vec({\r\n            x: get(items.startX, temp.x, 0),\r\n            y: get(items.startY, temp.y, 0),\r\n            name: this.type + '.' + this.name + '.start'\r\n        });\r\n        this.currentStart = vec({\r\n            name: this.type + '.' + this.name + '.current.start'\r\n        });\r\n        this.currentStart.flag = false;\r\n        /**\r\nAn Object (in fact, a Vector) containing offset instructions from the object's rotation/flip point, where drawing commences. \r\n\r\nSubScrawl, and all Objects that prototype chain to Subscrawl, supports the following 'virtual' attributes for this attribute:\r\n\r\n* __handleX__ - (Mixed) the horizontal offset, either as a Number (in pixels), or a percentage String of the object's width, or the String literal 'left', 'right' or 'center'\r\n* __handleY__ - (Mixed) the vertical offset, either as a Number (in pixels), or a percentage String of the object's height, or the String literal 'top', 'bottom' or 'center'\r\n\r\nWhere values are Numbers, handle can be treated like any other Vector\r\n\r\n@property handle\r\n@type Object\r\n**/\r\n        temp = so(items.handle);\r\n        this.handle = vec({\r\n            x: get(items.handleX, temp.x, 0),\r\n            y: get(items.handleY, temp.y, 0),\r\n            name: this.type + '.' + this.name + '.handle'\r\n        });\r\n        this.currentHandle = vec({\r\n            name: this.type + '.' + this.name + '.current.handle'\r\n        });\r\n        this.currentHandle.flag = false;\r\n        /**\r\nAn object with the following attributes:\r\n\r\n* __left__ - x coordinate of top-left corner of the enclosing box relative to the current cell's top-left corner\r\n* __top__ - y coordinate of top-left corner of the enclosing box relative to the current cell's top-left corner\r\n* __bottom__ - x coordinate of bottom-right corner of the enclosing box relative to the current cell's top-left corner\r\n* __left__ - y coordinate of bottom-right corner of the enclosing box relative to the current cell's top-left corner\r\n@property maxDimensions\r\n@type Object\r\n@default null\r\n@private\r\n**/\r\n        this.maxDimensions = {\r\n            flag: true,\r\n            left: 0,\r\n            right: 0,\r\n            top: 0,\r\n            bottom: 0\r\n        };\r\n        /**\r\nThe ENTITYNAME or POINTNAME of a entity or Point object to be used for setting this object's start point\r\n@property pivot\r\n@type String\r\n@default null\r\n**/\r\n        this.pivot = get(items.pivot, d.pivot);\r\n        /**\r\nThe object's scale value - larger values increase the object's size\r\n@property scale\r\n@type Number\r\n@default 1\r\n**/\r\n        this.scale = get(items.scale, d.scale);\r\n        /**\r\nCurrent rotation of the entity, cell or element (in degrees)\r\n@property roll\r\n@type Number\r\n@default 0\r\n**/\r\n        this.roll = get(items.roll, d.roll);\r\n        /**\r\nReflection flag; set to true to flip entity, cell or element along the Y axis\r\n@property flipReverse\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.flipReverse = get(items.flipReverse, d.flipReverse);\r\n        /**\r\nReflection flag; set to true to flip entity, cell or element along the X axis\r\n@property flipUpend\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.flipUpend = get(items.flipUpend, d.flipUpend);\r\n        /**\r\nPositioning flag; set to true to ignore path/pivot/mouse changes along the X axis\r\n@property lockX\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.lockX = get(items.lockX, d.lockX);\r\n        /**\r\nPositioning flag; set to true to ignore path/pivot/mouse changes along the Y axis\r\n@property lockY\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.lockY = get(items.lockY, d.lockY);\r\n        /**\r\nIndex of mouse vector to use when pivot === 'mouse'\r\n\r\nThe Pad.mice object can hold details of multiple touch events - when an entity is assigned to a 'mouse', it needs to know which of those mouse trackers to use. Default: mouse (for the mouse cursor vector)\r\n@property mouseIndex\r\n@type String\r\n@default 'mouse'\r\n**/\r\n        this.mouseIndex = get(items.mouseIndex, 'mouse');\r\n        this.animationPositionInit(items);\r\n        this.pathPositionInit(items);\r\n        return this;\r\n    };\r\n    my.Position.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Position'\r\n@final\r\n**/\r\n    my.Position.prototype.type = 'Position';\r\n    my.Position.prototype.classname = 'objectnames';\r\n    my.work.d.Position = {\r\n        start: {\r\n            x: 0,\r\n            y: 0\r\n        },\r\n        currentStart: {\r\n            x: 0,\r\n            y: 0\r\n        },\r\n        handle: {\r\n            x: 0,\r\n            y: 0\r\n        },\r\n        currentHandle: {\r\n            x: 0,\r\n            y: 0\r\n        },\r\n        maxDimensions: {\r\n            flag: true,\r\n            left: 0,\r\n            right: 0,\r\n            top: 0,\r\n            bottom: 0\r\n        },\r\n        pivot: null,\r\n        scale: 1,\r\n        flipReverse: false,\r\n        flipUpend: false,\r\n        lockX: false,\r\n        lockY: false,\r\n        roll: 0,\r\n        mouseIndex: 'mouse',\r\n        /**\r\nEntity, cell or element width (in pixels)\r\n@property width\r\n@type Number\r\n@default 0\r\n**/\r\n        width: 0,\r\n        /**\r\nEntity, cell or element height (in pixels)\r\n@property height\r\n@type Number\r\n@default 0\r\n**/\r\n        height: 0\r\n        /**\r\n(Added by the path extension)\r\nThe ENTITYNAME of a Shape entity whose path is used to calculate this object's start point\r\n@property path\r\n@type String\r\n@default ''\r\n**/\r\n        /**\r\n(Added by the path extension)\r\nA value between 0 and 1 to represent the distance along a Path object's path, where 0 is the path start and 1 is the path end\r\n@property pathPlace\r\n@type Number\r\n@default 0\r\n**/\r\n        /**\r\n(Added by the path extension)\r\nA change value which can be applied to the object's pathPlace attribute\r\n@property deltaPathPlace\r\n@type Number\r\n@default 0\r\n**/\r\n        /**\r\n(Added by the path extension)\r\nA flag to determine whether the object will calculate its position along a Shape path in a regular (true), or simple (false), manner\r\n@property pathSpeedConstant\r\n@type Boolean\r\n@default true\r\n**/\r\n    };\r\n    my.mergeInto(my.work.d.Position, my.work.d.Base);\r\n    /**\r\nPosition constructor hook function - modified by animation extension\r\n@method animationPositionInit\r\n@private\r\n**/\r\n    my.Position.prototype.animationPositionInit = function(items) {};\r\n    /**\r\nPosition constructor hook function - modified by path extension\r\n@method pathPositionInit\r\n@private\r\n**/\r\n    my.Position.prototype.pathPositionInit = function(items) {};\r\n    /**\r\nAugments Base.get(), to allow users to get values for start, startX, startY, handle, handleX, handleY\r\n\r\nFor 'start' and 'handle', returns a copy of the Vector\r\n@method get\r\n@param {String} get Attribute key\r\n@return Attribute value\r\n**/\r\n    my.Position.prototype.get = function(item) {\r\n        var stat_positionGet = ['startX', 'startY', 'handleX', 'handleY'];\r\n        if (my.contains(stat_positionGet, item)) {\r\n            switch (item) {\r\n            case 'startX':\r\n                return this.start.x;\r\n            case 'startY':\r\n                return this.start.y;\r\n            case 'handleX':\r\n                return this.handle.x;\r\n            case 'handleY':\r\n                return this.handle.y;\r\n            }\r\n        }\r\n        return (this.animationPositionGet(item) || my.Base.prototype.get.call(this, item));\r\n    };\r\n    /**\r\nGet the current start x coordinate\r\n@method getX\r\n@return Attribute value\r\n**/\r\n    my.Position.prototype.getX = function() {\r\n        return this.currentStart.x;\r\n    };\r\n    /**\r\nGet the current start y coordinate\r\n@method getY\r\n@return Attribute value\r\n**/\r\n    my.Position.prototype.getY = function() {\r\n        return this.currentStart.y;\r\n    };\r\n    /**\r\nPosition.get hook function - modified by animation extension\r\n@method animationPositionGet\r\n@private\r\n**/\r\n    my.Position.prototype.animationPositionGet = function(item) {\r\n        return false;\r\n    };\r\n    /**\r\nAugments Base.set(), to allow users to set the start and handle attributes using startX, startY, handleX, handleY\r\n@method set\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.set = function(items) {\r\n        var xto = my.xto;\r\n        items = my.safeObject(items);\r\n        my.Base.prototype.set.call(this, items);\r\n        if (xto(items.start, items.startX, items.startY)) {\r\n            this.setStart(items);\r\n        }\r\n        if (xto(items.handle, items.handleX, items.handleY)) {\r\n            this.setHandle(items);\r\n        }\r\n        if (xto(items.flipUpend, items.flipReverse, items.scale, items.width, items.height, items.roll)) {\r\n            this.maxDimensions.flag = true;\r\n            if (xto(items.scale, items.width, items.height)) {\r\n                this.currentHandle.flag = false;\r\n            }\r\n        }\r\n        if (my.xt(items.pivot)) {\r\n            this.currentPivotIndex = false;\r\n        }\r\n        this.animationPositionSet(items);\r\n        return this;\r\n    };\r\n    /**\r\nAugments Base.setStart(), to allow users to set the start attributes using start, startX, startY\r\n@method setStart\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setStart = function(items) {\r\n        var temp,\r\n            so = my.safeObject,\r\n            get = my.xtGet,\r\n            vec = my.makeVector,\r\n            isvec = my.isa_vector;\r\n        items = so(items);\r\n        if (!isvec(this.start)) {\r\n            this.start = vec(items.start || this.start);\r\n            this.start.name = this.type + '.' + this.name + '.start';\r\n        }\r\n        temp = so(items.start);\r\n        this.start.x = get(items.startX, temp.x, this.start.x);\r\n        this.start.y = get(items.startY, temp.y, this.start.y);\r\n        if (!isvec(this.currentStart)) {\r\n            this.currentStart = vec({\r\n                name: this.type + '.' + this.name + '.current.start'\r\n            });\r\n        }\r\n        this.currentStart.flag = false;\r\n        this.maxDimensions.flag = true;\r\n        return this;\r\n    };\r\n    /**\r\nAugments Base.setHandle(), to allow users to set the handle attributes using handle, handleX, handleY\r\n@method setHandle\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setHandle = function(items) {\r\n        var temp,\r\n            so = my.safeObject,\r\n            get = my.xtGet,\r\n            vec = my.makeVector,\r\n            isvec = my.isa_vector;\r\n        items = so(items);\r\n        if (!isvec(this.handle)) {\r\n            this.handle = vec(items.handle || this.handle);\r\n            this.handle.name = this.type + '.' + this.name + '.handle';\r\n        }\r\n        temp = so(items.handle);\r\n        this.handle.x = get(items.handleX, temp.x, this.handle.x);\r\n        this.handle.y = get(items.handleY, temp.y, this.handle.y);\r\n        if (!isvec(this.currentHandle)) {\r\n            this.currentHandle = vec({\r\n                name: this.type + '.' + this.name + '.current.handle'\r\n            });\r\n        }\r\n        this.currentHandle.flag = false;\r\n        this.maxDimensions.flag = true;\r\n        return this;\r\n    };\r\n    /**\r\nPosition.set hook function - modified by animation extension\r\n@method animationPositionSet\r\n@private\r\n**/\r\n    my.Position.prototype.animationPositionSet = function(items) {};\r\n    my.Position.prototype.updateStart = function(item) {};\r\n    my.Position.prototype.revertStart = function(item) {};\r\n    my.Position.prototype.reverse = function(item) {};\r\n    my.Position.prototype.setDeltaAttribute = function(items) {};\r\n\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values; only Number attributes can be amended using this function. This function also accepts startX, startY, handleX, handleY\r\n@method setDelta\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setDelta = function(items) {\r\n        var xto = my.xto;\r\n        items = my.safeObject(items);\r\n        if (xto(items.start, items.startX, items.startY)) {\r\n            this.setDeltaStart(items);\r\n        }\r\n        my.Position.prototype.pathPositionSetDelta.call(this, items);\r\n        if (xto(items.handle, items.handleX, items.handleY)) {\r\n            this.setDeltaHandle(items);\r\n        }\r\n        if (xto(items.scale, items.width, items.height, items.roll)) {\r\n            if (items.scale) {\r\n                this.setDeltaScale(items);\r\n            }\r\n            if (items.roll) {\r\n                this.setDeltaRoll(items);\r\n            }\r\n            if (items.width) {\r\n                this.setDeltaWidth(items);\r\n            }\r\n            if (items.height) {\r\n                this.setDeltaHeight(items);\r\n            }\r\n            this.maxDimensions.flag = true;\r\n            if (xto(items.scale, items.width, items.height)) {\r\n                this.currentHandle.flag = false;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values; This function accepts start, startX, startY\r\n@method setDeltaStart\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setDeltaStart = function(items) {\r\n        var temp,\r\n            x,\r\n            y,\r\n            so = my.safeObject,\r\n            get = my.xtGet,\r\n            perc = my.addPercentages;\r\n        items = so(items);\r\n        temp = so(items.start);\r\n        x = get(items.startX, temp.x, 0);\r\n        y = get(items.startY, temp.y, 0);\r\n        this.start.x = (this.start.x.toFixed) ? this.start.x + x : perc(this.start.x, x);\r\n        this.start.y = (this.start.y.toFixed) ? this.start.y + y : perc(this.start.y, y);\r\n        this.currentStart.flag = false;\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values. This function accepts handle, handleX, handleY\r\n@method setDeltaHandle\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setDeltaHandle = function(items) {\r\n        var temp,\r\n            x,\r\n            y,\r\n            so = my.safeObject,\r\n            get = my.xtGet,\r\n            perc = my.addPercentages;\r\n        items = so(items);\r\n        temp = so(items.handle);\r\n        x = get(items.handleX, temp.x, 0);\r\n        y = get(items.handleY, temp.y, 0);\r\n        this.handle.x = (this.handle.x.toFixed) ? this.handle.x + x : perc(this.handle.x, x);\r\n        this.handle.y = (this.handle.y.toFixed) ? this.handle.y + y : perc(this.handle.y, y);\r\n        this.currentHandle.flag = false;\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values. This function accepts scale\r\n@method setDeltaScale\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setDeltaScale = function(items) {\r\n        items = my.safeObject(items);\r\n        this.scale += items.scale || 0;\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values. This function accepts roll\r\n@method setDeltaRoll\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setDeltaRoll = function(items) {\r\n        items = my.safeObject(items);\r\n        this.roll += items.roll || 0;\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values. This function accepts width\r\n@method setDeltaWidth\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setDeltaWidth = function(items) {\r\n        var w;\r\n        items = my.safeObject(items);\r\n        w = items.width || 0;\r\n        this.width = (this.width.toFixed) ? this.width + w : my.addPercentages(this.width, w);\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values. This function accepts height\r\n@method setDeltaHeight\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setDeltaHeight = function(items) {\r\n        var h;\r\n        items = my.safeObject(items);\r\n        h = items.height || 0;\r\n        this.height = (this.height.toFixed) ? this.height + h : my.addPercentages(this.height, h);\r\n        return this;\r\n    };\r\n    /**\r\nPosition.setDelta hook function - modified by path extension\r\n@method pathPositionSetDelta\r\n@private\r\n**/\r\n    my.Position.prototype.pathPositionSetDelta = function(items) {};\r\n    /**\r\nAugments Base.clone(), to allow users to set the start and handle attributes using startX, startY, handleX, handleY\r\n\r\n@method clone\r\n@param {Object} items Object consisting of key:value attributes, used to update the clone's attributes with new values\r\n@return Cloned object\r\n@chainable\r\n**/\r\n    my.Position.prototype.clone = function(items) {\r\n        var temp,\r\n            clone,\r\n            so = my.safeObject,\r\n            vec = my.makeVector,\r\n            get = my.xtGet;\r\n        items = so(items);\r\n        clone = my.Base.prototype.clone.call(this, items);\r\n        temp = so(items.start);\r\n        clone.start = vec({\r\n            x: get(items.startX, temp.x, clone.start.x),\r\n            y: get(items.startY, temp.y, clone.start.y),\r\n            name: clone.type + '.' + clone.name + '.start'\r\n        });\r\n        temp = so(items.handle);\r\n        clone.handle = vec({\r\n            x: get(items.handleX, temp.x, clone.handle.x),\r\n            y: get(items.handleY, temp.y, clone.handle.y),\r\n            name: clone.type + '.' + clone.name + '.handle'\r\n        });\r\n        clone = this.animationPositionClone(clone, items);\r\n        return clone;\r\n    };\r\n    /**\r\nPosition.setDelta hook function - modified by animation extension\r\n@method animationPositionClone\r\n@private\r\n**/\r\n    my.Position.prototype.animationPositionClone = function(a, items) {\r\n        return a;\r\n    };\r\n    /**\r\nupdateCurrentHandle helper object\r\n\r\n@method getReferenceDimensions\r\n@param {Object} reference object - Stack, Pad, Element, Cell or Entity (Block, Wheel, Phrase, Picture, Path, Shape or Frame)\r\n@return Object with attributes {w: width, h: height, c: centered}\r\n@private\r\n**/\r\n    my.Position.prototype.getReferenceDimensions = {\r\n        Pad: function(reference) {\r\n            return {\r\n                w: reference.localWidth,\r\n                h: reference.localHeight,\r\n                c: false\r\n            };\r\n        },\r\n        Cell: function(reference) {\r\n            return {\r\n                w: reference.actualWidth,\r\n                h: reference.actualHeight,\r\n                c: false\r\n            };\r\n        },\r\n        Block: function(reference) {\r\n            var scale = reference.scale;\r\n            return {\r\n                w: reference.localWidth / scale,\r\n                h: reference.localHeight / scale,\r\n                c: false\r\n            };\r\n        },\r\n        Wheel: function(reference) {\r\n            return {\r\n                w: reference.width,\r\n                h: reference.height,\r\n                c: true\r\n            };\r\n        },\r\n        Phrase: function(reference) {\r\n            return {\r\n                w: reference.width,\r\n                h: reference.height,\r\n                c: false\r\n            };\r\n        },\r\n        Picture: function(reference) {\r\n            var scale = reference.scale,\r\n                data = reference.pasteData;\r\n            return {\r\n                w: data.w / scale,\r\n                h: data.h / scale,\r\n                c: false\r\n            };\r\n        },\r\n        Path: function(reference) {\r\n            return {\r\n                w: reference.width,\r\n                h: reference.height,\r\n                c: (reference.isLine) ? false : true\r\n            };\r\n        },\r\n        Shape: function(reference) {\r\n            return {\r\n                w: reference.width,\r\n                h: reference.height,\r\n                c: (reference.isLine) ? false : true\r\n            };\r\n        },\r\n        Frame: function(reference) {\r\n            return {\r\n                w: reference.width,\r\n                h: reference.height,\r\n                c: false\r\n            };\r\n        }\r\n    };\r\n    /**\r\nConvert handle percentage values to numerical values, stored in currentHandle\r\n\r\n@method updateCurrentHandle\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Position.prototype.updateCurrentHandle = function() {\r\n        var dims, cont, conv, handle, test, testx, testy, currentHandle, scale;\r\n        if (!this.currentHandle.flag) {\r\n            dims = this.getReferenceDimensions[this.type](this);\r\n            cont = my.contains;\r\n            conv = this.numberConvert;\r\n            handle = this.handle;\r\n            test = ['top', 'bottom', 'left', 'right', 'center'];\r\n            testx = handle.x.substring;\r\n            testy = handle.y.substring;\r\n            currentHandle = this.currentHandle;\r\n            scale = this.scale || 1;\r\n            currentHandle.x = (testx) ? conv(handle.x, dims.w) : handle.x;\r\n            currentHandle.y = (testy) ? conv(handle.y, dims.h) : handle.y;\r\n            if (dims.c) {\r\n                if (cont(test, handle.x)) {\r\n                    currentHandle.x -= (dims.w / 2);\r\n                }\r\n                if (cont(test, handle.y)) {\r\n                    currentHandle.y -= (dims.h / 2);\r\n                }\r\n            }\r\n            if (testx) {\r\n                currentHandle.x *= scale;\r\n            }\r\n            if (testy) {\r\n                currentHandle.y *= scale;\r\n            }\r\n            if (isNaN(currentHandle.x)) {\r\n                currentHandle.x = 0;\r\n            }\r\n            if (isNaN(currentHandle.y)) {\r\n                currentHandle.y = 0;\r\n            }\r\n            currentHandle.reverse();\r\n            currentHandle.flag = true;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nConvert start percentage values to numerical values, stored in currentStart\r\n\r\n@method updateCurrentStart\r\n@param {Object} reference object - Stack, Pad, Element, Cell or Entity (Block, Wheel, Phrase, Picture, Path, Shape or Frame)\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Position.prototype.updateCurrentStart = function(reference) {\r\n        var dims, conv, start, currentStart;\r\n        if (!this.currentStart.flag && reference && reference.type) {\r\n            currentStart = this.currentStart;\r\n            dims = this.getReferenceDimensions[reference.type](reference);\r\n            conv = this.numberConvert;\r\n            start = this.start;\r\n            currentStart.x = (start.x.substring) ? conv(start.x, dims.w) : start.x;\r\n            currentStart.y = (start.y.substring) ? conv(start.y, dims.h) : start.y;\r\n            if (isNaN(currentStart.x) || isNaN(currentStart.y)) {\r\n                currentStart.x = 0;\r\n                currentStart.y = 0;\r\n                return this;\r\n            }\r\n            currentStart.flag = true;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - set this entity, cell or element start values to its pivot entity/point start value, or to the current mouse coordinates\r\n\r\nTakes into account lock flag settings\r\n@method setStampUsingPivot\r\n@param {String} [cell] CELLNAME String\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Position.prototype.setStampUsingPivot = function(cell, mouse) {\r\n        var p, e,\r\n            pivot,\r\n            action = this.setStampUsingPivotCalculations,\r\n            point,\r\n            entity,\r\n            so,\r\n            el;\r\n        if (!this.currentPivotIndex) {\r\n            pivot = this.pivot;\r\n            point = my.point;\r\n            entity = my.entity;\r\n            so = my.safeObject;\r\n            if (pivot === 'mouse') {\r\n                p = 'mouse';\r\n                e = false;\r\n            }\r\n            else if (so(point)[pivot]) {\r\n                p = 'point';\r\n                e = point[pivot];\r\n            }\r\n            else if (entity[pivot]) {\r\n                p = 'entity';\r\n                e = entity[pivot];\r\n            }\r\n            else {\r\n                el = my.xtGet(so(my.stack)[pivot], so(my.pad)[pivot], so(my.element)[pivot], false);\r\n                if (el) {\r\n                    p = 'stack';\r\n                    e = el;\r\n                }\r\n            }\r\n            if (p) {\r\n                this.currentPivot = e;\r\n                this.currentPivotIndex = p;\r\n            }\r\n        }\r\n        if (this.currentPivotIndex) {\r\n            action[this.currentPivotIndex](this, this.currentPivot, cell, mouse);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nsetStampUsingPivot helper object\r\n**/\r\n    my.Position.prototype.setStampUsingPivotCalculations = {\r\n        point: function(obj, pivot) {\r\n            var entity = my.entity[pivot.entity],\r\n                current = obj.currentStart,\r\n                vector = pivot.getCurrentCoordinates().rotate(entity.roll).vectorAdd(entity.currentStart);\r\n            current.x = (!obj.lockX) ? vector.x : current.x;\r\n            current.y = (!obj.lockY) ? vector.y : current.y;\r\n        },\r\n        entity: function(obj, pivot) {\r\n            var vector = (pivot.type === 'Particle') ? pivot.get('place') : pivot.currentStart,\r\n                current = obj.currentStart;\r\n            current.x = (!obj.lockX) ? vector.x : current.x;\r\n            current.y = (!obj.lockY) ? vector.y : current.y;\r\n        },\r\n        mouse: function(obj, ignore, cell, mouse) {\r\n            var pad,\r\n                current = obj.currentStart;\r\n            if (!my.xt(mouse)) {\r\n                cell = my.cell[cell];\r\n                pad = my.pad[cell.pad];\r\n                mouse = pad.mice[obj.mouseIndex];\r\n            }\r\n            mouse = obj.correctCoordinates(mouse, cell);\r\n            if (mouse) {\r\n                if (obj.oldX == null && obj.oldY == null) { //jshint ignore:line\r\n                    obj.oldX = current.x;\r\n                    obj.oldY = current.y;\r\n                }\r\n                current.x = (!obj.lockX) ? current.x + mouse.x - obj.oldX : current.x;\r\n                current.y = (!obj.lockY) ? current.y + mouse.y - obj.oldY : current.y;\r\n                obj.oldX = mouse.x;\r\n                obj.oldY = mouse.y;\r\n            }\r\n        },\r\n        stack: function() {}\r\n    };\r\n    /**\r\nStamp helper function - correct mouse coordinates if pad dimensions not equal to base cell dimensions\r\n\r\n@method correctCoordinates\r\n@param {Object} coords An object containing x and y attributes\r\n@param {String} [cell] CELLNAME String\r\n@return Amended coordinate object\r\n**/\r\n    my.Position.prototype.correctCoordinates = function(coords, cell) {\r\n        var vector,\r\n            pad,\r\n            w, h,\r\n            get = my.xtGet;\r\n        coords = my.safeObject(coords);\r\n        vector = my.work.v.set(coords);\r\n        if (scrawl.xta(coords.x, coords.y)) {\r\n            cell = (my.cell[cell]) ? my.cell[cell] : my.cell[my.pad[my.work.currentPad].base];\r\n            pad = my.pad[cell.pad];\r\n            w = get(pad.localWidth, pad.width, 300);\r\n            h = get(pad.localHeight, pad.height, 150);\r\n            if (w !== cell.actualWidth) {\r\n                vector.x /= (w / cell.actualWidth);\r\n            }\r\n            if (h !== cell.actualHeight) {\r\n                vector.y /= (h / cell.actualHeight);\r\n            }\r\n            return vector;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n# PageElement\r\n\r\n## Instantiation\r\n\r\n* This object should never be instantiated by users\r\n\r\n## Purpose\r\n\r\n* supplies DOM elements with basic dimensional, positional and scaling attributes, and methods for manipulating them\r\n\r\nThe core implementation of this object is a stub that supplies Pad objects with basic mouse position support. The stacks extension will substantially modify it to provide CSS3 3d positioning and animation functionality for Stack, Element and Pad objects. \r\n\r\n@class PageElement\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.PageElement = function(items) {\r\n        var get = my.xtGet,\r\n            d = my.work.d[this.type];\r\n        items = my.safeObject(items);\r\n        my.Base.call(this, items);\r\n        /**\r\nDOM element width\r\n@property width\r\n@type Number\r\n@default 300\r\n**/\r\n        this.width = get(items.width, d.width);\r\n        /**\r\nDOM element height\r\n@property height\r\n@type Number\r\n@default 150\r\n**/\r\n        this.height = get(items.height, d.height);\r\n        /**\r\nThe object's scale value - larger values increase the object's size\r\n@property scale\r\n@type Number\r\n@default 1\r\n**/\r\n        this.scale = get(items.scale, d.scale);\r\n        this.propogateTouch = get(items.propogateTouch, d.propogateTouch);\r\n        this.setLocalDimensions();\r\n        this.stacksPageElementConstructor(items);\r\n        /**\r\nThe mice attribute is an object containing supplemented vectors which hold real-time information about the current coordinates of the mouse pointer and any other pointer or touch instances occurring over the element\r\n\r\nmice.mouse - always refers to the mouse pointer\r\nmice.ui0, mice.ui1 etc - refers to pointer and touch events\r\n\r\n@property mice\r\n@type Object\r\n@default {}\r\n**/\r\n        this.mice = {\r\n            mouse: my.makeVector()\r\n        };\r\n        this.mice.mouse.id = 'mouse';\r\n        this.mice.mouse.active = false;\r\n        this.mice.mouse.name = this.type + '.' + this.name + '.ui.mouse';\r\n        return this;\r\n    };\r\n    my.PageElement.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'PageElement'\r\n@final\r\n**/\r\n    my.PageElement.prototype.type = 'PageElement';\r\n    my.PageElement.prototype.classname = 'objectnames';\r\n    my.work.d.PageElement = {\r\n        width: 300,\r\n        height: 150,\r\n        /**\r\nDOM element localWidth\r\n@property localWidth\r\n@type Number\r\n@default 300\r\n**/\r\n        localWidth: 300,\r\n        /**\r\nDOM element localHeight\r\n@property localHeight\r\n@type Number\r\n@default 150\r\n**/\r\n        localHeight: 150,\r\n        /**\r\nDOM element's current horizontal offset from the top of the web page\r\n@property displayOffsetX\r\n@type Number\r\n@default 0\r\n**/\r\n        displayOffsetX: 0,\r\n        /**\r\nDOM element's current vertical offset from the left side of the web page\r\n@property displayOffsetY\r\n@type Number\r\n@default 0\r\n**/\r\n        displayOffsetY: 0,\r\n        scale: 1,\r\n        mice: {},\r\n        /**\r\nSet the interactive attribute to true to track mouse/pointer/touch events on the element. By default Pad and Stack objects set their element's interactivity to true, while Element objects set it to false \r\n@property interactive\r\n@type Boolean\r\n@default true (false for Element objects)\r\n**/\r\n        interactive: true,\r\n        /**\r\nBoolean - if set to trye, a touchmove event will be propogated to other stacks, pads and elements; default false\r\n@property propogateTouch\r\n@type Boolean\r\n@default false\r\n**/\r\n        propogateTouch: false,\r\n        /**\r\nElement CSS position styling attribute\r\n@property position\r\n@type String\r\n@default 'static'\r\n**/\r\n        position: 'static'\r\n    };\r\n    my.mergeInto(my.work.d.PageElement, my.work.d.Base);\r\n    /**\r\nPageElement constructor hook function - modified by stacks extension\r\n@method stacksPageElementConstructor\r\n@private\r\n**/\r\n    my.PageElement.prototype.stacksPageElementConstructor = function(items) {};\r\n    /**\r\nAugments Base.get() to retrieve DOM element width and height values\r\n\r\n(The stack extension replaces this core function rather than augmenting it via a hook function)\r\n\r\n@method get\r\n@param {String} get Attribute key\r\n@return Attribute value\r\n**/\r\n    my.PageElement.prototype.get = function(item) {\r\n        var element = this.getElement(),\r\n            stat_pageElementGet = ['width', 'height', 'position'],\r\n            get = my.xtGet,\r\n            d = my.work.d[this.type];\r\n        if (my.contains(stat_pageElementGet, item)) {\r\n            switch (item) {\r\n            case 'width':\r\n                return get(this.localWidth, parseFloat(element.width), d.width);\r\n            case 'height':\r\n                return get(this.localHeight, parseFloat(element.height), d.height);\r\n            case 'position':\r\n                return get(this.position, element.style.position);\r\n            }\r\n        }\r\n        return my.Base.prototype.get.call(this, item);\r\n    };\r\n    /**\r\nAugments Base.set() to allow the setting of DOM element dimension values\r\n\r\n(The stack extension replaces this core function rather than augmenting it via a hook function)\r\n\r\n@method set\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.PageElement.prototype.set = function(items) {\r\n        var xt = my.xt,\r\n            xto = my.xto;\r\n        items = my.safeObject(items);\r\n        my.Base.prototype.set.call(this, items);\r\n        if (xto(items.width, items.height, items.scale)) {\r\n            this.setLocalDimensions();\r\n            this.setDimensions();\r\n            this.setDisplayOffsets();\r\n        }\r\n        if (xt(items.position)) {\r\n            this.position = items.position;\r\n        }\r\n        if (xt(items.pivot)) {\r\n            this.pivot = items.pivot;\r\n            if (!this.pivot) {\r\n                delete this.oldX;\r\n                delete this.oldY;\r\n            }\r\n        }\r\n        if (xt(items.mouse)) {\r\n            this.initMouse(items.mouse);\r\n        }\r\n        if (xto(items.title, items.comment)) {\r\n            this.setAccessibility(items);\r\n        }\r\n        if (xt(items.interactive)) {\r\n            this.interactive = items.interactive;\r\n            this.removeMouseMove();\r\n            if (this.interactive) {\r\n                this.addMouseMove();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nHandles the setting of DOM element title and data-comment attributes\r\n@method setAccessibility\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.PageElement.prototype.setAccessibility = function(items) {\r\n        var element,\r\n            xt = my.xt;\r\n        items = my.safeObject(items);\r\n        element = this.getElement();\r\n        if (xt(items.title)) {\r\n            this.title = items.title;\r\n            element.title = this.title;\r\n        }\r\n        if (xt(items.comment)) {\r\n            this.comment = items.comment;\r\n            element.setAttribute('data-comment', this.comment);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nCalculate the DOM element's current display offset values\r\n@method setDisplayOffsets\r\n@return This\r\n@chainable\r\n**/\r\n    my.PageElement.prototype.setDisplayOffsets = function() {\r\n        var element = this.getElement(),\r\n            offsetX = 0,\r\n            offsetY = 0;\r\n        if (element.offsetParent) {\r\n            do {\r\n                offsetX += element.offsetLeft;\r\n                offsetY += element.offsetTop;\r\n                element = element.offsetParent;\r\n            } while (element.offsetParent);\r\n        }\r\n        this.displayOffsetX = offsetX;\r\n        this.displayOffsetY = offsetY;\r\n        return this;\r\n    };\r\n    /**\r\nScale DOM element dimensions (width, height)\r\n@method scaleDimensions\r\n@param {Number} item Scale value\r\n@return This\r\n@chainable\r\n**/\r\n    my.PageElement.prototype.scaleDimensions = function(item) {\r\n        if (item.toFixed) {\r\n            this.scale = item;\r\n            this.setDimensions();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nHelper function - set local dimensions (width, height)\r\n@method setLocalDimensions\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.PageElement.prototype.setLocalDimensions = function() {\r\n        var scale = this.scale;\r\n        this.localWidth = this.width * scale;\r\n        this.localHeight = this.height * scale;\r\n        return this;\r\n    };\r\n    /**\r\nHelper function - set DOM element dimensions (width, height)\r\n@method setDimensions\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.PageElement.prototype.setDimensions = function() {\r\n        var element = this.getElement();\r\n        element.style.width = this.localWidth + 'px';\r\n        element.style.height = this.localHeight + 'px';\r\n        return this;\r\n    };\r\n    /**\r\nRetrieve details of the Mouse cursor position in relation to the DOM element's top left hand corner. Most useful for determining mouse cursor position over Stack and Pad (visible &lt;canvas&gt;) elements.\r\n\r\nThis function is also used to retrieve details of touch positions.\r\n\r\n_Note: if changes are made elsewhere to the web page (DOM) after the page loads, the function .getDisplayOffsets() will need to be called to recalculate the element's position within the page - failure to do so will lead to this function returning incorrect data. getDisplayOffsets() does not need to be called during/after page scrolling._\r\n\r\nBy default, the function returns a single Vector containing either the first touch position or the current mouse cursor position.\r\n\r\nThe returned object is a Vector containing the mouse cursor's current x and y coordinates in relation to the DOM element's top left corner, together with the following additional attributes:\r\n\r\n* __active__ - set to true if mouse is hovering over the element; false otherwise\r\n* __id__ - event vector id (-1: mouse; 0+ touch or pointer)\r\n* __order__ - event order (0: mouse; 1+ touch or pointer)\r\n\r\nIf an argument is supplied, then all currently existing mouse/touch vectors are returned as an array, with index 0 representing the mouse pointer, index 1 representing the first touch coordinate and additional indexes representing additional touch coordinates \r\n@method getMouse\r\n@param {Boolean} item - true to return the array; false (default) to return either first touch or mouse Vector\r\n@return Vector, or an array of Vectors containing localized coordinates, with additional attributes; if mouse/touch has been disabled for the DOM element, returns false\r\n**/\r\n    my.PageElement.prototype.getMouse = function(item) {\r\n        var id, i, iz,\r\n            r = [];\r\n        if (my.xt(item)) {\r\n            //boolean true returns the element's mice object\r\n            if (my.xt(item) && my.isa_bool(item) && item) {\r\n                return this.mice;\r\n            }\r\n            //an event object returns an array of relevant vectors\r\n            else if (my.isa_event(item)) {\r\n                if (item.changedTouches) {\r\n                    for (i = 0, iz = item.changedTouches.length; i < iz; i++) {\r\n                        id = 't' + item.changedTouches[i].identifier;\r\n                        r.push(this.mice[id]);\r\n                    }\r\n                    return r;\r\n                }\r\n                else if (item.pointerType) {\r\n                    if (item.pointerType !== 'touch') {\r\n                        id = item.pointerType;\r\n                    }\r\n                    else {\r\n                        id = 'p' + item.pointerId;\r\n                    }\r\n                    return [this.mice[id]];\r\n                }\r\n                else {\r\n                    return [this.mice.mouse];\r\n                }\r\n            }\r\n            else {\r\n                return [this.mice.mouse];\r\n            }\r\n        }\r\n        else {\r\n            //item undefined returns a vector, default mouse vector\r\n            return my.xtGet(this.mice.t0, this.mice.p1, this.mice.pen, this.mice.mouse);\r\n        }\r\n    };\r\n    /**\r\n@method getMouseIdFromEvent\r\n@param {Boolean} item - DOM event object\r\n@return Array - mouse id strings associated with event(s)\r\n**/\r\n    my.PageElement.prototype.getMouseIdFromEvent = function(item) {\r\n        var id, i, iz,\r\n            r = [];\r\n        if (my.isa_event(item)) {\r\n            if (item.changedTouches) {\r\n                for (i = 0, iz = item.changedTouches.length; i < iz; i++) {\r\n                    id = 't' + item.changedTouches[i].identifier;\r\n                    r.push(id);\r\n                }\r\n            }\r\n            else if (item.pointerType) {\r\n                if (item.pointerType !== 'touch') {\r\n                    id = item.pointerType;\r\n                }\r\n                else {\r\n                    id = 'p' + item.pointerId;\r\n                }\r\n                r.push(id);\r\n            }\r\n            else {\r\n                r.push('mouse');\r\n            }\r\n        }\r\n        return r;\r\n    };\r\n    /**\r\nmousemove event listener function\r\n@method handleMouseMove\r\n@param {Object} e window.event\r\n@param {Boolean} active - set only by handleMouseIn, handleMouseOut\r\n@return This\r\n@private\r\n**/\r\n    my.PageElement.prototype.handleMouseMove = function(e) {\r\n        var mouseX, mouseY, maxX, maxY, wrapper, i, iz, j, jz, el, touches, newActive, id, altEl, altWrapper,\r\n            pad = my.pad,\r\n            stack = my.stack,\r\n            element = my.element,\r\n            parent, child, elid, localMouse, childStart,\r\n            al = my.work.activeListeners,\r\n            xt = my.xt,\r\n            vec = my.makeVector,\r\n            id2 = this.id;\r\n\r\n        if (xt(id2)) {\r\n            //invoked directly by DOM listeners\r\n            wrapper = pad[id2] || stack[id2] || element[id2] || false;\r\n            el = this;\r\n        }\r\n        else {\r\n            //invoked via scrawl function\r\n            wrapper = this;\r\n            el = this.getElement();\r\n        }\r\n\r\n        //touch event(s)\r\n        if (e.changedTouches) {\r\n            touches = e.changedTouches;\r\n\r\n            //process each change in turn\r\n            for (i = 0, iz = touches.length; i < iz; i++) {\r\n                id = 't' + touches[i].identifier;\r\n\r\n                //get rid of existing mouse vectors for a start - else things get very messy very quickly\r\n                if (e.type === 'touchstart') {\r\n                    for (j = 0, jz = al.length; j < jz; j++) {\r\n                        altWrapper = pad[al[j]] || stack[al[j]] || element[al[j]] || false;\r\n                        if (altWrapper) {\r\n                            delete altWrapper.mice[id];\r\n                        }\r\n                    }\r\n                }\r\n                //determine if a vector already exists for this touch\r\n                if (!xt(wrapper.mice[id])) {\r\n                    wrapper.mice[id] = vec({\r\n                        name: wrapper.type + '.' + wrapper.name + '.t.' + id\r\n                    });\r\n                    wrapper.mice[id].active = null;\r\n                    wrapper.mice[id].id = id;\r\n                }\r\n\r\n                //coordinates\r\n                if (touches[i].pageX || touches[i].pageY) {\r\n                    mouseX = touches[i].pageX;\r\n                    mouseY = touches[i].pageY;\r\n                }\r\n                else if (touches[i].clientX || touches[i].clientY) {\r\n                    mouseX = touches[i].clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n                    mouseY = touches[i].clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n                }\r\n                maxX = wrapper.displayOffsetX + wrapper.localWidth;\r\n                maxY = wrapper.displayOffsetY + wrapper.localHeight;\r\n\r\n                //touchmove doesn't propogate beyond its triggering element\r\n                if (this.propogateTouch && e.type === 'touchmove') {\r\n                    for (j = 0, jz = al.length; j < jz; j++) {\r\n                        if (this.name !== al[j]) {\r\n                            altEl = my.canvas[al[j]] || my.stk[al[j]] || my.elm[al[j]] || false;\r\n                            if (altEl) {\r\n                                my.triggerTouchFollow(e, altEl);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                //touchleave and touchenter are deprecated - have to spoof them via custom events\r\n                newActive = (mouseX >= wrapper.displayOffsetX && mouseX <= maxX && mouseY >= wrapper.displayOffsetY && mouseY <= maxY) ? true : false;\r\n                if (wrapper.mice[id].active !== newActive) {\r\n                    wrapper.mice[id].active = newActive;\r\n                    //only trigger enter/leave if we're currently in the middle of a move event\r\n                    if (e.type === 'touchmove' || e.type === 'touchfollow') {\r\n                        if (newActive) {\r\n                            //touchenter\r\n                            my.triggerTouchEnter(e, el);\r\n                        }\r\n                        else {\r\n                            //touchleave\r\n                            my.triggerTouchLeave(e, el);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                //finalize coordinates\r\n                wrapper.mice[id].x = (mouseX - wrapper.displayOffsetX);\r\n                wrapper.mice[id].y = (mouseY - wrapper.displayOffsetY);\r\n                if (wrapper.type === 'Pad') {\r\n                    wrapper.mice[id].x = Math.round(wrapper.mice[id].x / wrapper.scale || 1);\r\n                    wrapper.mice[id].y = Math.round(wrapper.mice[id].y / wrapper.scale || 1);\r\n                }\r\n                if (e.type === 'touchup' || e.type === 'touchleave') {\r\n                    wrapper.mice[id].x = null;\r\n                    wrapper.mice[id].y = null;\r\n                }\r\n            }\r\n        }\r\n        //pointer event\r\n        else if (e.pointerType) {\r\n            elid = e.target.id;\r\n            id = (e.pointerType !== 'touch') ? e.pointerType : 'p' + e.pointerId;\r\n\r\n            //determine if a vector already exists for this pointer\r\n            if (!xt(wrapper.mice[id])) {\r\n                wrapper.mice[id] = vec({\r\n                    name: wrapper.type + '.' + wrapper.name + '.p.' + id\r\n                });\r\n                wrapper.mice[id].active = null;\r\n                wrapper.mice[id].id = id;\r\n            }\r\n            localMouse = wrapper.mice[id];\r\n\r\n            if (elid === wrapper.name) {\r\n\r\n                //pointer coordinates\r\n                localMouse.active = false;\r\n                if (e.offsetX >= 0 && e.offsetX <= wrapper.localWidth && e.offsetY >= 0 && e.offsetY <= wrapper.localHeight) {\r\n                    localMouse.active = true;\r\n                }\r\n                localMouse.x = Math.round(e.offsetX);\r\n                localMouse.y = Math.round(e.offsetY);\r\n                if (wrapper.type === 'Pad') {\r\n                    localMouse.x = Math.round(localMouse.x / (wrapper.scale || 1));\r\n                    localMouse.y = Math.round(localMouse.y / (wrapper.scale || 1));\r\n                }\r\n            }\r\n            else {\r\n                // dealing with a stack - \r\n                // pointer events don't seem to propogate to stacks when the stack includes canvases or elements\r\n                if (elid) {\r\n                    parent = e.target.parentNode;\r\n                    if (parent.id === wrapper.name) {\r\n\r\n                        //pointer coordinates\r\n                        localMouse.x = Math.round(e.pageX - wrapper.displayOffsetX);\r\n                        localMouse.y = Math.round(e.pageY - wrapper.displayOffsetY);\r\n                        localMouse.active = false;\r\n                        if (localMouse.x >= 0 && localMouse.x <= wrapper.localWidth && localMouse.y >= 0 && localMouse.y <= wrapper.localHeight) {\r\n                            localMouse.active = true;\r\n                        }\r\n                        if (wrapper.type === 'Pad') {\r\n                            localMouse.x = Math.round(localMouse.x / (wrapper.scale || 1));\r\n                            localMouse.y = Math.round(localMouse.y / (wrapper.scale || 1));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //mouse/pen event\r\n        else {\r\n            if (!xt(wrapper.mice.mouse)) {\r\n                wrapper.mice.mouse = vec({\r\n                    name: wrapper.type + '.' + wrapper.name + '.ui.mouse'\r\n                });\r\n                wrapper.mice.mouse.active = null;\r\n                wrapper.mice.mouse.id = 'mouse';\r\n            }\r\n\r\n            if (e.pageX || e.pageY) {\r\n                mouseX = e.pageX;\r\n                mouseY = e.pageY;\r\n            }\r\n            else if (e.clientX || e.clientY) {\r\n                mouseX = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n                mouseY = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n            }\r\n            wrapper.mice.mouse.active = true;\r\n            if (e.type === 'mouseleave') {\r\n                wrapper.mice.mouse.active = false;\r\n            }\r\n            wrapper.mice.mouse.x = (mouseX - wrapper.displayOffsetX);\r\n            wrapper.mice.mouse.y = (mouseY - wrapper.displayOffsetY);\r\n            if (wrapper.type === 'Pad') {\r\n                wrapper.mice.mouse.x = Math.round(wrapper.mice.mouse.x / (wrapper.scale || 1));\r\n                wrapper.mice.mouse.y = Math.round(wrapper.mice.mouse.y / (wrapper.scale || 1));\r\n            }\r\n        }\r\n        wrapper.handleMouseTilt(e);\r\n        return wrapper;\r\n    };\r\n    my.PageElement.prototype.pickupEntity = function(items) {};\r\n    my.PageElement.prototype.dropEntity = function(items) {};\r\n    /**\r\nmouseTilt hook function - amended by scrawlStacks extension\r\n@method handleMouseTilt\r\n@param {Object} e window.event\r\n@return This\r\n@private\r\n**/\r\n    my.PageElement.prototype.handleMouseTilt = function(e) {};\r\n    /**\r\nAdds event listeners to the element\r\n@method addMouseMove\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.PageElement.prototype.addMouseMove = function() {\r\n        var el = this.getElement();\r\n        my.addListener(['up', 'down', 'move', 'enter', 'leave'], this.handleMouseMove, el);\r\n        if (this.propogateTouch) {\r\n            my.pushUnique(my.work.activeListeners, this.name);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRemove event listeners from the element\r\n@method removeMouseMove\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.PageElement.prototype.removeMouseMove = function() {\r\n        var el = this.getElement();\r\n        my.removeListener(['up', 'down', 'move', 'enter', 'leave'], this.handleMouseMove, el);\r\n        if (this.propogateTouch) {\r\n            my.removeItem(my.work.activeListeners, this.name);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n# Pad\r\n\r\n## Instantiation\r\n\r\n* created automatically for any &lt;canvas&gt; element found on the web page when it loads\r\n* also, scrawl.addCanvasToPage()\r\n* should not be instantiated directly by users\r\n\r\n## Purpose\r\n\r\n* controller (not wrapper) object for canvas elements included in the DOM\r\n* coordinates activity between visible canvas element and other (non-DOM) canvas elements that contribute to it\r\n\r\nBecause the Pad constructor calls the Cell constructor as part of the construction process (Cell objects __wrap__ &lt;canvas&gt; elements; Pad objects __control__ &lt;canvas&gt; elements), Cell attributes can be included in the Pad constructor object and picked up by the resultant Cell objects.\r\n\r\n## Access\r\n\r\n* scrawl.pad.PADNAME - for the Pad object\r\n* scrawl.canvas.PADNAME - for the Pad object's visible (display) &lt;canvas&gt; element\r\n* scrawl.context.PADNAME - for the visible (display) &ltcanvas&gt; element's 2d context engine (CanvasRenderingContext2D interface)\r\n* scrawl.cell[scrawl.pad.PADNAME.display] - for the Pad object's display cell\r\n* scrawl.cell[scrawl.pad.PADNAME.base] - for the Pad object's base cell\r\n\r\n@class Pad\r\n@constructor\r\n@extends PageElement\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Pad = function(items) {\r\n        var display,\r\n            base,\r\n            canvas,\r\n            get = my.xtGet,\r\n            d = my.work.d.Pad,\r\n            pu = my.pushUnique,\r\n            makeCell = my.makeCell;\r\n        items = my.safeObject(items);\r\n        if (my.isa_canvas(items.canvasElement)) {\r\n            items.width = get(items.width, items.canvasElement.width, d.width);\r\n            items.height = get(items.height, items.canvasElement.height, d.height);\r\n            items.name = get(items.name, items.canvasElement.id, items.canvasElement.name, 'Pad');\r\n            my.PageElement.call(this, items);\r\n            if (this.name.match(/___/)) {\r\n                this.name = this.name.replace(/___/g, '_');\r\n            }\r\n            items.canvasElement.id = this.name;\r\n            my.pad[this.name] = this;\r\n            pu(my.padnames, this.name);\r\n\r\n            /**\r\nArray of CELLNAME Strings associated with this Pad\r\n@property cells\r\n@type Array\r\n@default []\r\n**/\r\n            this.cells = [];\r\n            display = makeCell({\r\n                name: this.name,\r\n                pad: this.name,\r\n                canvas: items.canvasElement,\r\n                compiled: false,\r\n                shown: false,\r\n                width: this.localWidth,\r\n                height: this.localHeight\r\n            });\r\n            pu(this.cells, display.name);\r\n            /**\r\nPad's display (visible) &lt;canvas&gt; element - CELLNAME\r\n@property display\r\n@type String\r\n@default ''\r\n**/\r\n            this.display = display.name;\r\n            canvas = items.canvasElement.cloneNode(true);\r\n            canvas.setAttribute('id', this.name + '_base');\r\n            base = makeCell({\r\n                name: this.name + '_base',\r\n                pad: this.name,\r\n                canvas: canvas,\r\n                compileOrder: 9999,\r\n                shown: false,\r\n                width: '100%',\r\n                height: '100%'\r\n            });\r\n            pu(this.cells, base.name);\r\n            /**\r\nPad's base (hidden) &lt;canvas&gt; element - CELLNAME\r\n@property base\r\n@type String\r\n@default ''\r\n**/\r\n            this.base = base.name;\r\n            /**\r\nPad's currently active &lt;canvas&gt; element - CELLNAME\r\n\r\n//not convinced there's any point in keeping this attribute anymore - take it out?\r\n\r\n@property current\r\n@type String\r\n@default ''\r\n@deprecated\r\n**/\r\n            this.current = base.name;\r\n            this.setDisplayOffsets();\r\n            this.setAccessibility(items);\r\n            this.filtersPadInit();\r\n            this.padStacksConstructor(items);\r\n            this.interactive = get(items.interactive, true);\r\n            if (this.interactive) {\r\n                this.addMouseMove();\r\n            }\r\n            this.cellsCompileOrder = [].concat(this.cells);\r\n            this.cellsShowOrder = [].concat(this.cells);\r\n            this.resortCompile = true;\r\n            this.resortShow = true;\r\n            return this;\r\n        }\r\n        return false;\r\n    };\r\n    my.Pad.prototype = Object.create(my.PageElement.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Pad'\r\n@final\r\n**/\r\n    my.Pad.prototype.type = 'Pad';\r\n    my.Pad.prototype.classname = 'padnames';\r\n    my.work.d.Pad = {\r\n        cells: [],\r\n        display: '',\r\n        base: '',\r\n        current: ''\r\n    };\r\n    my.mergeInto(my.work.d.Pad, my.work.d.PageElement);\r\n    /**\r\nRetrieve Pad's visible &lt;canvas&gt; element object\r\n@method getElement\r\n@return DOM element object\r\n@private\r\n**/\r\n    my.Pad.prototype.getElement = function() {\r\n        return my.canvas[this.display];\r\n    };\r\n    /**\r\nPad constructor hook function - modified by filters extension\r\n@method filtersPadInit\r\n@private\r\n**/\r\n    my.Pad.prototype.filtersPadInit = function(items) {};\r\n    /**\r\nPad constructor hook function - modified by stacks extension\r\n@method stacksPadInit\r\n@private\r\n**/\r\n    my.Pad.prototype.stacksPadInit = function(items) {};\r\n    /**\r\nAugments PageElement.set(), to cascade scale, backgroundColor, globalAlpha and globalCompositeOperation changes to associated Cell objects\r\n                \r\n@method set\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.set = function(items) {\r\n        var base,\r\n            display,\r\n            cell = my.cell,\r\n            xto = my.xto;\r\n        my.PageElement.prototype.set.call(this, items);\r\n        items = my.safeObject(items);\r\n        display = cell[this.display];\r\n        base = cell[this.base];\r\n        if (xto(items.scale, items.width, items.height)) {\r\n            display.set({\r\n                pasteWidth: (items.width) ? this.localWidth : display.pasteWidth,\r\n                pasteHeight: (items.height) ? this.localHeight : display.pasteHeight,\r\n                scale: items.scale || display.scale\r\n            });\r\n            base.set({\r\n                scale: items.scale || base.scale\r\n            });\r\n        }\r\n        this.padStacksSet(items);\r\n        if (xto(items.start, items.startX, items.startY, items.handle, items.handleX, items.handleY, items.scale, items.width, items.height)) {\r\n            this.setDisplayOffsets();\r\n        }\r\n        if (xto(items.backgroundColor, items.globalAlpha, items.globalCompositeOperation)) {\r\n            base.set({\r\n                backgroundColor: items.backgroundColor || base.backgroundColor,\r\n                globalAlpha: items.globalAlpha || base.globalAlpha,\r\n                globalCompositeOperation: items.globalCompositeOperation || base.globalCompositeOperation\r\n            });\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nPad constructor hook function - amended by Stacks extension\r\n@method padStacksConstructor\r\n@return Nothing\r\n@private\r\n**/\r\n    my.Pad.prototype.padStacksConstructor = function() {};\r\n    /**\r\nPad set hook function - amended by Stacks extension\r\n@method padStacksSet\r\n@return Nothing\r\n@private\r\n**/\r\n    my.Pad.prototype.padStacksSet = function() {};\r\n    /**\r\nDisplay function sorting routine - cells are sorted according to their compileOrder attribute value, in ascending order\r\n@method sortCellsCompile\r\n@return Nothing\r\n@private\r\n**/\r\n    my.Pad.prototype.sortCellsCompile = function() {\r\n        if (this.resortCompile) {\r\n            this.resortCompile = false;\r\n            this.cellsCompileOrder = my.bucketSort('cell', 'compileOrder', this.cellsCompileOrder);\r\n        }\r\n    };\r\n    /**\r\nDisplay function sorting routine - cells are sorted according to their showOrder attribute value, in ascending order\r\n@method sortCellsShow\r\n@return Nothing\r\n@private\r\n**/\r\n    my.Pad.prototype.sortCellsShow = function() {\r\n        if (this.resortShow) {\r\n            this.resortShow = false;\r\n            this.cellsShowOrder = my.bucketSort('cell', 'showOrder', this.cellsShowOrder);\r\n        }\r\n    };\r\n    /**\r\nDisplay function - requests Cells to clear their &lt;canvas&gt; element\r\n\r\nCells with cleared = true will clear theid displays in preparation for compile/stamp operations\r\n\r\n@method clear\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.clear = function() {\r\n        var current,\r\n            cells = this.cells,\r\n            cell = my.cell,\r\n            i,\r\n            iz;\r\n        for (i = 0, iz = cells.length; i < iz; i++) {\r\n            current = cell[cells[i]];\r\n            if (current.rendered && current.cleared) {\r\n                current.clear();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nDisplay function - requests Cells to compile their &lt;canvas&gt; element\r\n\r\nCells will compile in ascending order of their compileOrder attributes, if their compiled attribute = true\r\n\r\nBy default:\r\n* the initial base canvas has a compileOrder of 9999 and compiles last\r\n* the initial display canvas has compiled = false and will not compile\r\n\r\n(This function is replaced by the Filters extension)\r\n\r\n@method compile\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.compile = function(mouse) {\r\n        var cell = my.cell,\r\n            cells = this.cellsCompileOrder,\r\n            current,\r\n            i,\r\n            iz;\r\n        this.sortCellsCompile();\r\n        for (i = 0, iz = cells.length; i < iz; i++) {\r\n            current = cell[cells[i]];\r\n            if (current.rendered && current.compiled) {\r\n                current.compile(mouse);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nDisplay function - requests Cells to show their &lt;canvas&gt; element \r\n\r\nCells will show in ascending order of their showOrder attributes, if their show attribute = true\r\n\r\nBy default, the initial base and display canvases have shown = false:\r\n* 'show' involves a cell copying itself onto the base cell; it makes no sense for the base cell to copy onto itself\r\n* the last action is to copy the base cell onto the display cell\r\n\r\n(This function is replaced by the Filters extension)\r\n\r\n@method show\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.show = function() {\r\n        var display,\r\n            base,\r\n            cell,\r\n            cells = my.cell,\r\n            order = this.cellsShowOrder,\r\n            i,\r\n            iz;\r\n        display = cells[this.display];\r\n        base = cells[this.base];\r\n        this.sortCellsShow();\r\n        for (i = 0, iz = order.length; i < iz; i++) {\r\n            cell = cells[order[i]];\r\n            if (cell.rendered && cell.shown) {\r\n                base.copyCellToSelf(cell);\r\n            }\r\n        }\r\n        display.copyCellToSelf(base, true);\r\n        return this;\r\n    };\r\n    /**\r\nDisplay function - Pad tells its associated Cell objects to undertake a complete clear-compile-show display cycle\r\n\r\n@method render\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.render = function(mouse) {\r\n        this.clear();\r\n        this.compile(mouse);\r\n        this.show();\r\n        return this;\r\n    };\r\n    /**\r\nCreate a new (hidden) &lt;canvas&gt; element and associated Cell wrapper, and add it to this Pad\r\n@method addNewCell\r\n@param {Object} data Object containing attribute data for the new canvas\r\n@return New Cell object; false on failure\r\n**/\r\n    my.Pad.prototype.addNewCell = function(data) {\r\n        var canvas,\r\n            cell,\r\n            pu = my.pushUnique;\r\n        data = my.safeObject(data);\r\n        if (data.name.substring) {\r\n            data.width = Math.round(data.width) || this.width;\r\n            data.height = Math.round(data.height) || this.height;\r\n            canvas = document.createElement('canvas');\r\n            canvas.setAttribute('id', data.name);\r\n            canvas.setAttribute('height', data.height);\r\n            canvas.setAttribute('width', data.width);\r\n            data.pad = this.name;\r\n            data.canvas = canvas;\r\n            cell = my.makeCell(data);\r\n            pu(this.cells, cell.name);\r\n            pu(this.cellsCompileOrder, cell.name);\r\n            pu(this.cellsShowOrder, cell.name);\r\n            this.resortCompile = true;\r\n            this.resortShow = true;\r\n            return cell;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nAssociate existing &lt;canvas&gt; elements, and their Cell wrappers, with this Pad\r\n@method addCells\r\n@param {String} items One or more CELLNAME Strings\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.addCells = function() {\r\n        var slice,\r\n            i,\r\n            iz,\r\n            pu = my.pushUnique;\r\n        slice = Array.prototype.slice.call(arguments);\r\n        if (Array.isArray(slice[0])) {\r\n            slice = slice[0];\r\n        }\r\n        for (i = 0, iz = slice.length; i < iz; i++) {\r\n            if (my.cell[slice[i]]) {\r\n                pu(this.cells, slice[i]);\r\n                pu(this.cellsCompileOrder, slice[i]);\r\n                pu(this.cellsShowOrder, slice[i]);\r\n            }\r\n        }\r\n        this.resortCompile = true;\r\n        this.resortShow = true;\r\n        return this;\r\n    };\r\n    /**\r\nRemove a Cell wrapper object from this Pad\r\n\r\n_Note: does not delete the canvas, or the Cell object, from the scrawl library_\r\n@method deleteCell\r\n@param {String} cell CELLNAME String\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.deleteCell = function(cell) {\r\n        var ri = my.removeItem;\r\n        if (cell.substring) {\r\n            ri(this.cells, cell);\r\n            ri(this.cellsCompileOrder, cell);\r\n            ri(this.cellsShowOrder, cell);\r\n            if (this.display === cell) {\r\n                this.display = this.current;\r\n            }\r\n            if (this.base === cell) {\r\n                this.base = this.current;\r\n            }\r\n            if (this.current === cell) {\r\n                this.current = this.base;\r\n            }\r\n            this.resortCompile = true;\r\n            this.resortShow = true;\r\n            return this;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nSet scrawl.currentPad attribute to this Pad's PADNAME String\r\n@method makeCurrent\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.makeCurrent = function() {\r\n        my.work.currentPad = this.name;\r\n        return this;\r\n    };\r\n    /**\r\nAugments PageElement.setAccessibility(); handles the setting of &lt;canvas&gt; element title and data-comment attributes\r\n\r\n* Title text is assigned to the display canvas's title attribute\r\n* Comments are placed between the display canvas element's tags, within &lt;p&gt; tags - this will remove any existing content between the canvas tags\r\n\r\n@method setAccessibility\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.setAccessibility = function(items) {\r\n        var element,\r\n            xt = my.xt;\r\n        items = my.safeObject(items);\r\n        element = this.getElement();\r\n        if (xt(items.title)) {\r\n            this.title = items.title;\r\n            element.title = this.title;\r\n        }\r\n        if (xt(items.comment)) {\r\n            this.comment = items.comment;\r\n            element.setAttribute('data-comment', this.comment);\r\n            element.innerHTML = '<p>' + this.comment + '</p>';\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nOverrides PageElement.setDimensions(); &lt;canvas&gt; elements do not use styling to set their drawing region dimensions\r\n\r\n@method setDimensions\r\n@return This\r\n@chainable\r\n**/\r\n    my.Pad.prototype.setDimensions = function() {\r\n        var element = this.getElement();\r\n        element.width = this.localWidth;\r\n        element.height = this.localHeight;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n# Cell\r\n\r\n## Instantiation\r\n\r\n* created automatically for any &lt;canvas&gt; element found on the web page when it loads\r\n* scrawl.addCanvasToPage()\r\n* scrawl.addNewCell()\r\n* Pad.addNewCell()\r\n* should not be instantiated directly by users\r\n\r\n## Purpose\r\n\r\n* Acts as a wrapper for each &lt;canvas&gt; element - whether that canvas is part of the DOM or not\r\n* Oversees manipulation of the &lt;canvas&gt; element's context engine\r\n* Responsible clearing &lt;canvas&gt; elements, and for copying one &lt;canvas&gt; to another\r\n* Includes functionality to pivot, path, flip, lock and roll cell positioning in the display scene\r\n* Controls scrolling and zoom effects between &lt;canvas&gt; elements\r\n* Builds &lt;canvas&gt; element collision fields from entity data\r\n* Undertakes collision detection between entitys and a collision field\r\n\r\n_Note: A Cell is entirely responsible for determining what portion of its &lt;canvas&gt; element's content will be copied to another &lt;canvas&gt; and where that copy will appear on the destination &lt;canvas&gt;._\r\n\r\n## Access\r\n\r\n* scrawl.cell.CELLNAME - for the Cell object\r\n* scrawl.pad[scrawl.cell.CELLNAME.pad] - for the Cell object's Pad object\r\n\r\n@class Cell\r\n@constructor\r\n@extends Position\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Cell = function(items) {\r\n        items = my.safeObject(items);\r\n        if (my.xta(items, items.canvas)) { //flag used by Pad constructor when calling Cell constructor\r\n            /**\r\nThe coordinate Vector representing the Cell's target position on the &lt;canvas&gt; to which it is to be copied\r\n\r\nCell supports the following 'virtual' attributes for this attribute:\r\n\r\n* __startX__ or __targetX__ - (Number) the x coordinate on the destination &lt;canvas&gt;\r\n* __startY__ or __targetY__ - (Number) the y coordinate on the destination &lt;canvas&gt;\r\n\r\n@property start\r\n@type Vector\r\n**/\r\n            this.coreCellInit(items);\r\n            this.animationCellInit(items);\r\n            this.collisionsCellInit(items);\r\n            this.filtersCellInit(items);\r\n            return this;\r\n        }\r\n        return false;\r\n    };\r\n    my.Cell.prototype = Object.create(my.Position.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Cell'\r\n@final\r\n**/\r\n    my.Cell.prototype.type = 'Cell';\r\n    my.Cell.prototype.classname = 'cellnames';\r\n    my.work.d.Cell = {\r\n        /**\r\nPADNAME of the Pad object to which this Cell belongs\r\n@property pad\r\n@type String\r\n@default ''\r\n**/\r\n        pad: '',\r\n        /**\r\nThe coordinate Vector representing the Cell's copy source position on its &lt;canvas&gt;\r\n\r\nCell supports the following 'virtual' attributes for this attribute:\r\n\r\n* __copyX__ - (Number) the x coordinate on the source &lt;canvas&gt;\r\n* __copyY__ - (Number) the y coordinate on the source &lt;canvas&gt;\r\n\r\n@property copy\r\n@type Vector\r\n**/\r\n        copy: {\r\n            x: 0,\r\n            Y: 0\r\n        },\r\n        /**\r\nCopy width, in pixels. Determines which portion of this Cell's &lt;canvas&gt; element will be copied to another &lt;canvas&gt;\r\n@property copyWidth\r\n@type Number\r\n@default 300\r\n**/\r\n        copyWidth: 300,\r\n        /**\r\nCopy height, in pixels. Determines which portion of this Cell's &lt;canvas&gt; element will be copied to another &lt;canvas&gt;\r\n@property copyHeight\r\n@type Number\r\n@default 150\r\n**/\r\n        copyHeight: 150,\r\n        /**\r\nLocal source data\r\n@property copyData\r\n@type Object\r\n@default false\r\n@private\r\n**/\r\n        copyData: false,\r\n        /**\r\nLocal target data\r\n@property pasteData\r\n@type Object\r\n@default false\r\n@private\r\n**/\r\n        pasteData: false,\r\n        /**\r\nPaste width, in pixels. Determines where, and at what scale, the copied portion of this Cell's &lt;canvas&gt; will appear on the target Cell's &lt;canvas&gt;\r\n@property pasteWidth\r\n@type Number\r\n@default 300\r\n**/\r\n        pasteWidth: 300,\r\n        /**\r\nPaste height, in pixels. Determines where, and at what scale, the copied portion of this Cell's &lt;canvas&gt; will appear on the target Cell's &lt;canvas&gt;\r\n@property pasteHeight\r\n@type Number\r\n@default 150\r\n**/\r\n        pasteHeight: 150,\r\n        /**\r\nDOM &lt;canvas&gt; element's width (not CSS width)\r\n\r\n_Never change this attribute directly_\r\n@property actualWidth\r\n@type Number\r\n@default 300\r\n**/\r\n        actualWidth: 300,\r\n        /**\r\nDOM &lt;canvas&gt; element's height (not CSS height)\r\n\r\n_Never change this attribute directly_\r\n@property actualHeight\r\n@type Number\r\n@default 150\r\n**/\r\n        actualHeight: 150,\r\n        /**\r\n@property fieldLabel\r\n@type String\r\n@default ''\r\n**/\r\n        fieldLabel: '',\r\n        /**\r\nTransparency level to be used when copying this Cell's &lt;canvas&gt; element to another &lt;canvas&gt;. Permitted values are between 0 (fully transparent) and 1 (fully opaque)\r\n@property globalAlpha\r\n@type Number\r\n@default 1\r\n**/\r\n        globalAlpha: 1,\r\n        /**\r\nComposition method to be used when copying this Cell's &lt;canvas&gt; element to another &lt;canvas&gt;. Permitted values include\r\n\r\n* 'source-over'\r\n* 'source-atop'\r\n* 'source-in'\r\n* 'source-out'\r\n* 'destination-over'\r\n* 'destination-atop'\r\n* 'destination-in'\r\n* 'destination-out'\r\n* 'lighter'\r\n* 'darker'\r\n* 'copy'\r\n* 'xor'\r\n\r\n_Be aware that different browsers render these operations in different ways, and some options are not supported by all browsers. The scrawl.device object includes details of which operations the browser supports._\r\n@property globalCompositeOperation\r\n@type String\r\n@default 'source-over'\r\n**/\r\n        globalCompositeOperation: 'source-over',\r\n        /**\r\nDOM &lt;canvas&gt; element's background color; use any permitted CSS color String\r\n\r\n_Background colors are achieved via JavaScript canvas API drawing methods. Setting the CSS backgroundColor attribute on a &lt;canvas&gt; element is not recommended_\r\n@property backgroundColor\r\n@type String\r\n@default 'rgba(0,0,0,0)'\r\n**/\r\n        backgroundColor: 'rgba(0,0,0,0)',\r\n        /**\r\nCTXNAME of this Cell's Context object\r\n\r\n_Cells use a Context object to keep track of the settings supplied to its &lt;canvas&gt; element's 2d context engine_\r\n@property context\r\n@type String\r\n@default ''\r\n@private\r\n**/\r\n        context: '',\r\n        /**\r\nArray of GROUPNAMES that contribute to building this Cell's scene\r\n@property groups\r\n@type Array\r\n@default []\r\n**/\r\n        groups: [],\r\n        /**\r\nDisplay cycle flag - on true (default), the cell will take part in the display cycle\r\n@property rendered\r\n@type Boolean\r\n@default true\r\n**/\r\n        rendered: true,\r\n        /**\r\nDisplay cycle flag - on true (default), the cell will clear itself as part of the display cycle\r\n@property cleared\r\n@type Boolean\r\n@default true\r\n**/\r\n        cleared: true,\r\n        /**\r\nDisplay cycle flag - on true (default), the cell will compile itself as part of the display cycle\r\n@property compiled\r\n@type Boolean\r\n@default true\r\n**/\r\n        compiled: true,\r\n        /**\r\nDisplay cycle flag - on true (default), the cell will show itself as part of the display cycle\r\n@property shown\r\n@type Boolean\r\n@default true\r\n**/\r\n        shown: true,\r\n        /**\r\nDisplay cycle attribute - order in which the cell will compile itself (if compile attribute = true)\r\n@property compileOrder\r\n@type Number\r\n@default 0\r\n**/\r\n        compileOrder: 0,\r\n        /**\r\nDisplay cycle attribute - order in which the cell will show itself (if show attribute = true)\r\n@property showOrder\r\n@type Number\r\n@default 0\r\n**/\r\n        showOrder: 0\r\n    };\r\n    my.mergeInto(my.work.d.Cell, my.work.d.Position);\r\n    /**\r\nCell constructor hook function - core module\r\n@method coreCellInit\r\n@private\r\n**/\r\n    my.Cell.prototype.coreCellInit = function(items) {\r\n        var temp,\r\n            context,\r\n            d = my.work.d.Cell,\r\n            xt = my.xt,\r\n            xto = my.xto,\r\n            get = my.xtGet,\r\n            vec = my.makeVector,\r\n            canvas;\r\n        my.Position.call(this, items); //handles items.start, items.startX, items.startY\r\n        my.Base.prototype.set.call(this, items);\r\n        my.canvas[this.name] = items.canvas;\r\n        canvas = my.canvas[this.name];\r\n        my.context[this.name] = items.canvas.getContext('2d');\r\n        my.cell[this.name] = this;\r\n        my.pushUnique(my.cellnames, this.name);\r\n        this.pad = get(items.pad, false);\r\n        temp = my.safeObject(items.copy);\r\n        this.copy = vec({\r\n            x: get(items.copyX, temp.x, 0),\r\n            y: get(items.copyY, temp.y, 0),\r\n            name: this.type + '.' + this.name + '.copy'\r\n        });\r\n        this.actualWidth = canvas.width;\r\n        this.actualHeight = canvas.height;\r\n        this.copyWidth = this.actualWidth;\r\n        this.copyHeight = this.actualHeight;\r\n        this.copyData = {\r\n            x: 0,\r\n            y: 0,\r\n            w: 0,\r\n            h: 0\r\n        };\r\n        this.pasteData = {\r\n            x: 0,\r\n            y: 0,\r\n            w: 0,\r\n            h: 0\r\n        };\r\n        this.pasteWidth = this.actualWidth;\r\n        this.pasteHeight = this.actualHeight;\r\n        this.setDimensions(items);\r\n        if (xto(items.pasteX, items.pasteY)) {\r\n            this.start.x = get(items.pasteX, this.start.x);\r\n            this.start.y = get(items.pasteY, this.start.y);\r\n        }\r\n        if (xto(items.copyWidth, items.copyHeight, items.pasteWidth, items.pasteHeight, items.width, items.height)) {\r\n            this.copyWidth = get(items.copyWidth, items.width, this.copyWidth);\r\n            this.copyHeight = get(items.copyHeight, items.height, this.copyHeight);\r\n            this.pasteWidth = get(items.pasteWidth, items.width, this.pasteWidth);\r\n            this.pasteHeight = get(items.pasteHeight, items.height, this.pasteHeight);\r\n        }\r\n        context = my.makeContext({\r\n            name: this.name,\r\n            cell: my.context[this.name]\r\n        });\r\n        this.context = context.name;\r\n        this.flipUpend = get(items.flipUpend, d.flipUpend);\r\n        this.flipReverse = get(items.flipReverse, d.flipReverse);\r\n        this.lockX = get(items.lockX, d.lockX);\r\n        this.lockY = get(items.lockY, d.lockY);\r\n        this.roll = get(items.roll, d.roll);\r\n        this.rendered = get(items.rendered, true);\r\n        this.cleared = get(items.cleared, true);\r\n        this.compiled = get(items.compiled, true);\r\n        this.shown = get(items.shown, true);\r\n        this.compileOrder = get(items.compileOrder, 0);\r\n        this.showOrder = get(items.showOrder, 0);\r\n        this.backgroundColor = get(items.backgroundColor, 'rgba(0,0,0,0)');\r\n        this.globalCompositeOperation = get(items.globalCompositeOperation, 'source-over');\r\n        this.globalAlpha = get(items.globalAlpha, 1);\r\n        this.groups = (xt(items.groups)) ? [].concat(items.groups) : []; //must be set\r\n        this.sortGroups = true;\r\n        my.makeGroup({\r\n            name: this.name,\r\n            cell: this.name\r\n        });\r\n        this.setCopy();\r\n        this.setPaste();\r\n    };\r\n    /**\r\nCell constructor hook function - modified by collisions extension\r\n@method collisionsCellInit\r\n@private\r\n**/\r\n    my.Cell.prototype.collisionsCellInit = function(items) {};\r\n    /**\r\nCell constructor hook function - modified by filters extension\r\n@method filtersCellInit\r\n@private\r\n**/\r\n    my.Cell.prototype.filtersCellInit = function(items) {};\r\n    /**\r\nCell constructor hook function - modified by animation extension\r\n@method animationCellInit\r\n@private\r\n**/\r\n    my.Cell.prototype.animationCellInit = function(items) {};\r\n    /**\r\nAugments Position.get(), to allow users to get values for sourceX, sourceY, startX, startY, targetX, targetY, handleX, handleY, width, height\r\n@method get\r\n@param {String} item Attribute key\r\n@return Attribute value\r\n**/\r\n    my.Cell.prototype.get = function(item) {\r\n        var stat1 = ['pasteX', 'pasteY', 'copyX', 'copyY'],\r\n            stat2 = ['paste', 'copy'],\r\n            stat3 = ['width', 'height'],\r\n            contains = my.contains;\r\n        if (contains(stat1, item)) {\r\n            switch (item) {\r\n            case 'pasteX':\r\n                return this.start.x;\r\n            case 'pasteY':\r\n                return this.start.y;\r\n            case 'copyX':\r\n                return this.copy.x;\r\n            case 'copyY':\r\n                return this.copy.y;\r\n            }\r\n        }\r\n        if (contains(stat2, item)) {\r\n            switch (item) {\r\n            case 'paste':\r\n                return this.start.getVector();\r\n            case 'copy':\r\n                return this.copy.getVector();\r\n            }\r\n        }\r\n        if (contains(stat3, item)) {\r\n            switch (item) {\r\n            case 'width':\r\n                return this.actualWidth;\r\n            case 'height':\r\n                return this.actualHeight;\r\n            }\r\n        }\r\n        return (this.animationCellGet(item) || my.Position.prototype.get.call(this, item));\r\n    };\r\n    /**\r\nCell.get hook function - modified by animation extension\r\n@method animationCellGet\r\n@private\r\n**/\r\n    my.Cell.prototype.animationCellGet = function(item) {\r\n        return false;\r\n    };\r\n    /**\r\nAugments Position.set(), to allow users to set the start, handle, and source attributes using startX, startY, targetX, targetY, handleX, handleY, sourceX, sourceY.\r\n\r\nNote - setting the argument attribute __resolve__ to true will force a recalculation of the cell's copy and passte data; this is useful in particular for cells that do not undertake a full display cycle (when their cleared or compiled attributes have been set to false)\r\n\r\n@method set\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.set = function(items) {\r\n        var xt = my.xt,\r\n            xto = my.xto,\r\n            i, iz;\r\n        my.Position.prototype.set.call(this, items);\r\n        items = my.safeObject(items);\r\n        if (xto(items.paste, items.pasteX, items.pasteY)) {\r\n            this.setPasteVector(items, false);\r\n        }\r\n        if (xto(items.copy, items.copyX, items.copyY)) {\r\n            this.setCopyVector(items);\r\n        }\r\n        if (xto(items.copyWidth, items.width)) {\r\n            this.setCopyWidth(items);\r\n        }\r\n        if (xto(items.copyHeight, items.height)) {\r\n            this.setCopyHeight(items);\r\n        }\r\n        if (xto(items.pasteWidth, items.width)) {\r\n            this.setPasteWidth(items, false);\r\n        }\r\n        if (xto(items.pasteHeight, items.height)) {\r\n            this.setPasteHeight(items, false);\r\n        }\r\n        if (xto(items.actualWidth, items.width)) {\r\n            this.setActualWidth(items, false);\r\n        }\r\n        if (xto(items.actualHeight, items.height)) {\r\n            this.setActualHeight(items, false);\r\n        }\r\n        if (xto(items.actualWidth, items.actualHeight, items.width, items.height)) {\r\n            this.setDimensions(items);\r\n            my.ctx[this.context].getContextFromEngine(my.context[this.name]);\r\n            // for(i = 0, iz = this.groups.length; i < iz; i++){\r\n            //     my.group[this.groups[i]].setDirtyStarts()\r\n            // }\r\n        }\r\n        if (xto(items.actualWidth, items.actualHeight, items.pasteWidth, items.pasteHeight, items.width, items.height, items.handle, items.handleX, items.handleY, items.scale)) {\r\n            this.setDirtyHandles();\r\n        }\r\n        if (xto(items.handle, items.handleX, items.handleY, items.scale)) {\r\n            this.setDirtyHandles();\r\n        }\r\n        if (xto(items.start, items.startX, items.startY, items.paste, items.pasteX, items.pasteY)) {\r\n            this.setDirtyStarts();\r\n        }\r\n        this.animationCellSet(items);\r\n        if (xt(items.compileOrder)) {\r\n            my.pad[this.pad].resortCompile = true;\r\n        }\r\n        if (xt(items.showOrder)) {\r\n            my.pad[this.pad].resortShow = true;\r\n        }\r\n        if (items.resolve) {\r\n            this.setCopy();\r\n            this.setPaste();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setDirtyStarts\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.setDirtyStarts = function() {\r\n        var group = my.group,\r\n            groups = this.groups,\r\n            g, i, iz;\r\n        for (i = 0, iz = groups.length; i < iz; i++) {\r\n            g = groups[i];\r\n            if (group[g]) {\r\n                group[g].setDirtyStarts();\r\n            }\r\n        }\r\n        this.currentStart.flag = false;\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setDirtyHandles\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.setDirtyHandles = function() {\r\n        var group = my.group,\r\n            groups = this.groups,\r\n            g, i, iz;\r\n        for (i = 0, iz = groups.length; i < iz; i++) {\r\n            g = groups[i];\r\n            if (group[g]) {\r\n                group[g].setDirtyHandles();\r\n            }\r\n        }\r\n        this.currentHandle.flag = false;\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setActualHeight\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setActualHeight = function(items, recalc) {\r\n        var get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        recalc = get(recalc, true);\r\n        this.actualHeight = get(items.actualHeight, items.height, this.actualHeight);\r\n        if (recalc) {\r\n            this.setDimensions(items);\r\n            my.ctx[this.context].getContextFromEngine(my.context[this.name]);\r\n            this.setDirtyHandles();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setActualWidth\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setActualWidth = function(items, recalc) {\r\n        var get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        recalc = get(recalc, true);\r\n        this.actualWidth = get(items.actualWidth, items.width, this.actualWidth);\r\n        if (recalc) {\r\n            this.setDimensions(items);\r\n            my.ctx[this.context].getContextFromEngine(my.context[this.name]);\r\n            this.setDirtyHandles();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setPasteHeight\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setPasteHeight = function(items, recalc) {\r\n        var get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        recalc = get(recalc, true);\r\n        this.pasteHeight = get(items.pasteHeight, items.height, this.pasteHeight);\r\n        if (recalc) {\r\n            this.setDirtyHandles();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setPasteWidth\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setPasteWidth = function(items, recalc) {\r\n        var get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        recalc = get(recalc, true);\r\n        this.pasteWidth = get(items.pasteWidth, items.width, this.pasteWidth);\r\n        if (recalc) {\r\n            this.setDirtyHandles();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setCopyHeight\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setCopyHeight = function(items) {\r\n        var get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        this.copyHeight = get(items.copyHeight, items.height, this.copyHeight);\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setCopyWidth\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setCopyWidth = function(items) {\r\n        var get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        this.copyWidth = get(items.copyWidth, items.width, this.copyWidth);\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setPasteVector\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setPasteVector = function(items, recalc) {\r\n        var get = my.xtGet,\r\n            so = my.safeObject,\r\n            start = this.start,\r\n            temp;\r\n        items = so(items);\r\n        recalc = get(recalc, true);\r\n        temp = so(items.paste);\r\n        start.x = get(items.pasteX, temp.x, start.x);\r\n        start.y = get(items.pasteY, temp.y, start.y);\r\n        if (recalc) {\r\n            this.setDirtyStarts();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Cell.set()\r\n@method setCopyVector\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setCopyVector = function(items) {\r\n        var get = my.xtGet,\r\n            so = my.safeObject,\r\n            copy = this.copy,\r\n            temp;\r\n        items = so(items);\r\n        temp = so(items.copy);\r\n        copy.x = get(items.copyX, temp.x, copy.x);\r\n        copy.y = get(items.copyY, temp.y, copy.y);\r\n        return this;\r\n    };\r\n    /**\r\nCell.set hook function - modified by animation extension\r\n@method animationCellSet\r\n@private\r\n**/\r\n    my.Cell.prototype.animationCellSet = function(items) {};\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Position.setDelta to allow changes to be made using attributes: source, sourceX, sourceY, sourceWidth, sourceHeight, start, startX, startY, target, targetX, targetY, targetWidth, targetHeight, globalAlpha\r\n\r\nNote - setting the argument attribute __resolve__ to true will force a recalculation of the cell's copy and passte data; this is useful in particular for cells that do not undertake a full display cycle (when their cleared or compiled attributes have been set to false)\r\n\r\n@method setDelta\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDelta = function(items) {\r\n        var xt = my.xt,\r\n            xto = my.xto,\r\n            i, iz;\r\n        my.Position.prototype.setDelta.call(this, items);\r\n        items = my.safeObject(items);\r\n        if (xto(items.copy, items.copyX, items.copyY)) {\r\n            this.setDeltaCopy(items);\r\n        }\r\n        if (xto(items.paste, items.pasteX, items.pasteY)) {\r\n            this.setDeltaPaste(items, false);\r\n        }\r\n        if (xt(items.copyWidth)) {\r\n            this.setDeltaCopyWidth(items);\r\n        }\r\n        if (xt(items.copyHeight)) {\r\n            this.setDeltaCopyHeight(items);\r\n        }\r\n        if (xto(items.pasteWidth, items.width)) {\r\n            this.setDeltaPasteWidth(items, false);\r\n        }\r\n        if (xto(items.pasteHeight, items.height)) {\r\n            this.setDeltaPasteHeight(items, false);\r\n        }\r\n        if (xto(items.actualWidth, items.width)) {\r\n            this.setDeltaActualWidth(items, false);\r\n        }\r\n        if (xto(items.actualHeight, items.height)) {\r\n            this.setDeltaActualHeight(items, false);\r\n        }\r\n        // if (xto(items.actualHeight, items.height, items.actualWidth, items.width)){\r\n        //     for(i = 0, iz = this.groups.length; i < iz; i++){\r\n        //         my.group[this.groups[i]].setDirtyStarts()\r\n        //     }\r\n        // }\r\n        if (xt(items.roll)) {\r\n            this.setDeltaRoll(items);\r\n        }\r\n        if (xt(items.globalAlpha)) {\r\n            this.setDeltaGlobalAlpha(items);\r\n        }\r\n        if (xto(items.actualWidth, items.width, items.actualHeight, items.height)) {\r\n            this.setDimensions(items);\r\n            my.ctx[this.context].getContextFromEngine(my.context[this.name]);\r\n        }\r\n        if (xto(items.actualWidth, items.actualHeight, items.pasteWidth, items.pasteHeight, items.width, items.height, items.handle, items.handleX, items.handleY, items.scale)) {\r\n            this.setDirtyHandles();\r\n        }\r\n        if (xto(items.start, items.startX, items.startY, items.paste, items.pasteX, items.pasteY)) {\r\n            this.setDirtyStarts();\r\n        }\r\n        if (items.resolve) {\r\n            this.setCopy();\r\n            this.setPaste();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaGlobalAlpha\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaGlobalAlpha = function(items) {\r\n        items = my.safeObject(items);\r\n        this.globalAlpha += items.globalAlpha || 0;\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaRoll\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaRoll = function(items) {\r\n        items = my.safeObject(items);\r\n        this.roll += items.roll || 0;\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaActualHeight\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaActualHeight = function(items, recalc) {\r\n        var height,\r\n            get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        recalc = get(recalc, true);\r\n        height = get(items.actualHeight, items.height);\r\n        this.actualHeight = (height.toFixed) ? this.actualHeight + height : this.actualHeight;\r\n        if (recalc) {\r\n            this.setDimensions(items);\r\n            my.ctx[this.context].getContextFromEngine(my.context[this.name]);\r\n            this.setDirtyHandles();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaActualWidth\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaActualWidth = function(items, recalc) {\r\n        var width,\r\n            get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        recalc = get(recalc, true);\r\n        width = get(items.actualWidth, items.width);\r\n        this.actualWidth = (width.toFixed) ? this.actualWidth + width : this.actualWidth;\r\n        if (recalc) {\r\n            this.setDimensions(items);\r\n            my.ctx[this.context].getContextFromEngine(my.context[this.name]);\r\n            this.setDirtyHandles();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaPasteHeight\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaPasteHeight = function(items, recalc) {\r\n        var height,\r\n            get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        recalc = get(recalc, true);\r\n        height = get(items.pasteHeight, items.height);\r\n        this.pasteHeight = (this.pasteHeight.toFixed) ? this.pasteHeight + height : my.addPercentages(this.pasteHeight, height);\r\n        if (recalc) {\r\n            this.setDirtyHandles();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaCopyHeight\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaCopyHeight = function(items) {\r\n        items = my.safeObject(items);\r\n        this.copyHeight = (this.copyHeight.toFixed) ? this.copyHeight + items.copyHeight : my.addPercentages(this.copyHeight, items.copyHeight);\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaPasteWidth\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaPasteWidth = function(items, recalc) {\r\n        var width,\r\n            get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        recalc = get(recalc, true);\r\n        width = get(items.pasteWidth, items.width);\r\n        this.pasteWidth = (this.pasteWidth.toFixed) ? this.pasteWidth + width : my.addPercentages(this.pasteWidth, width);\r\n        if (recalc) {\r\n            this.setDirtyHandles();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaCopyWidth\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaCopyWidth = function(items) {\r\n        items = my.safeObject(items);\r\n        this.copyWidth = (this.copyWidth.toFixed) ? this.copyWidth + items.copyWidth : my.addPercentages(this.copyWidth, items.copyWidth);\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaPaste\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaPaste = function(items, recalc) {\r\n        var temp,\r\n            so = my.safeObject,\r\n            get = my.xtGet,\r\n            perc = my.addPercentages,\r\n            start = this.start,\r\n            x,\r\n            y;\r\n        items = so(items);\r\n        recalc = my.xtGet(recalc, true);\r\n        temp = so(items.paste);\r\n        x = get(items.pasteX, temp.x, 0);\r\n        y = get(items.pasteY, temp.y, 0);\r\n        start.x = (this.start.x.toFixed) ? start.x + x : perc(start.x, x);\r\n        start.y = (this.start.y.toFixed) ? start.y + y : perc(start.y, y);\r\n        if (recalc) {\r\n            this.setDirtyStarts();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values\r\n\r\nAugments Cell.setDelta\r\n@method setDeltaCopy\r\n@param {Object} items Object consisting of key:value attributes\r\n@param {Boolean} recalc When true (default), triggers variable recalculation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDeltaCopy = function(items) {\r\n        var temp,\r\n            so = my.safeObject,\r\n            get = my.xtGet,\r\n            perc = my.addPercentages,\r\n            copy = this.copy,\r\n            x,\r\n            y;\r\n        items = so(items);\r\n        temp = so(items.copy);\r\n        x = get(items.copyX, temp.x, 0);\r\n        y = get(items.copyY, temp.y, 0);\r\n        copy.x = (x.toFixed) ? copy.x + x : perc(copy.x, x);\r\n        copy.y = (y.toFixed) ? copy.y + y : perc(copy.y, y);\r\n        return this;\r\n    };\r\n    /**\r\nSet the Cell's &lt;canvas&gt; context engine to the specification supplied by the entity about to be drawn on the canvas\r\n@method setEngine\r\n@param {Entity} entity Entity object\r\n@return Entity object\r\n@private\r\n**/\r\n    my.Cell.prototype.setEngine = function(entity) {\r\n        var cellContext,\r\n            entityContext,\r\n            cellEngine,\r\n            changes,\r\n            cName,\r\n            eName,\r\n            ctx = my.ctx,\r\n            action = this.setEngineActions,\r\n            stat1 = ['Gradient', 'RadialGradient', 'Pattern'];\r\n        if (!entity.fastStamp) {\r\n            cellContext = ctx[this.context];\r\n            entityContext = ctx[entity.context];\r\n            changes = entityContext.getChanges(entity, cellContext);\r\n            if (Object.keys(changes).length > 0) {\r\n                cellEngine = my.context[this.name];\r\n                eName = entity.name;\r\n                cName = this.name;\r\n                for (var item in changes) {\r\n                    action[item](changes[item], cellEngine, stat1, eName, cName);\r\n                    cellContext[item] = changes[item];\r\n                }\r\n            }\r\n        }\r\n        return entity;\r\n    };\r\n    my.Cell.prototype.setEngineActions = {\r\n        fillStyle: function(item, e, s, entity, cell) {\r\n            var design, fillStyle;\r\n            if (my.xt(my.design[item])) {\r\n                design = my.design[item];\r\n                if (my.contains(s, design.type)) {\r\n                    design.update(entity, cell);\r\n                }\r\n                fillStyle = design.getData();\r\n            }\r\n            else {\r\n                fillStyle = item;\r\n            }\r\n            e.fillStyle = fillStyle;\r\n        },\r\n        font: function(item, e) {\r\n            e.font = item;\r\n        },\r\n        globalAlpha: function(item, e) {\r\n            e.globalAlpha = item;\r\n        },\r\n        globalCompositeOperation: function(item, e) {\r\n            e.globalCompositeOperation = item;\r\n        },\r\n        lineCap: function(item, e) {\r\n            e.lineCap = item;\r\n        },\r\n        lineDash: function(item, e) {\r\n            e.mozDash = item;\r\n            e.lineDash = item;\r\n            if (e.setLineDash) {\r\n                e.setLineDash(item);\r\n            }\r\n        },\r\n        lineDashOffset: function(item, e) {\r\n            e.mozDashOffset = item;\r\n            e.lineDashOffset = item;\r\n        },\r\n        lineJoin: function(item, e) {\r\n            e.lineJoin = item;\r\n        },\r\n        lineWidth: function(item, e) {\r\n            e.lineWidth = item;\r\n        },\r\n        shadowBlur: function(item, e) {\r\n            e.shadowBlur = item;\r\n        },\r\n        shadowColor: function(item, e) {\r\n            e.shadowColor = item;\r\n        },\r\n        shadowOffsetX: function(item, e) {\r\n            e.shadowOffsetX = item;\r\n        },\r\n        shadowOffsetY: function(item, e) {\r\n            e.shadowOffsetY = item;\r\n        },\r\n        strokeStyle: function(item, e, s, entity, cell) {\r\n            var design, strokeStyle;\r\n            if (my.xt(my.design[item])) {\r\n                design = my.design[item];\r\n                if (my.contains(s, design.type)) {\r\n                    design.update(entity, cell);\r\n                }\r\n                strokeStyle = design.getData();\r\n            }\r\n            else {\r\n                strokeStyle = item;\r\n            }\r\n            e.strokeStyle = strokeStyle;\r\n        },\r\n        miterLimit: function(item, e) {\r\n            e.miterLimit = item;\r\n        },\r\n        textAlign: function(item, e) {\r\n            e.textAlign = item;\r\n        },\r\n        textBaseline: function(item, e) {\r\n            e.textBaseline = item;\r\n        },\r\n        winding: function(item, e) {\r\n            e.mozFillRule = item;\r\n            e.msFillRule = item;\r\n        }\r\n    };\r\n    /**\r\ngroupSort\r\n@method groupSort\r\n@return nothing\r\n@private\r\n**/\r\n    my.Cell.prototype.groupSort = function() {\r\n        if (this.sortGroups) {\r\n            this.sortGroups = false;\r\n            this.groups = my.bucketSort('group', 'order', this.groups);\r\n        }\r\n    };\r\n    /**\r\nClear the Cell's &lt;canvas&gt; element using JavaScript ctx.clearRect()\r\n@method clear\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.clear = function() {\r\n        var cellContext,\r\n            w = this.actualWidth,\r\n            h = this.actualHeight,\r\n            b = this.backgroundColor,\r\n            cellEngine;\r\n        cellEngine = my.context[this.name];\r\n        cellContext = my.ctx[this.context];\r\n        cellEngine.setTransform(1, 0, 0, 1, 0, 0);\r\n        cellEngine.clearRect(0, 0, w, h);\r\n        if (b !== 'rgba(0,0,0,0)') {\r\n            cellEngine.fillStyle = b;\r\n            cellEngine.fillRect(0, 0, w, h);\r\n            cellContext.fillStyle = b;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nPrepare to draw entitys onto the Cell's &lt;canvas&gt; element, in line with the Cell's group Array\r\n\r\n(This function is replaced by the Filters extension)\r\n@method compile\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.compile = function(mouse) {\r\n        var group,\r\n            i,\r\n            iz;\r\n        this.groupSort();\r\n        for (i = 0, iz = this.groups.length; i < iz; i++) {\r\n            group = my.group[this.groups[i]];\r\n            if (group.visibility) {\r\n                group.stamp(false, this.name, this, mouse);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nCell copy helper function\r\n@method rotateDestination\r\n@param {Object} engine Javascript canvas context object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.rotateDestination = function(engine) {\r\n        var reverse = (this.flipReverse) ? -1 : 1,\r\n            upend = (this.flipUpend) ? -1 : 1,\r\n            cos,\r\n            sin,\r\n            rotation = (this.addPathRoll) ? this.roll + this.pathRoll : this.roll,\r\n            data = this.pasteData;\r\n        if (rotation) {\r\n            rotation *= 0.01745329251;\r\n            cos = Math.cos(rotation);\r\n            sin = Math.sin(rotation);\r\n            engine.setTransform((cos * reverse), (sin * reverse), (-sin * upend), (cos * upend), data.x, data.y);\r\n            return this;\r\n        }\r\n        engine.setTransform(reverse, 0, 0, upend, data.x, data.y);\r\n        return this;\r\n    };\r\n    /**\r\nCell copy helper function\r\n@method prepareToCopyCell\r\n@param {Object} engine Javascript canvas context object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.prepareToCopyCell = function(engine) {\r\n        var data = this.pasteData;\r\n        if (this.pivot) {\r\n            this.setStampUsingPivot(my.pad[this.pad].base);\r\n        }\r\n        else {\r\n            this.pathPrepareToCopyCell();\r\n        }\r\n        this.setCopy();\r\n        this.setPaste();\r\n        this.rotateDestination(engine);\r\n        return this;\r\n    };\r\n    /**\r\nCell.prepareToCopyCell hook function - modified by path extension\r\n@method pathPrepareToCopyCell\r\n@private\r\n**/\r\n    my.Cell.prototype.pathPrepareToCopyCell = function() {};\r\n    /**\r\nCell.setCopy update copyData object values\r\n@method setCopy\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.setCopy = function() {\r\n        var bet = my.isBetween,\r\n            data = this.copyData,\r\n            copy = this.copy,\r\n            conv = this.numberConvert,\r\n            floor = Math.floor,\r\n            cw = this.copyWidth,\r\n            ch = this.copyHeight,\r\n            aw = this.actualWidth,\r\n            ah = this.actualHeight;\r\n        data.x = (copy.x.substring) ? conv(copy.x, aw) : copy.x;\r\n        data.y = (copy.y.substring) ? conv(copy.y, ah) : copy.y;\r\n        if (!bet(data.x, 0, aw - 1, true)) {\r\n            data.x = (data.x < 0) ? 0 : aw - 1;\r\n        }\r\n        if (!bet(data.y, 0, ah - 1, true)) {\r\n            data.y = (data.y < 0) ? 0 : ah - 1;\r\n        }\r\n        data.w = (cw.substring) ? conv(cw, aw) : cw;\r\n        data.h = (ch.substring) ? conv(ch, ah) : ch;\r\n        if (!bet(data.w, 1, aw, true)) {\r\n            data.w = (data.w < 1) ? 1 : aw;\r\n        }\r\n        if (!bet(data.h, 1, ah, true)) {\r\n            data.h = (data.h < 1) ? 1 : ah;\r\n        }\r\n        if (data.x + data.w > aw) {\r\n            data.x = aw - data.w;\r\n        }\r\n        if (data.y + data.h > ah) {\r\n            data.y = ah - data.h;\r\n        }\r\n        data.x = floor(data.x);\r\n        data.y = floor(data.y);\r\n        data.w = floor(data.w);\r\n        data.h = floor(data.h);\r\n        return this;\r\n    };\r\n    /**\r\nCell.setPaste helper function\r\n@method setReference\r\n@private\r\n**/\r\n    my.Cell.prototype.setReference = function() {\r\n        var so = my.safeObject,\r\n            cell = my.cell,\r\n            pad = so(my.pad[this.pad]),\r\n            display = so(cell[pad.display]),\r\n            base = so(cell[pad.base]),\r\n            isRaw = (!pad.base) ? true : false,\r\n            isBase = (this.name === pad.base) ? true : false,\r\n            isDisplay = (this.name === pad.display) ? true : false,\r\n            isFirstCellInPad = (!pad.display) ? true : false;\r\n        if (isFirstCellInPad) {\r\n            this.reference = pad;\r\n        }\r\n        else if (isRaw) {\r\n            this.reference = false;\r\n        }\r\n        else if (isBase) {\r\n            this.reference = display;\r\n        }\r\n        else if (isDisplay) {\r\n            this.reference = pad;\r\n        }\r\n        else {\r\n            this.reference = base;\r\n        }\r\n    };\r\n    /**\r\nCell.setPaste update pasteData object values\r\n@method setPaste\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.setPaste = function() {\r\n        var so = my.safeObject,\r\n            cell = my.cell,\r\n            pad = so(my.pad[this.pad]),\r\n            display = so(cell[pad.display]),\r\n            base = so(cell[pad.base]),\r\n            stack = (my.xt(pad.group)) ? true : false,\r\n            isBase = (this.name === pad.base) ? true : false,\r\n            width, height,\r\n            floor = Math.floor,\r\n            conv = this.numberConvert,\r\n            scale = this.scale,\r\n            data = this.pasteData,\r\n            start = this.currentStart,\r\n            get = my.xtGet;\r\n        if (my.xta(display, base)) {\r\n            width = (this.name === pad.base) ? display.actualWidth : get(base.actualWidth, this.actualWidth, 300);\r\n            height = (this.name === pad.base) ? display.actualHeight : get(base.actualHeight, this.actualHeight, 150);\r\n            if (!start.flag) {\r\n                if (!this.reference) {\r\n                    this.setReference();\r\n                }\r\n                this.updateCurrentStart(this.reference);\r\n            }\r\n            data.x = start.x;\r\n            data.y = start.y;\r\n            data.w = this.pasteWidth;\r\n            if (data.w.substring) {\r\n                data.w = conv(data.w, width);\r\n            }\r\n            if (!isBase || !stack) {\r\n                data.w *= scale;\r\n            }\r\n            data.h = this.pasteHeight;\r\n            if (data.h.substring) {\r\n                data.h = conv(data.h, height);\r\n            }\r\n            if (!isBase || !stack) {\r\n                data.h *= scale;\r\n            }\r\n            if (data.w < 1) {\r\n                data.w = 1;\r\n            }\r\n            if (data.h < 1) {\r\n                data.h = 1;\r\n            }\r\n            data.x = floor(data.x);\r\n            data.y = floor(data.y);\r\n            data.w = floor(data.w);\r\n            data.h = floor(data.h);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nCell copy helper function\r\n@method copyCellToSelf\r\n@param {String} cell CELLNAME of cell to be copied onto this cell's &lt;canvas&gt; element\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.copyCellToSelf = function(cell) {\r\n        var destinationContext,\r\n            destinationEngine,\r\n            sourceEngine,\r\n            sourceCanvas,\r\n            copy, paste, offset;\r\n        cell = (cell.substring) ? my.cell[cell] : cell;\r\n        if (my.xt(cell)) {\r\n            destinationEngine = my.context[this.name];\r\n            destinationContext = my.ctx[this.name];\r\n            sourceEngine = my.context[cell.name];\r\n            sourceCanvas = my.canvas[cell.name];\r\n            if (cell.globalAlpha !== destinationContext.globalAlpha) {\r\n                destinationEngine.globalAlpha = cell.globalAlpha;\r\n                destinationContext.globalAlpha = cell.globalAlpha;\r\n            }\r\n            if (cell.globalCompositeOperation !== destinationContext.globalCompositeOperation) {\r\n                destinationEngine.globalCompositeOperation = cell.globalCompositeOperation;\r\n                destinationContext.globalCompositeOperation = cell.globalCompositeOperation;\r\n            }\r\n            sourceEngine.setTransform(1, 0, 0, 1, 0, 0);\r\n            offset = cell.currentHandle;\r\n            if (!offset.flag) {\r\n                cell.updateCurrentHandle();\r\n            }\r\n            cell.prepareToCopyCell(destinationEngine);\r\n            copy = cell.copyData;\r\n            paste = cell.pasteData;\r\n            destinationEngine.drawImage(sourceCanvas, copy.x, copy.y, copy.w, copy.h, offset.x, offset.y, paste.w, paste.h);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nEntity stamp helper function\r\n@method clearShadow\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.clearShadow = function(engine) {\r\n        var context = my.ctx[this.context];\r\n        engine.shadowOffsetX = 0.0;\r\n        engine.shadowOffsetY = 0.0;\r\n        engine.shadowBlur = 0.0;\r\n        context.shadowOffsetX = 0.0;\r\n        context.shadowOffsetY = 0.0;\r\n        context.shadowBlur = 0.0;\r\n        return this;\r\n    };\r\n    /**\r\nEntity stamp helper function\r\n@method restoreShadow\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.restoreShadow = function(engine, entitycontext) {\r\n        var ctx = my.ctx,\r\n            cellContext = ctx[this.context],\r\n            entityContext = ctx[entitycontext];\r\n        engine.shadowOffsetX = entityContext.shadowOffsetX;\r\n        engine.shadowOffsetY = entityContext.shadowOffsetY;\r\n        engine.shadowBlur = entityContext.shadowBlur;\r\n        cellContext.shadowOffsetX = entityContext.shadowOffsetX;\r\n        cellContext.shadowOffsetY = entityContext.shadowOffsetY;\r\n        cellContext.shadowBlur = entityContext.shadowBlur;\r\n        return this;\r\n    };\r\n    /**\r\nEntity stamp helper function\r\n@method setToClearShape\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Cell.prototype.setToClearShape = function() {\r\n        var context,\r\n            engine;\r\n        engine = my.context[this.name];\r\n        context = my.ctx[this.context];\r\n        engine.fillStyle = 'rgba(0, 0, 0, 0)';\r\n        engine.strokeStyle = 'rgba(0, 0, 0, 0)';\r\n        engine.shadowColor = 'rgba(0, 0, 0, 0)';\r\n        context.fillStyle = 'rgba(0, 0, 0, 0)';\r\n        context.strokeStyle = 'rgba(0, 0, 0, 0)';\r\n        context.shadowColor = 'rgba(0, 0, 0, 0)';\r\n        return this;\r\n    };\r\n    /**\r\nAmend the physical dimensions of the Cell's &lt;canvas&gt; element\r\n\r\nOmitting the argument will force the &lt;canvas&gt; to set itself to its Pad object's dimensions\r\n@method setDimensions\r\n@param {Object} [items] Argument with __width__ and/or __height__ attributes, in pixels\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.setDimensions = function(items) {\r\n        var pad = my.pad[this.pad],\r\n            canvas = my.canvas[this.name],\r\n            width = my.xtGet(items.width, items.actualWidth, this.actualWidth),\r\n            height = my.xtGet(items.height, items.actualHeight, this.actualHeight);\r\n        if (pad) {\r\n            if (width.substring) {\r\n                width = (parseFloat(width) / 100) * (pad.localWidth / pad.scale);\r\n            }\r\n            if (height.substring) {\r\n                height = (parseFloat(height) / 100) * (pad.localHeight / pad.scale);\r\n            }\r\n        }\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        this.actualWidth = width;\r\n        this.actualHeight = height;\r\n        return this;\r\n    };\r\n    /**\r\nPerform a JavaScript ctx.save() operation\r\n@method saveContext\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.saveContext = function() {\r\n        my.context[this.name].save();\r\n        return this;\r\n    };\r\n    /**\r\nPerform a JavaScript ctx.restore() operation\r\n@method restoreContext\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.restoreContext = function() {\r\n        my.context[this.name].restore();\r\n        return this;\r\n    };\r\n    /**\r\nCapture an image of the cell's &lt;canvas&gt; element using the JavaScript ctx.getImageData() operation\r\n\r\nArgument is an Object in the form:\r\n\r\n* {x:Number, y:Number, width:Number, height:Number}\r\n\r\nDefault values are:\r\n\r\n* {0, 0, this.actualWidth, this.actualHeight}\r\n\r\n@method getImageData\r\n@param {Object} dimensions Details of the &lt;canvas&gt; area to be saved\r\n@return String label pointing to where the image has been saved in the scrawl library - scrawl.imageData[STRING]\r\n**/\r\n    my.Cell.prototype.getImageData = function(dimensions) {\r\n        var x,\r\n            y,\r\n            get = my.xtGet,\r\n            width,\r\n            height,\r\n            label;\r\n        dimensions = my.safeObject(dimensions);\r\n        label = (dimensions.name && dimensions.name.substring) ? this.name + '_' + dimensions.name : this.name + '_imageData';\r\n        x = get(dimensions.x, 0);\r\n        y = get(dimensions.y, 0);\r\n        width = get(dimensions.width, this.actualWidth);\r\n        height = get(dimensions.height, this.actualHeight);\r\n        my.imageData[label] = my.context[this.name].getImageData(x, y, width, height);\r\n        return label;\r\n    };\r\n\r\n    /**\r\n# Context\r\n\r\n## Instantiation\r\n\r\n* This object should never be instantiated by users\r\n\r\n## Purpose\r\n\r\n* wraps a given context for a Cell or Entity object\r\n* responsible for comparing contexts and listing changes that need to be made for successful Entity stamping on a canvas\r\n* all updates to a Context object's attributes should be performed via the Entity object's set() function\r\n\r\n@class Context\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Context = function(items) {\r\n        items = my.safeObject(items);\r\n        my.Base.call(this, items);\r\n        if (items.cell) {\r\n            this.getContextFromEngine(items.cell);\r\n        }\r\n        else {\r\n            this.set(items);\r\n        }\r\n        my.ctx[this.name] = this;\r\n        my.pushUnique(my.ctxnames, this.name);\r\n        return this;\r\n    };\r\n    my.Context.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Context'\r\n@final\r\n**/\r\n    my.Context.prototype.type = 'Context';\r\n    my.Context.prototype.classname = 'ctxnames';\r\n    my.work.d.Context = {\r\n        /**\r\nColor, gradient or pattern used to fill a entity. Can be:\r\n\r\n* Cascading Style Sheet format color String - '#fff', '#ffffff', 'rgb(255,255,255)', 'rgba(255,255,255,1)', 'white'\r\n* COLORNAME String\r\n* GRADIENTNAME String\r\n* RADIALGRADIENTNAME String\r\n* PATTERNNAME String\r\n@property fillStyle\r\n@type String\r\n@default '#000000'\r\n**/\r\n        fillStyle: '#000000',\r\n        /**\r\nShape and Path entity fill method. Can be:\r\n\r\n* 'nonzero' - all areas enclosed by the entity's path are flooded\r\n* 'evenodd' - only 'odd' areas of the entity's path are flooded\r\n@property winding\r\n@type String\r\n@default 'nonzero'\r\n**/\r\n        winding: 'nonzero',\r\n        /**\r\nColor, gradient or pattern used to outline a entity. Can be:\r\n\r\n* Cascading Style Sheet format color String - '#fff', '#ffffff', 'rgb(255,255,255)', 'rgba(255,255,255,1)', 'white'\r\n* COLORNAME String\r\n* GRADIENTNAME String\r\n* RADIALGRADIENTNAME String\r\n* PATTERNNAME String\r\n@property strokeStyle\r\n@type String\r\n@default '#000000'\r\n**/\r\n        strokeStyle: '#000000',\r\n        /**\r\nEntity transparency - a value between 0 and 1, where 0 is completely transparent and 1 is completely opaque\r\n@property globalAlpha\r\n@type Number\r\n@default 1\r\n**/\r\n        globalAlpha: 1,\r\n        /**\r\nCompositing method for applying the entity to an existing Cell (&lt;canvas&gt;) display. Permitted values include\r\n\r\n* 'source-over'\r\n* 'source-atop'\r\n* 'source-in'\r\n* 'source-out'\r\n* 'destination-over'\r\n* 'destination-atop'\r\n* 'destination-in'\r\n* 'destination-out'\r\n* 'lighter'\r\n* 'darker'\r\n* 'copy'\r\n* 'xor'\r\n\r\n_Be aware that different browsers render these operations in different ways, and some options are not supported by all browsers_\r\n\r\n@property globalCompositeOperation\r\n@type String\r\n@default 'source-over'\r\n**/\r\n        globalCompositeOperation: 'source-over',\r\n        /**\r\nLine width, in pixels\r\n@property lineWidth\r\n@type Number\r\n@default 1\r\n**/\r\n        lineWidth: 1,\r\n        /**\r\nLine cap styling. Permitted values include:\r\n\r\n* 'butt'\r\n* 'round'\r\n* 'square'\r\n\r\n@property lineCap\r\n@type String\r\n@default 'butt'\r\n**/\r\n        lineCap: 'butt',\r\n        /**\r\nLine join styling. Permitted values include:\r\n\r\n* 'miter'\r\n* 'round'\r\n* 'bevel'\r\n\r\n@property lineJoin\r\n@type String\r\n@default 'miter'\r\n**/\r\n        lineJoin: 'miter',\r\n        /**\r\nLine dash format - an array of Numbers representing line and gap values (in pixels), for example [5,2,2,2] for a long-short dash pattern\r\n@property lineDash\r\n@type Array\r\n@default []\r\n**/\r\n        lineDash: [],\r\n        /**\r\nLine dash offset - distance along the entity's outline at which to start the line dash. Changing this value can be used to create a 'marching ants effect\r\n@property lineDashOffset\r\n@type Number\r\n@default 0\r\n**/\r\n        lineDashOffset: 0,\r\n        /**\r\nmiterLimit - affecting the 'pointiness' of the line join where two lines join at an acute angle\r\n@property miterLimit\r\n@type Number\r\n@default 10\r\n**/\r\n        miterLimit: 10,\r\n        /**\r\nHorizontal offset of a entity's shadow, in pixels\r\n@property shadowOffsetX\r\n@type Number\r\n@default 0\r\n**/\r\n        shadowOffsetX: 0,\r\n        /**\r\nVertical offset of a entity's shadow, in pixels\r\n@property shadowOffsetY\r\n@type Number\r\n@default 0\r\n**/\r\n        shadowOffsetY: 0,\r\n        /**\r\nBlur border for a entity's shadow, in pixels\r\n@property shadowBlur\r\n@type Number\r\n@default 0\r\n**/\r\n        shadowBlur: 0,\r\n        /**\r\nColor used for entity shadow effect. Can be:\r\n\r\n* Cascading Style Sheet format color String - '#fff', '#ffffff', 'rgb(255,255,255)', 'rgba(255,255,255,1)', 'white'\r\n* COLORNAME String\r\n@property shadowColor\r\n@type String\r\n@default 'rgba(0,0,0,0)'\r\n**/\r\n        shadowColor: 'rgba(0,0,0,0)',\r\n        /**\r\nCascading Style Sheet font String, for Phrase entitys\r\n@property font\r\n@type String\r\n@default '10pt sans-serif'\r\n**/\r\n        font: '10pt sans-serif',\r\n        /**\r\nText alignment for multi-line Phrase entitys. Permitted values include:\r\n\r\n* 'start'\r\n* 'left'\r\n* 'center'\r\n* 'right'\r\n* 'end'\r\n\r\n@property textAlign\r\n@type String\r\n@default 'start'\r\n**/\r\n        textAlign: 'start',\r\n        /**\r\nText baseline value for single-line Phrase entitys set to follow a Path entity path. Permitted values include:\r\n\r\n* 'alphabetic'\r\n* 'top'\r\n* 'hanging'\r\n* 'middle'\r\n* 'ideographic'\r\n* 'bottom'\r\n\r\n@property textBaseline\r\n@type String\r\n@default 'alphabetic'\r\n**/\r\n        textBaseline: 'alphabetic'\r\n    };\r\n    my.work.contextKeys = Object.keys(my.work.d.Context);\r\n    my.mergeInto(my.work.d.Context, my.work.d.Base);\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values; only Number attributes can be amended using this function - lineDashOffset, lineWidth, globalAlpha\r\n\r\n(Only for use by Context objects)\r\n@method setDelta\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Context.prototype.setDelta = function(items) {\r\n        var xt = my.xt,\r\n            d = my.work.d.Context;\r\n        items = my.safeObject(items);\r\n        if (xt(items.lineDashOffset)) {\r\n            if (!xt(this.lineDashOffset)) {\r\n                this.lineDashOffset = d.lineDashOffset + items.lineDashOffset;\r\n            }\r\n            this.lineDashOffset += items.lineDashOffset;\r\n        }\r\n        if (xt(items.lineWidth)) {\r\n            if (!xt(this.lineWidth)) {\r\n                this.lineWidth = d.lineWidth + items.lineWidth;\r\n            }\r\n            this.lineWidth += items.lineWidth;\r\n            if (this.lineWidth < 0) {\r\n                this.lineWidth = 0;\r\n            }\r\n        }\r\n        if (xt(items.globalAlpha)) {\r\n            if (!xt(this.globalAlpha)) {\r\n                this.globalAlpha = d.globalAlpha + items.globalAlpha;\r\n            }\r\n            this.globalAlpha += items.globalAlpha;\r\n            if (!my.isBetween(this.globalAlpha, 0, 1, true)) {\r\n                this.globalAlpha = (this.globalAlpha > 0.5) ? 1 : 0;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nInterrogates a &lt;canvas&gt; element's context engine and populates its own attributes with returned values\r\n\r\n(Only for use by Context objects)\r\n@method getContextFromEngine\r\n@param {Object} ctx &lt;canvas&gt; element context engine Object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Context.prototype.getContextFromEngine = function(ctx) {\r\n        var keys = my.work.contextKeys,\r\n            get = my.xtGet;\r\n        for (var i = 0, iz = keys.length; i < iz; i++) {\r\n            this[keys[i]] = ctx[keys[i]];\r\n        }\r\n        this.winding = get(ctx.mozFillRule, ctx.msFillRule, 'nonzero');\r\n        this.lineDash = (my.xt(ctx.lineDash)) ? ctx.lineDash : [];\r\n        this.lineDashOffset = get(ctx.mozDashOffset, ctx.lineDashOffset, 0);\r\n        return this;\r\n    };\r\n    /**\r\nInterrogates a &lt;canvas&gt; element's context engine and returns an object of non-default attributes\r\n@private\r\n**/\r\n    my.Context.prototype.getNonDefaultAttributes = function() {\r\n        var d = my.work.d.Context,\r\n            xt = my.xt,\r\n            keys = my.work.contextKeys,\r\n            i, iz,\r\n            result = {};\r\n        for (i = 0, iz = keys.length; i < iz; i++) {\r\n            if (keys[i] === 'lineDash' && this.lineDash && this.lineDash.length > 0) {\r\n                result.lineDash = this.lineDash;\r\n            }\r\n            else if (xt(this[keys[i]]) && this[keys[i]] != d[keys[i]]) {\r\n                result[keys[i]] = this[keys[i]];\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\nInterrogates a &lt;canvas&gt; element's context engine and populates its own attributes with returned values\r\n\r\n(Only for use by Context objects)\r\n@method getChanges\r\n@param {Object} ctx &lt;canvas&gt; element context engine Object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Context.prototype.getChanges = function(entity, ctx) {\r\n        var c = ctx.getNonDefaultAttributes(),\r\n            ca = Object.keys(c),\r\n            e = this.getNonDefaultAttributes(),\r\n            ea = Object.keys(e),\r\n            d, color,\r\n            df = my.work.d.Context,\r\n            result = {},\r\n            contains = my.contains,\r\n            i, iz;\r\n        for (i = 0, iz = ca.length; i < iz; i++) {\r\n            if (!contains(ea, ca[i])) {\r\n                result[ca[i]] = df[ca[i]];\r\n            }\r\n        }\r\n        for (i = 0, iz = ea.length; i < iz; i++) {\r\n            if (ea[i] === 'lineWidth' && entity.scaleOutline) {\r\n                if (e.lineWidth * entity.scale !== c.lineWidth) {\r\n                    result.lineWidth = e.lineWidth * entity.scale;\r\n                }\r\n            }\r\n            else if (e[ea[i]] != c[ea[i]]) {\r\n                result[ea[i]] = e[ea[i]];\r\n            }\r\n            else if (contains(['fillStyle', 'strokeStyle', 'shadowColor'], ea[i])) {\r\n                d = my.design[e[ea[i]]];\r\n                if (d && d.type === 'Color') {\r\n                    color = d.getData();\r\n                    if (color !== c[ea[i]]) {\r\n                        result[ea[i]] = color;\r\n                    }\r\n                }\r\n                else if (ea[i] != 'shadowColor' && d && d.autoUpdate) {\r\n                    result[ea[i]] = e[ea[i]];\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n\r\n    /**\r\n# Group\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeGroup()\r\n\r\n## Purpose\r\n\r\n* associates entity objects with a cell object, for stamping/compiling the &lt;canvas&gt; scene\r\n* groups Entity objects for specific purposes\r\n* (with collisions extension) plays a key role in collision detection between Entitys\r\n\r\n## Access\r\n\r\n* scrawl.group.GROUPNAME - for the Group object\r\n* scrawl.cell[scrawl.group.GROUPNAME.cell] - for the Group object's default Cell object\r\n\r\n@class Group\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Group = function(items) {\r\n        var get = my.xtGet,\r\n            pu = my.pushUnique;\r\n        items = my.safeObject(items);\r\n        my.Base.call(this, items);\r\n        /**\r\nArray of SPRITENAME Strings of entitys that comprise this Group\r\n@property entitys\r\n@type Array\r\n@default []\r\n**/\r\n        this.entitys = (my.xt(items.entitys)) ? [].concat(items.entitys) : [];\r\n        /**\r\nCELLNAME of the default Cell object to which this group is associated\r\n@property cell\r\n@type String\r\n@default ''\r\n**/\r\n        this.cell = items.cell || my.pad[my.work.currentPad].current;\r\n        /**\r\nGroup order value - lower order Groups are drawn on &lt;canvas&gt; elements before higher order Groups\r\n@property order\r\n@type Number\r\n@default 0\r\n**/\r\n        this.order = get(items.order, 0);\r\n        /**\r\nResort flag\r\n@property resort\r\n@type Boolean\r\n@default false\r\n@private\r\n**/\r\n        this.resort = true;\r\n        /**\r\nVisibility flag - Group entitys will (in general) not be drawn on a &lt;canvas&gt; element when this flag is set to false\r\n@property visibility\r\n@type Boolean\r\n@default true\r\n**/\r\n        this.visibility = get(items.visibility, true);\r\n        /**\r\nSorting flag - when set to true, Groups will sort their constituent entity object according to their entity.order attribute for each iteration of the display cycle\r\n@property entitySort\r\n@type Boolean\r\n@default true\r\n**/\r\n        this.entitySort = get(items.entitySort, true);\r\n        /**\r\nCollision checking radius, in pixels - as a first step in a collision check, the Group will winnow potential collisions according to how close the checked entity is to the current reference entity or mouse coordinate; when set to 0, this collision check step is skipped and all entitys move on to the next step\r\n@property regionRadius\r\n@type Number\r\n@default 0\r\n**/\r\n        this.regionRadius = get(items.regionRadius, 0);\r\n        my.group[this.name] = this;\r\n        pu(my.groupnames, this.name);\r\n        pu(my.cell[this.cell].groups, this.name);\r\n        return this;\r\n    };\r\n    my.Group.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Group'\r\n@final\r\n**/\r\n    my.Group.prototype.type = 'Group';\r\n    my.Group.prototype.classname = 'groupnames';\r\n    my.work.d.Group = {\r\n        entitys: [],\r\n        cell: '',\r\n        order: 0,\r\n        visibility: true,\r\n        entitySort: true,\r\n        resort: false,\r\n        regionRadius: 0\r\n    };\r\n    my.mergeInto(my.work.d.Group, my.work.d.Base);\r\n    /**\r\nset\r\n@method set\r\n@param {Object} items Object containing attribute key:value pairs\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.set = function(items) {\r\n        my.Base.prototype.set.call(this, items);\r\n        if (my.xt(items.order)) {\r\n            my.cell[this.cell].sortGroups = true;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nEntity sorting routine - entitys are sorted according to their entity.order attribute value, in ascending order\r\n\r\nOrder values are treated as integers. The sort routine is a form of bucket sort, and should be stable (entitys with equal order values should not be swapped)\r\n@method sortEntitys\r\n@param {Boolean} [force] Force a resort, whatever the settings of the group's entitySort and resort attributes\r\n@return Nothing\r\n@private\r\n**/\r\n    my.Group.prototype.sortEntitys = function(force) {\r\n        if (force || (this.entitySort && this.resort)) {\r\n            this.resort = false;\r\n            this.entitys = my.bucketSort('entity', 'order', this.entitys);\r\n        }\r\n    };\r\n    /**\r\nTell the Group to ask _all_ of its constituent entitys to draw themselves on a &lt;canvas&gt; element, regardless of their visibility\r\n@method forceStamp\r\n@param {String} [method] Drawing method String\r\n@param {String} [cellname] CELLNAME of cell on which entitys are to draw themselves\r\n@param {Object} [cell] cell wrapper object\r\n@param {Vector} [mouse] coordinates to be used for any entity currently pivoted to a mouse/touch event\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.forceStamp = function(method, cellname, cell, mouse) {\r\n        var visibility = this.visibility;\r\n        this.visibility = true;\r\n        this.stamp(method, cellname, cell, mouse);\r\n        this.visibility = visibility;\r\n        return this;\r\n    };\r\n    /**\r\nTell the Group to ask its constituent entitys to draw themselves on a &lt;canvas&gt; element; only entitys whose visibility attribute is set to true will comply\r\n@method stamp\r\n@param {String} [method] Drawing method String\r\n@param {String} [cellname] CELLNAME of cell on which entitys are to draw themselves\r\n@param {Object} [cell] cell wrapper object\r\n@param {Vector} [mouse] coordinates to be used for any entity currently pivoted to a mouse/touch event\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.stamp = function(method, cellname, cell, mouse) {\r\n        var entity,\r\n            entitys,\r\n            e = my.entity,\r\n            i,\r\n            iz;\r\n        if (this.visibility) {\r\n            this.sortEntitys();\r\n            entitys = this.entitys;\r\n            cell = (my.xt(cell)) ? cell : my.cell[cellname];\r\n            for (i = 0, iz = entitys.length; i < iz; i++) {\r\n                entity = e[entitys[i]];\r\n                if (entity) {\r\n                    entity.group = this.name;\r\n                    entity.stamp(method, cellname, cell, mouse);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdd entitys to the Group\r\n@method addEntitysToGroup\r\n@param {Array} item Array of SPRITENAME Strings; alternatively, a single SPRITENAME String can be supplied as the argument\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.addEntitysToGroup = function() {\r\n        var slice = [],\r\n            pu = my.pushUnique,\r\n            entitys = this.entitys,\r\n            i,\r\n            iz,\r\n            e,\r\n            xt = my.xt;\r\n        for (i = 0, iz = arguments.length; i < iz; i++) {\r\n            if (xt(arguments[i])) {\r\n                if (Array.isArray(arguments[i])) {\r\n                    slice = slice.concat(arguments[i]);\r\n                }\r\n                else if (Array.isArray(arguments[i][0])) {\r\n                    slice = slice.concat(arguments[i][0]);\r\n                }\r\n                else {\r\n                    slice.push(arguments[i]);\r\n                }\r\n            }\r\n        }\r\n        for (i = 0, iz = slice.length; i < iz; i++) {\r\n            e = slice[i];\r\n            if (my.xt(e)) {\r\n                if (e.substring) {\r\n                    pu(entitys, e);\r\n                }\r\n                else {\r\n                    if (my.xt(e.name)) {\r\n                        pu(entitys, e.name);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.resort = true;\r\n        return this;\r\n    };\r\n    /**\r\nRemove entitys from the Group\r\n@method removeEntitysFromGroup\r\n@param {Array} item Array of SPRITENAME Strings; alternatively, a single SPRITENAME String can be supplied as the argument\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.removeEntitysFromGroup = function() {\r\n        var slice = [],\r\n            ri = my.removeItem,\r\n            entitys = this.entitys,\r\n            i,\r\n            iz,\r\n            e,\r\n            xt = my.xt;\r\n        for (i = 0, iz = arguments.length; i < iz; i++) {\r\n            if (xt(arguments[i])) {\r\n                if (Array.isArray(arguments[i])) {\r\n                    slice = slice.concat(arguments[i]);\r\n                }\r\n                else if (Array.isArray(arguments[i][0])) {\r\n                    slice = slice.concat(arguments[i][0]);\r\n                }\r\n                else {\r\n                    slice.push(arguments[i]);\r\n                }\r\n            }\r\n        }\r\n        for (i = 0, iz = slice.length; i < iz; i++) {\r\n            e = slice[i];\r\n            if (my.xt(e)) {\r\n                if (e.substring) {\r\n                    ri(entitys, e);\r\n                }\r\n                else {\r\n                    if (my.xt(e.name)) {\r\n                        ri(entitys, e.name);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.resort = true;\r\n        return this;\r\n    };\r\n    /**\r\nAsk all entitys in the Group to perform a setDelta() operation\r\n\r\nstart delta coordinates can be supplied in the form of __x__ and __y__ attributes in the argument object, in addition to the more normal __startX__ and __startY__ attributes\r\n\r\n@method updateEntitysBy\r\n@param {Object} items Object containing attribute key:value pairs\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.updateEntitysBy = function(items) {\r\n        var entitys = this.entitys,\r\n            entity = my.entity,\r\n            xt = my.xt,\r\n            i,\r\n            iz;\r\n        items = my.safeObject(items);\r\n        if (xt(items.x)) {\r\n            items.startX = items.x;\r\n        }\r\n        if (xt(items.y)) {\r\n            items.startY = items.y;\r\n        }\r\n        for (i = 0, iz = entitys.length; i < iz; i++) {\r\n            entity[entitys[i]].setDelta(items);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAsk all entitys in the Group to perform a set() operation\r\n@method setEntitysTo\r\n@param {Object} items Object containing attribute key:value pairs\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.setEntitysTo = function(items) {\r\n        var entitys = this.entitys,\r\n            i,\r\n            iz;\r\n        for (i = 0, iz = entitys.length; i < iz; i++) {\r\n            my.entity[entitys[i]].set(items);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRequire all entitys in the Group to set their pivot attribute to the supplied POINTNAME or SPRITENAME string, and set their handle Vector to reflect the current vector between that entity or Point object's start Vector and their own Vector\r\n\r\nThis has the effect of turning a set of disparate entitys into a single, coordinated group.\r\n@method pivotEntitysTo\r\n@param {String} item SPRITENAME or POINTNAME String\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.pivotEntitysTo = function(item) {\r\n        var pivot,\r\n            pivotVector,\r\n            entity,\r\n            entitys = this.entitys,\r\n            e = my.entity,\r\n            entityVector,\r\n            v = my.work.v,\r\n            i,\r\n            iz,\r\n            arg = {\r\n                pivot: 0,\r\n                handleX: 0,\r\n                handleY: 0\r\n            };\r\n        item = (item.substring) ? item : false;\r\n        if (item) {\r\n            pivot = e[item] || my.point[item] || false;\r\n            if (pivot) {\r\n                pivotVector = (pivot.type === 'Point') ? pivot.local : pivot.start;\r\n                for (i = 0, iz = entitys.length; i < iz; i++) {\r\n                    entity = e[entitys[i]];\r\n                    entityVector = v.set(entity.start);\r\n                    entityVector.vectorSubtract(pivotVector);\r\n                    arg.pivot = item;\r\n                    arg.handleX = -entityVector.x;\r\n                    arg.handleY = -entityVector.y;\r\n                    entity.set(arg);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nCheck all entitys in the Group to see if they are colliding with the supplied coordinate. The check is done in reverse order after the entitys have been sorted; the entity Object with the highest order value that is colliding with the coordinate is returned\r\n@method getEntityAt\r\n@param {Vector} items Coordinate vector; alternatively an Object with x and y attributes can be used\r\n@return Entity object, or false if no entitys are colliding with the coordinate\r\n**/\r\n    my.Group.prototype.getEntityAt = function(items) {\r\n        var entity,\r\n            v1 = my.work.colv1,\r\n            v2 = my.work.colv2,\r\n            entitys = this.entitys,\r\n            e = my.entity,\r\n            rad = this.regionRadius,\r\n            coordinate,\r\n            i;\r\n        items = my.safeObject(items);\r\n        coordinate = v1.set(items); //coordinate = my.work.colv1\r\n        coordinate = my.Position.prototype.correctCoordinates(coordinate, this.cell); //coordinate = my.work.v\r\n        this.sortEntitys();\r\n        for (i = entitys.length - 1; i >= 0; i--) {\r\n            entity = e[entitys[i]];\r\n            if (rad) {\r\n                v2.set(entity.currentStart).vectorSubtract(coordinate);\r\n                if (v2.getMagnitude() > rad) {\r\n                    continue;\r\n                }\r\n            }\r\n            if (entity.checkHit(coordinate)) {\r\n                return entity;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nCheck all entitys in the Group to see which one(s) are associated with a particular mouse index\r\n@method getEntitysByMouseIndex\r\n@param {String} item Mouse index string\r\n@return Array of Entity objects\r\n**/\r\n    my.Group.prototype.getEntitysByMouseIndex = function(item) {\r\n        var result = [],\r\n            entitys = this.entitys,\r\n            e = my.entity,\r\n            i, iz,\r\n            entity;\r\n        if (item.substring) {\r\n            for (i = 0, iz = entitys.length; i < iz; i++) {\r\n                entity = e[entitys[i]];\r\n                if (entity.mouseIndex === item) {\r\n                    result.push(entity);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\nCheck all entitys in the Group to see if they are colliding with the supplied coordinate. The check is done in reverse order after the entitys have been sorted; all entitys (in the group) colliding with the coordinate are returned as an array of entity objects\r\n@method getAllEntitysAt\r\n@param {Vector} items Coordinate vector; alternatively an Object with x and y attributes can be used\r\n@return Array of Entity objects\r\n**/\r\n    my.Group.prototype.getAllEntitysAt = function(items) {\r\n        var entity,\r\n            v1 = my.work.colv1,\r\n            v2 = my.work.colv2,\r\n            coordinate,\r\n            results,\r\n            entitys = this.entitys,\r\n            e = my.entity,\r\n            rad = this.regionRadius,\r\n            i;\r\n        items = my.safeObject(items);\r\n        coordinate = v1.set(items); //coordinate = my.work.colv1\r\n        results = [];\r\n        coordinate = my.Position.prototype.correctCoordinates(coordinate, this.cell); //coordinate = my.work.v\r\n        this.sortEntitys();\r\n        for (i = entitys.length - 1; i >= 0; i--) {\r\n            entity = e[entitys[i]];\r\n            if (rad) {\r\n                v2.set(entity.currentStart).vectorSubtract(coordinate);\r\n                if (v2.getMagnitude() > rad) {\r\n                    continue;\r\n                }\r\n            }\r\n            if (entity.checkHit(coordinate)) {\r\n                results.push(entity);\r\n            }\r\n        }\r\n        return (results.length > 0) ? results : false;\r\n    };\r\n    /**\r\nAugments Group.set()\r\n@method setDirtyStarts\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Group.prototype.setDirtyStarts = function() {\r\n        var entity = my.entity,\r\n            entitys = this.entitys,\r\n            e,\r\n            i, iz,\r\n            xt = my.xt;\r\n        for (i = 0, iz = entitys.length; i < iz; i++) {\r\n            e = entity[entitys[i]];\r\n            if (xt(e)) {\r\n                e.currentStart.flag = false;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Group.set()\r\n@method setDirtyHandles\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Group.prototype.setDirtyHandles = function() {\r\n        var entity = my.entity,\r\n            entitys = this.entitys,\r\n            e,\r\n            i, iz,\r\n            xt = my.xt;\r\n        for (i = 0, iz = entitys.length; i < iz; i++) {\r\n            e = entity[entitys[i]];\r\n            if (xt(e)) {\r\n                e.currentHandle.flag = false;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n# Entity\r\n\r\n## Instantiation\r\n\r\n* This object should never be instantiated by users\r\n\r\n## Purpose\r\n\r\n* Supplies the common methodology for all Scrawl entitys: Phrase, Block, Wheel, Picture, Path, Shape\r\n* Sets up the attributes for holding a entity's current state: position, visibility, rotation, drawing order, context\r\n* Describes how entitys should be stamped onto a Cell's canvas\r\n* Provides drag-and-drop functionality\r\n\r\n__Scrawl core does not include any entity type constructors.__ Each entity type used on a web page canvas needs to be added to the core by loading its associated extension:\r\n\r\n* __Block__ entitys are defined in the _scrawlBlock_ extension (alias: block)\r\n* __Wheel__ entitys are defined in the _scrawlWheel_ extension (alias: wheel)\r\n* __Phrase__ entitys are defined in the _scrawlPhrase_ extension (alias: phrase)\r\n* __Picture__ entitys are defined as part of the _scrawlImages_ extension (alias: images)\r\n* __Path__ entitys are defined in the _scrawlPath_ extension (alias: path)\r\n* __Shape__ entitys are defined in the _scrawlShape_ extension (alias: shape)\r\n* additional factory functions for defining common Path and Shape objects (lines, curves, ovals, triangles, stars, etc) are supplied by the _scrawlPathFactories_ extension (alias: factories)\r\n\r\n@class Entity\r\n@constructor\r\n@extends Position\r\n@uses Context\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Entity = function(items) {\r\n        var get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        my.Position.call(this, items);\r\n        items.name = this.name;\r\n        var myContext = my.makeContext(items);\r\n        /**\r\nCTXNAME of this Entity's Context object\r\n@property context\r\n@type String\r\n@default ''\r\n@private\r\n**/\r\n        this.context = myContext.name;\r\n        /**\r\nGROUPNAME String for this entity's default group\r\n\r\n_Note: a entity can belong to more than one group by being added to other Group objects via the __scrawl.addEntitysToGroups()__ and __Group.addEntityToGroup()__ functions_\r\n@property group\r\n@type String\r\n@default ''\r\n**/\r\n        this.group = this.getGroup(items);\r\n        /**\r\nDisplay cycle flag; if set to true, entity will not change the &lt;canvas&gt; element's context engine's settings before drawing itself on the cell\r\n@property fastStamp\r\n@type Boolean\r\n@default false\r\n**/\r\n        this.fastStamp = get(items.fastStamp, false);\r\n        /**\r\nScaling flag; set to true to ensure lineWidth scales in line with the scale attribute value\r\n@property scaleOutline\r\n@type Boolean\r\n@default true\r\n**/\r\n        this.scaleOutline = get(items.scaleOutline, true);\r\n        /**\r\nEntity order value - lower order entitys are drawn on &lt;canvas&gt; elements before higher order entitys\r\n@property order\r\n@type Number\r\n@default 0\r\n**/\r\n        this.order = get(items.order, 0);\r\n        /**\r\nVisibility flag - entitys will (in general) not be drawn on a &lt;canvas&gt; element when this flag is set to false\r\n@property visibility\r\n@type Boolean\r\n@default true\r\n**/\r\n        this.visibility = get(items.visibility, true);\r\n        /**\r\nEntity drawing method. An entity can be drawn onto a &lt;canvas&gt; element in a variety of ways; these methods include:\r\n\r\n* 'draw' - stroke the entity's path with the entity's strokeStyle color, pattern or gradient\r\n* 'fill' - fill the entity's path with the entity's fillStyle color, pattern or gradient\r\n* 'drawFill' - stroke, and then fill, the entity's path; if a shadow offset is present, the shadow is added only to the stroke action\r\n* 'fillDraw' - fill, and then stroke, the entity's path; if a shadow offset is present, the shadow is added only to the fill action\r\n* 'floatOver' - stroke, and then fill, the entity's path; shadow offset is added to both actions\r\n* 'sinkInto' - fill, and then stroke, the entity's path; shadow offset is added to both actions\r\n* 'clear' - fill the entity's path with transparent color 'rgba(0, 0, 0, 0)'\r\n* 'clearWithBackground' - fill the entity's path with the Cell's current backgroundColor\r\n* 'clip' - clip the drawing zone to the entity's path (not tested)\r\n* 'none' - perform all necessary updates, but do not draw the entity onto the canvas\r\n\r\n_Note: not all entitys support all of these operations_\r\n@property method\r\n@type String\r\n@default 'fill'\r\n**/\r\n        this.method = get(items.method, my.work.d[this.type].method);\r\n        this.collisionsEntityConstructor(items);\r\n        this.filtersEntityInit(items);\r\n        return this;\r\n    };\r\n    my.Entity.prototype = Object.create(my.Position.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Entity'\r\n@final\r\n**/\r\n    my.Entity.prototype.type = 'Entity';\r\n    my.Entity.prototype.classname = 'entitynames';\r\n    my.work.d.Entity = {\r\n        order: 0,\r\n        visibility: true,\r\n        method: 'fill',\r\n        /**\r\nCurrent SVGTiny data string for the entity (only supported by Path and Shape entitys)\r\n@property data\r\n@type String\r\n@default ''\r\n**/\r\n        data: '',\r\n        /**\r\nEntity radius, in pixels - not supported by all entity objects\r\n@property radius\r\n@type Number\r\n@default 0\r\n**/\r\n        radius: 0,\r\n        scaleOutline: true,\r\n        fastStamp: false,\r\n        context: '',\r\n        group: ''\r\n    };\r\n    my.mergeInto(my.work.d.Entity, my.work.d.Position);\r\n    /**\r\nEntity constructor hook function - modified by filters extension\r\n@method filtersEntityInit\r\n@private\r\n**/\r\n    my.Entity.prototype.filtersEntityInit = function(items) {};\r\n    /**\r\nEntity constructor hook function - modified by collisions extension\r\n@method collisionsEntityConstructor\r\n@private\r\n**/\r\n    my.Entity.prototype.collisionsEntityConstructor = function(items) {};\r\n    /**\r\nConstructor helper function - register entity object in the scrawl library\r\n@method registerInLibrary\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.registerInLibrary = function(items) {\r\n        my.entity[this.name] = this;\r\n        my.pushUnique(my.entitynames, this.name);\r\n        my.group[this.group].addEntitysToGroup(this.name);\r\n        this.collisionsEntityRegisterInLibrary(items);\r\n        return this;\r\n    };\r\n    /**\r\nEntity.registerInLibrary hook function - modified by collisions extension\r\n@method collisionsEntityRegisterInLibrary\r\n@private\r\n**/\r\n    my.Entity.prototype.collisionsEntityRegisterInLibrary = function() {};\r\n    /**\r\nAugments Position.get()\r\n\r\nAllows users to retrieve a entity's Context object's values via the entity\r\n@method get\r\n@param {String} item attribute key string\r\n@return Attribute value\r\n**/\r\n    my.Entity.prototype.get = function(item) {\r\n        var xt = my.xt,\r\n            d = my.work.d;\r\n        if (xt(d.Base[item])) {\r\n            return my.Base.prototype.get.call(this, item);\r\n        }\r\n        if (xt(d.Context[item])) {\r\n            return my.ctx[this.context].get(item);\r\n        }\r\n        return my.Position.prototype.get.call(this, item);\r\n    };\r\n    /**\r\nAugments Position.set()\r\n\r\nAllows users to:\r\n* set a entity's Context object's values via the entity\r\n* shift a entity between groups\r\n@method set\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Entity.prototype.set = function(items) {\r\n        var group = my.group,\r\n            xt = my.xt,\r\n            xto = my.xto;\r\n        my.Position.prototype.set.call(this, items);\r\n        my.ctx[this.context].set(items);\r\n        items = my.safeObject(items);\r\n        if (xt(items.group) && items.group !== this.group) {\r\n            group[this.group].removeEntitysFromGroup(this.name);\r\n            this.group = this.getGroup(items.group);\r\n            group[this.group].addEntitysToGroup(this.name);\r\n        }\r\n        this.collisionsEntitySet(items);\r\n        if (xt(items.order)) {\r\n            group[this.group].resort = true;\r\n        }\r\n        if (xt(items.lineWidth)) {\r\n            this.maxDimensions.flag = true;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nEntity.set hook function - modified by collisions extension\r\n@method collisionsEntitySet\r\n@private\r\n**/\r\n    my.Entity.prototype.collisionsEntitySet = function() {};\r\n    /**\r\nAdds the value of each attribute supplied in the argument to existing values; only Number attributes can be amended using this function\r\n\r\nAllows users to amend a entity's Context object's values via the entity, in addition to its own attribute values\r\n@method setDelta\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Entity.prototype.setDelta = function(items) {\r\n        my.Position.prototype.setDelta.call(this, items);\r\n        items = my.safeObject(items);\r\n        if (my.xto(items.lineDashOffset, items.lineWidth, items.globalAlpha)) {\r\n            my.ctx[this.context].setDelta(items);\r\n            if (my.xt(items.lineWidth)) {\r\n                this.maxDimensions.flag = true;\r\n            }\r\n        }\r\n        this.collisionsEntitySetDelta(items);\r\n        return this;\r\n    };\r\n    /**\r\nEntity.setDelta hook function - modified by collisions extension\r\n@method collisionsEntitySetDelta\r\n@private\r\n**/\r\n    my.Entity.prototype.collisionsEntitySetDelta = function() {};\r\n    /**\r\nAugments Position.clone()\r\n@method clone\r\n@param {Object} items Object consisting of key:value attributes, used to update the clone's attributes with new values\r\n@return Cloned object\r\n@chainable\r\n**/\r\n    my.Entity.prototype.clone = function(items) {\r\n        var context,\r\n            enhancedItems,\r\n            clone,\r\n            i, iz;\r\n        items = my.safeObject(items);\r\n\r\n        context = JSON.parse(JSON.stringify(my.ctx[this.context]));\r\n        delete context.name;\r\n        enhancedItems = my.mergeInto(items, context);\r\n        delete enhancedItems.context;\r\n        clone = my.Position.prototype.clone.call(this, enhancedItems);\r\n        if (my.xt(items.createNewContext) && !items.createNewContext) {\r\n            delete my.ctx[clone.context];\r\n            my.removeItem(my.ctxnames, clone.context);\r\n            clone.context = this.context;\r\n        }\r\n        return clone;\r\n    };\r\n    /**\r\nConstructor helper function - discover this entity's default group affiliation\r\n@method getGroup\r\n@param {Object} [items] Constructor argument\r\n@return GROUPNAME String\r\n@private\r\n**/\r\n    my.Entity.prototype.getGroup = function(items) {\r\n        items = my.safeObject(items);\r\n        if (my.xt(items.group) && my.group[items.group]) {\r\n            return items.group;\r\n        }\r\n        else {\r\n            return my.pad[my.work.currentPad].current;\r\n        }\r\n    };\r\n    /**\r\nHelper function - get a entity's cell onbject\r\n@method getEntityCell\r\n@return Cell object\r\n@private\r\n**/\r\n    my.Entity.prototype.getEntityCell = function(items) {\r\n        return my.cell[my.group[this.getGroup(items)].cell];\r\n    };\r\n    /**\r\nStamp function - instruct entity to draw itself on a Cell's &lt;canvas&gt; element, regardless of the setting of its visibility attribute\r\n\r\nPermitted methods include:\r\n\r\n* 'draw' - stroke the entity's path with the entity's strokeStyle color, pattern or gradient\r\n* 'fill' - fill the entity's path with the entity's fillStyle color, pattern or gradient\r\n* 'drawFill' - stroke, and then fill, the entity's path; if a shadow offset is present, the shadow is added only to the stroke action\r\n* 'fillDraw' - fill, and then stroke, the entity's path; if a shadow offset is present, the shadow is added only to the fill action\r\n* 'floatOver' - stroke, and then fill, the entity's path; shadow offset is added to both actions\r\n* 'sinkInto' - fill, and then stroke, the entity's path; shadow offset is added to both actions\r\n* 'clear' - fill the entity's path with transparent color 'rgba(0, 0, 0, 0)'\r\n* 'clearWithBackground' - fill the entity's path with the Cell's current backgroundColor\r\n* 'clip' - clip the drawing zone to the entity's path (not tested)\r\n* 'none' - perform all necessary updates, but do not draw the entity onto the canvas\r\n@method forceStamp\r\n@param {String} [method] Permitted method attribute String; by default, will use entity's own method setting\r\n@param {String} [cellname] CELLNAME of cell on which entitys are to draw themselves\r\n@param {Object} [cell] cell wrapper object\r\n@param {Vector} [mouse] coordinates to be used for any entity currently pivoted to a mouse/touch event\r\n@return This\r\n@chainable\r\n**/\r\n    my.Entity.prototype.forceStamp = function(method, cellname, cell, mouse) {\r\n        var visibility = this.visibility;\r\n        this.visibility = true;\r\n        this.stamp(method, cellname, cell, mouse);\r\n        this.visibility = visibility;\r\n        return this;\r\n    };\r\n    /**\r\nStamp function - instruct entity to draw itself on a Cell's &lt;canvas&gt; element, if its visibility attribute is true\r\n\r\nPermitted methods include:\r\n\r\n* 'draw' - stroke the entity's path with the entity's strokeStyle color, pattern or gradient\r\n* 'fill' - fill the entity's path with the entity's fillStyle color, pattern or gradient\r\n* 'drawFill' - stroke, and then fill, the entity's path; if a shadow offset is present, the shadow is added only to the stroke action\r\n* 'fillDraw' - fill, and then stroke, the entity's path; if a shadow offset is present, the shadow is added only to the fill action\r\n* 'floatOver' - stroke, and then fill, the entity's path; shadow offset is added to both actions\r\n* 'sinkInto' - fill, and then stroke, the entity's path; shadow offset is added to both actions\r\n* 'clear' - fill the entity's path with transparent color 'rgba(0, 0, 0, 0)'\r\n* 'clearWithBackground' - fill the entity's path with the Cell's current backgroundColor\r\n* 'clip' - clip the drawing zone to the entity's path (not tested)\r\n* 'none' - perform all necessary updates, but do not draw the entity onto the canvas\r\n@method stamp\r\n@param {String} [method] Permitted method attribute String; by default, will use entity's own method setting\r\n@param {String} [cellname] CELLNAME of cell on which entitys are to draw themselves\r\n@param {Object} [cell] cell wrapper object\r\n@param {Vector} [mouse] coordinates to be used for any entity currently pivoted to a mouse/touch event\r\n@return This\r\n@chainable\r\n**/\r\n    my.Entity.prototype.stamp = function(method, cellname, cell, mouse) {\r\n        var engine,\r\n            cellCtx,\r\n            eCtx,\r\n            here,\r\n            sCanvas,\r\n            sEngine,\r\n            sFlag = !this.currentStart.flag,\r\n            hFlag = !this.currentHandle.flag,\r\n            data;\r\n        if (this.visibility) {\r\n            if (!cell) {\r\n                cell = my.cell[cellname] || my.cell[my.group[this.group].cell];\r\n                cellname = cell.name;\r\n            }\r\n            engine = my.context[cellname];\r\n            method = method || this.method;\r\n            if (sFlag || hFlag) {\r\n                if (sFlag) {\r\n                    this.updateCurrentStart(cell);\r\n                }\r\n                if (hFlag) {\r\n                    this.updateCurrentHandle();\r\n                }\r\n                this.resetCollisionPoints();\r\n            }\r\n            if (this.pivot) {\r\n                this.setStampUsingPivot(cellname, mouse);\r\n                this.maxDimensions.flag = true;\r\n            }\r\n            else {\r\n                this.pathStamp();\r\n            }\r\n            this[method](engine, cellname, cell);\r\n            this.stampFilter(engine, cellname, cell);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nstamp helper function - amended by collisions extension\r\n@method resetCollisionPoints\r\n@return this\r\n@chainable\r\n**/\r\n    my.Entity.prototype.resetCollisionPoints = function() {};\r\n    /**\r\nEntity.stamp hook function - modified by path extension\r\n@method pathStamp\r\n@private\r\n**/\r\n    my.Entity.prototype.pathStamp = function() {};\r\n    /**\r\nEntity.stamp hook function - modified by filters extension\r\n@method stampFilter\r\n@private\r\n**/\r\n    my.Entity.prototype.stampFilter = function() {};\r\n    my.Entity.prototype.stampFilterDimensionsActions = {};\r\n    /**\r\nStamp helper function - rotate and position canvas ready for drawing entity\r\n@method rotateCell\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell Cell name\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.rotateCell = function(ctx, cell) {\r\n        var reverse = (this.flipReverse) ? -1 : 1,\r\n            upend = (this.flipUpend) ? -1 : 1,\r\n            rotation = (this.addPathRoll) ? this.roll + this.pathRoll : this.roll,\r\n            cos,\r\n            sin,\r\n            start = this.currentStart;\r\n        if (rotation) {\r\n            rotation *= 0.01745329251;\r\n            cos = Math.cos(rotation);\r\n            sin = Math.sin(rotation);\r\n            ctx.setTransform((cos * reverse), (sin * reverse), (-sin * upend), (cos * upend), start.x, start.y);\r\n            return this;\r\n        }\r\n        ctx.setTransform(reverse, 0, 0, upend, start.x, start.y);\r\n        return this;\r\n    };\r\n    /**\r\nEntity.getStartValues\r\n@method getStartValues\r\n@private\r\n**/\r\n    my.Entity.prototype.getStartValues = function() {\r\n        var start = this.currentStart;\r\n        return {\r\n            x: start.x,\r\n            y: start.y\r\n        };\r\n    };\r\n    /**\r\nEntity.getHandleValues\r\n@method getHandleValues\r\n@private\r\n**/\r\n    my.Entity.prototype.getHandleValues = function() {\r\n        var handle = this.currentHandle;\r\n        return {\r\n            x: handle.x,\r\n            y: handle.y\r\n        };\r\n    };\r\n    /**\r\nEntity.getStart\r\n@method getStart\r\n**/\r\n    my.Entity.prototype.getStart = function() {\r\n        var start = my.work.v.set(this.currentStart).vectorAdd(this.currentHandle);\r\n        return {\r\n            x: start.x,\r\n            y: start.y\r\n        };\r\n    };\r\n    /**\r\nStamp helper function - perform a 'clear' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method clear\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.clear = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'clearWithBackground' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method clearWithBackground\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.clearWithBackground = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'draw' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method draw\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.draw = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'fill' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method fill\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.fill = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'drawFill' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method drawFill\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.drawFill = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'fillDraw' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method fillDraw\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.fillDraw = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'sinkInto' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method sinkInto\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.sinkInto = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'floatOver' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method floatOver\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.floatOver = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'clip' method draw\r\n\r\n_Note: not supported by this entity_\r\n@method clip\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.clip = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'none' method draw. This involves setting the &lt;canvas&gt; element's context engine's values with this entity's context values, but not defining or drawing the entity on the canvas.\r\n@method none\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cellname CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} cell scrawl Cell object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.none = function(ctx, cellname, cell) {\r\n        cell.setEngine(this);\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - clear shadow parameters during a multi draw operation (drawFill and fillDraw methods)\r\n@method clearShadow\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.clearShadow = function(ctx, cell) {\r\n        var context = my.ctx[this.context];\r\n        if (context.shadowOffsetX || context.shadowOffsetY || context.shadowBlur) {\r\n            cell.clearShadow(ctx);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - clear shadow parameters during a multi draw operation (Phrase text-along-path drawFill and fillDraw methods)\r\n@method restoreShadow\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Entity.prototype.restoreShadow = function(ctx, cell) {\r\n        var context = my.ctx[this.context];\r\n        if (context.shadowOffsetX || context.shadowOffsetY || context.shadowBlur) {\r\n            cell.restoreShadow(ctx, this.context);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nSet entity's pivot to 'mouse'; set handles to supplied Vector value; set order to +9999\r\n@method pickupEntity\r\n@param {Vector} items Coordinate vector; alternatively an object with {x, y} attributes can be used\r\n@return This\r\n@chainable\r\n**/\r\n    my.Entity.prototype.pickupEntity = function(items) {\r\n        var cell,\r\n            coordinate;\r\n        items = my.safeObject(items);\r\n        coordinate = my.work.v.set(items);\r\n        cell = my.cell[my.group[this.group].cell];\r\n        coordinate = this.correctCoordinates(coordinate, cell);\r\n        this.oldX = coordinate.x || 0;\r\n        this.oldY = coordinate.y || 0;\r\n        this.oldPivot = this.pivot;\r\n        this.mouseIndex = my.xtGet(items.id || 'mouse');\r\n        this.pivot = 'mouse';\r\n        this.currentPivotIndex = false;\r\n        this.order += 9999;\r\n        my.group[this.group].resort = true;\r\n        return this;\r\n    };\r\n    /**\r\nRevert pickupEntity() actions, ensuring entity is left where the user drops it\r\n@method dropEntity\r\n@param {String} [items] Alternative pivot String\r\n@return This\r\n@chainable\r\n**/\r\n    my.Entity.prototype.dropEntity = function(item) {\r\n        this.pivot = my.xtGet(item, this.oldPivot, null);\r\n        this.currentPivotIndex = false;\r\n        this.order = (this.order >= 9999) ? this.order - 9999 : 0;\r\n        delete this.oldPivot;\r\n        delete this.oldX;\r\n        delete this.oldY;\r\n        this.mouseIndex = 'mouse';\r\n        my.group[this.group].resort = true;\r\n        this.start.x = this.currentStart.x;\r\n        this.start.y = this.currentStart.y;\r\n        this.currentHandle.flag = false;\r\n        if (this.setPaste) {\r\n            this.setPaste();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nCheck Cell coordinates to see if any of them fall within this entity's path - uses JavaScript's _isPointInPath_ function\r\n\r\nArgument object contains the following attributes:\r\n\r\n* __tests__ - an array of Vector coordinates to be checked; alternatively can be a single Vector\r\n* __x__ - X coordinate\r\n* __y__ - Y coordinate\r\n\r\nEither the 'tests' attribute should contain a Vector, or an array of vectors, or the x and y attributes should be set to Number values\r\n@method checkHit\r\n@param {Object} items Argument object\r\n@return The first coordinate to fall within the entity's path; false if none fall within the path\r\n**/\r\n    my.Entity.prototype.checkHit = function(items) {\r\n        var tests = [],\r\n            here,\r\n            handle = this.currentHandle,\r\n            result,\r\n            i,\r\n            iz,\r\n            width,\r\n            height,\r\n            lw = this.localWidth,\r\n            lh = this.localHeight,\r\n            scale = this.scale,\r\n            cvx = my.work.cvx;\r\n        items = my.safeObject(items);\r\n        if (my.xt(items.tests)) {\r\n            tests = items.tests;\r\n        }\r\n        else {\r\n            tests.length = 0;\r\n            tests.push(items.x || 0);\r\n            tests.push(items.y || 0);\r\n        }\r\n        this.rotateCell(cvx, this.getEntityCell().name);\r\n        if (!handle.flag) {\r\n            this.updateCurrentHandle();\r\n        }\r\n        here = handle;\r\n        width = (lw) ? lw : this.width * scale;\r\n        height = (lh) ? lh : this.height * scale;\r\n        cvx.beginPath();\r\n        cvx.rect(here.x, here.y, width, height);\r\n        for (i = 0, iz = tests.length; i < iz; i += 2) {\r\n            result = cvx.isPointInPath(tests[i], tests[i + 1]);\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n        if (result) {\r\n            items.x = tests[i];\r\n            items.y = tests[i + 1];\r\n            return items;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n# Design\r\n\r\n## Instantiation\r\n\r\n* This object should never be instantiated by users\r\n\r\n## Purpose\r\n\r\n* Defines gradients and radial gradients used with entity objects' strokeStyle and fillStyle attributes\r\n\r\n@class Design\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Design = function(items) {\r\n        my.Base.call(this, items);\r\n        /**\r\nDrawing flag - when set to 'entity' (or true), will use entity-based coordinates to calculate the start and end points of the gradient; when set to 'cell' (or false - default), will use Cell-based coordinates\r\n@property lockTo\r\n@type String - or alternatively Boolean\r\n@default 'cell'\r\n**/\r\n        this.lockTo = my.xtGet(items.lockTo, my.work.d[this.type].lockTo);\r\n        return this;\r\n    };\r\n    my.Design.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Design'\r\n@final\r\n**/\r\n    my.Design.prototype.type = 'Design';\r\n    my.Design.prototype.classname = 'designnames';\r\n    my.work.d.Design = {\r\n        /**\r\nArray of JavaScript Objects representing color stop data\r\n\r\nObjects take the form {color:String, stop:Number} where:\r\n\r\n* __color__ attribute can be any legitimate CSS color string\r\n* __stop can be any number between O and 0.999999 (not 1)\r\n@property color\r\n@type Array of JavaScript objects\r\n@default [{color: 'black', stop: 0},{color: 'white', stop: 0.999999}]\r\n**/\r\n        color: [{\r\n            color: 'black',\r\n            stop: 0\r\n        }, {\r\n            color: 'white',\r\n            stop: 0.999999\r\n        }],\r\n        lockTo: 'cell',\r\n        /**\r\nDrawing flag - when set to true, force the gradient to update each drawing cycle - only required in the simplest scenes where fillStyle and strokeStyle do not change between entities\r\n@property autoUpdate\r\n@type Boolean\r\n@default false\r\n**/\r\n        autoUpdate: false,\r\n        /**\r\nCELLNAME String of &lt;canvas&gt; element context engine on which the gradient has been set\r\n@property cell\r\n@type String\r\n@default ''\r\n**/\r\n        cell: '',\r\n        /**\r\nHorizontal start coordinate, in pixels, from the top-left corner of the gradient's &lt;canvas&gt; element\r\n@property startX\r\n@type Number\r\n@default 0\r\n**/\r\n        startX: 0,\r\n        /**\r\nVertical start coordinate, in pixels, from the top-left corner of the gradient's &lt;canvas&gt; element\r\n@property startY\r\n@type Number\r\n@default 0\r\n**/\r\n        startY: 0,\r\n        /**\r\nHorizontal end coordinate, in pixels, from the top-left corner of the gradient's &lt;canvas&gt; element\r\n@property endX\r\n@type Number\r\n@default 0\r\n**/\r\n        endX: 0,\r\n        /**\r\nVertical end coordinate, in pixels, from the top-left corner of the gradient's &lt;canvas&gt; element\r\n@property endY\r\n@type Number\r\n@default 0\r\n**/\r\n        endY: 0\r\n    };\r\n    my.mergeInto(my.work.d.Design, my.work.d.Base);\r\n    /**\r\nUpdate values to Number attributes\r\n\r\nWill also accept an object containing start and end attributes, each of which can include x, y, startX, startY, r, startRadius and/or endRadius attributes\r\n\r\n@method set\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Design.prototype.set = function(items) {\r\n        var temp, x, y,\r\n            xt = my.xt,\r\n            xto = my.xto,\r\n            so = my.safeObject,\r\n            get = my.xtGet;\r\n        items = my.safeObject(items);\r\n        if (xto(items.startX, items.startY, items.startRadius, items.start)) {\r\n            temp = so(items.start);\r\n            this.startX = get(temp.x, temp.startX, items.startX, this.startX);\r\n            this.startY = get(temp.y, temp.startY, items.startY, this.startY);\r\n            this.startRadius = get(temp.r, temp.startRadius, items.startRadius, this.startRadius);\r\n        }\r\n        if (xto(items.endX, items.endY, items.endRadius, items.end)) {\r\n            temp = so(items.end);\r\n            this.endX = get(temp.x, temp.endX, items.endX, this.endX);\r\n            this.endY = get(temp.y, temp.endY, items.endY, this.endY);\r\n            this.endRadius = get(temp.r, temp.endRadius, items.endRadius, this.endRadius);\r\n        }\r\n        if (items.shift && xt(my.work.d.Design.shift)) {\r\n            this.shift = items.shift;\r\n        }\r\n        if (xt(items.autoUpdate)) {\r\n            this.autoUpdate = items.autoUpdate;\r\n        }\r\n        if (xt(items.color)) {\r\n            this.color = [].concat(items.color);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdd values to Number attributes\r\n@method setDelta\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Design.prototype.setDelta = function(items) {\r\n        var temp,\r\n            perc = my.addPercentages;\r\n        items = my.safeObject(items);\r\n        if (items.startX) {\r\n            temp = this.get('startX');\r\n            this.startX = (items.startX.substring) ? perc(temp, items.startX) : temp + items.startX;\r\n        }\r\n        if (items.startY) {\r\n            temp = this.get('startY');\r\n            this.startY = (items.startY.substring) ? perc(temp, items.startY) : temp + items.startY;\r\n        }\r\n        if (items.startRadius) {\r\n            temp = this.get('startRadius');\r\n            this.startRadius = temp + items.startRadius;\r\n        }\r\n        if (items.endX) {\r\n            temp = this.get('endX');\r\n            this.endX = (items.endX.substring) ? perc(temp, items.endX) : temp + items.endX;\r\n        }\r\n        if (items.endY) {\r\n            temp = this.get('endY');\r\n            this.endY = (items.endY.substring) ? perc(temp, items.endY) : temp + items.endY;\r\n        }\r\n        if (items.endRadius) {\r\n            temp = this.get('endRadius');\r\n            this.endRadius = temp + items.endRadius;\r\n        }\r\n        if (items.shift && my.xt(my.work.d.Design.shift)) {\r\n            temp = this.get('shift');\r\n            this.shift = temp + items.shift;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nCreates the gradient\r\n\r\n_This function is replaced by the animation extension_\r\n@method update\r\n@param {String} [entity] SPRITENAME String\r\n@param {String} [cell] CELLNAME String\r\n@return This\r\n@chainable\r\n**/\r\n    my.Design.prototype.update = function(entity, cell) {\r\n        this.makeGradient(entity, cell);\r\n        this.applyStops();\r\n        return this;\r\n    };\r\n    /**\r\nReturns &lt;canvas&gt; element's contenxt engine's gradient object, or 'rgba(0,0,0,0)' on failure\r\n@method getData\r\n@return JavaScript Gradient object, or String\r\n@private\r\n**/\r\n    my.Design.prototype.getData = function() {\r\n        return (my.xt(my.dsn[this.name])) ? my.dsn[this.name] : 'rgba(0,0,0,0)';\r\n    };\r\n    /**\r\nDesign.update() helper function - builds &lt;canvas&gt; element's contenxt engine's gradient object\r\n@method makeGradient\r\n@param {String} [entity] SPRITENAME String\r\n@param {String} [cell] CELLNAME String\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Design.prototype.makeGradient = function(entity, cell) {\r\n        var ctx,\r\n            c = my.cell,\r\n            conv,\r\n            cw,\r\n            ch,\r\n            xt = my.xt,\r\n            g,\r\n            x,\r\n            y,\r\n            sx,\r\n            sy,\r\n            sr,\r\n            ex,\r\n            ey,\r\n            er,\r\n            fsx,\r\n            fsy,\r\n            fex,\r\n            fey,\r\n            temp,\r\n            w,\r\n            h,\r\n            r,\r\n            v = my.work.v;\r\n        entity = my.entity[entity] || false;\r\n        if (xt(cell)) {\r\n            cell = (c[cell]) ? c[cell] : c[this.get('cell')];\r\n        }\r\n        else if (entity) {\r\n            cell = c[entity.group];\r\n        }\r\n        else {\r\n            cell = c[this.get('cell')];\r\n        }\r\n        ctx = my.context[cell.name];\r\n        //in all cases, the canvas origin will have been translated to the current entity's start\r\n        if (this.lockTo && this.lockTo !== 'cell') {\r\n            temp = entity.currentHandle;\r\n            switch (entity.type) {\r\n            case 'Wheel':\r\n                x = -temp.x + (entity.radius * entity.scale);\r\n                y = -temp.y + (entity.radius * entity.scale);\r\n                break;\r\n            case 'Shape':\r\n            case 'Path':\r\n                if (entity.isLine) {\r\n                    x = -temp.x;\r\n                    y = -temp.y;\r\n                }\r\n                else {\r\n                    x = -temp.x + ((entity.width / 2) * entity.scale);\r\n                    y = -temp.y + ((entity.height / 2) * entity.scale);\r\n                }\r\n                break;\r\n            default:\r\n                x = -temp.x;\r\n                y = -temp.y;\r\n            }\r\n            w = (xt(entity.localWidth)) ? entity.localWidth : entity.width * entity.scale;\r\n            h = (xt(entity.localHeight)) ? entity.localHeight : entity.height * entity.scale;\r\n            sx = (xt(this.startX)) ? this.startX : 0;\r\n            if (sx.substring) {\r\n                sx = (parseFloat(sx) / 100) * w;\r\n            }\r\n            sy = (xt(this.startY)) ? this.startY : 0;\r\n            if (sy.substring) {\r\n                sy = (parseFloat(sy) / 100) * h;\r\n            }\r\n            ex = (xt(this.endX)) ? this.endX : w;\r\n            if (ex.substring) {\r\n                ex = (parseFloat(ex) / 100) * w;\r\n            }\r\n            ey = (xt(this.endY)) ? this.endY : h;\r\n            if (ey.substring) {\r\n                ey = (parseFloat(ey) / 100) * h;\r\n            }\r\n            if (this.type === 'Gradient') {\r\n                g = ctx.createLinearGradient(sx - x, sy - y, ex - x, ey - y);\r\n            }\r\n            else {\r\n                sr = (xt(this.startRadius)) ? this.startRadius : 0;\r\n                if (sr.substring) {\r\n                    sr = (parseFloat(sr) / 100) * w;\r\n                }\r\n                er = (xt(this.endRadius)) ? this.endRadius : w;\r\n                if (er.substring) {\r\n                    er = (parseFloat(er) / 100) * w;\r\n                }\r\n                g = ctx.createRadialGradient(sx - x, sy - y, sr, ex - x, ey - y, er);\r\n            }\r\n        }\r\n        else {\r\n            conv = entity.numberConvert;\r\n            cw = cell.actualWidth;\r\n            ch = cell.actualHeight;\r\n            x = entity.start.x;\r\n            if (x.substring) {\r\n                x = conv(x, cw);\r\n            }\r\n            y = entity.start.y;\r\n            if (y.substring) {\r\n                y = conv(y, ch);\r\n            }\r\n            sx = (xt(this.startX)) ? this.startX : 0;\r\n            if (sx.substring) {\r\n                sx = conv(sx, cw);\r\n            }\r\n            sy = (xt(this.startY)) ? this.startY : 0;\r\n            if (sy.substring) {\r\n                sy = conv(sy, ch);\r\n            }\r\n            ex = (xt(this.endX)) ? this.endX : cw;\r\n            if (ex.substring) {\r\n                ex = conv(ex, cw);\r\n            }\r\n            ey = (xt(this.endY)) ? this.endY : ch;\r\n            if (ey.substring) {\r\n                ey = conv(ey, ch);\r\n            }\r\n            x = (entity.flipReverse) ? cw - x : x;\r\n            y = (entity.flipUpend) ? ch - y : y;\r\n            sx = (entity.flipReverse) ? cw - sx : sx;\r\n            sy = (entity.flipUpend) ? ch - sy : sy;\r\n            ex = (entity.flipReverse) ? cw - ex : ex;\r\n            ey = (entity.flipUpend) ? ch - ey : ey;\r\n            fsx = sx - x;\r\n            fsy = sy - y;\r\n            fex = ex - x;\r\n            fey = ey - y;\r\n            r = entity.roll;\r\n            if ((entity.flipReverse && entity.flipUpend) || (!entity.flipReverse && !entity.flipUpend)) {\r\n                r = -entity.roll;\r\n            }\r\n            if (entity.roll) {\r\n                v.set({\r\n                    x: fsx,\r\n                    y: fsy,\r\n                    z: 0\r\n                }).rotate(r);\r\n                fsx = v.x;\r\n                fsy = v.y;\r\n                v.set({\r\n                    x: fex,\r\n                    y: fey,\r\n                    z: 0\r\n                }).rotate(r);\r\n                fex = v.x;\r\n                fey = v.y;\r\n            }\r\n            if (this.type === 'Gradient') {\r\n                g = ctx.createLinearGradient(fsx, fsy, fex, fey);\r\n            }\r\n            else {\r\n                sr = (xt(this.startRadius)) ? this.startRadius : 0;\r\n                if (sr.substring) {\r\n                    sr = (parseFloat(sr) / 100) * cell.actualWidth;\r\n                }\r\n                er = (xt(this.endRadius)) ? this.endRadius : cell.actualWidth;\r\n                if (er.substring) {\r\n                    er = (parseFloat(er) / 100) * cell.actualWidth;\r\n                }\r\n                g = ctx.createRadialGradient(fsx, fsy, sr, fex, fey, er);\r\n            }\r\n        }\r\n        my.dsn[this.name] = g;\r\n        return this;\r\n    };\r\n    /**\r\nDesign.update() helper function - applies color attribute objects to the gradient\r\n@method applyStops\r\n@return This\r\n@private\r\n@chainable\r\n**/\r\n    my.Design.prototype.applyStops = function() {\r\n        var color = this.get('color'),\r\n            i,\r\n            iz,\r\n            dsn = my.dsn[this.name];\r\n        if (dsn) {\r\n            for (i = 0, iz = color.length; i < iz; i++) {\r\n                dsn.addColorStop(color[i].stop, color[i].color);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRemove this gradient from the scrawl library\r\n@method remove\r\n@return Always true\r\n**/\r\n    my.Design.prototype.remove = function() {\r\n        delete my.dsn[this.name];\r\n        delete my.design[this.name];\r\n        my.removeItem(my.designnames, this.name);\r\n        return true;\r\n    };\r\n\r\n    /**\r\n# Gradient\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeGradient()\r\n\r\n## Purpose\r\n\r\n* Defines a linear gradient\r\n* Used with entity.strokeStyle and entity.fillStyle attributes\r\n\r\n## Access\r\n\r\n* scrawl.design.GRADIENTNAME - for the Gradient object\r\n\r\n@class Gradient\r\n@constructor\r\n@extends Design\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Gradient = function(items) {\r\n        items = my.safeObject(items);\r\n        my.Design.call(this, items);\r\n        my.Base.prototype.set.call(this, items);\r\n        my.design[this.name] = this;\r\n        my.pushUnique(my.designnames, this.name);\r\n        return this;\r\n    };\r\n    my.Gradient.prototype = Object.create(my.Design.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Gradient'\r\n@final\r\n**/\r\n    my.Gradient.prototype.type = 'Gradient';\r\n    my.Gradient.prototype.classname = 'designnames';\r\n    my.work.d.Gradient = {};\r\n    my.mergeInto(my.work.d.Gradient, my.work.d.Design);\r\n\r\n    /**\r\n# RadialGradient\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeRadialGradient()\r\n\r\n## Purpose\r\n\r\n* Defines a radial gradient\r\n* Used with entity.strokeStyle and entity.fillStyle attributes\r\n\r\n## Access\r\n\r\n* scrawl.design.RADIALGRADIENTNAME - for the RadialGradient object\r\n\r\n@class RadialGradient\r\n@constructor\r\n@extends Design\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.RadialGradient = function(items) {\r\n        items = my.safeObject(items);\r\n        my.Design.call(this, items);\r\n        my.Base.prototype.set.call(this, items);\r\n        my.design[this.name] = this;\r\n        my.pushUnique(my.designnames, this.name);\r\n        return this;\r\n    };\r\n    my.RadialGradient.prototype = Object.create(my.Design.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'RadialGradient'\r\n@final\r\n**/\r\n    my.RadialGradient.prototype.type = 'RadialGradient';\r\n    my.RadialGradient.prototype.classname = 'designnames';\r\n    my.work.d.RadialGradient = {\r\n        /**\r\nStart circle radius, in pixels or percentage of entity/cell width\r\n@property startRadius\r\n@type Number (by default), or String percentage value\r\n@default 0\r\n**/\r\n        startRadius: 0,\r\n        /**\r\nEnd circle radius, in pixels or percentage of entity/cell width\r\n@property endRadius\r\n@type Number (by default), or String percentage value\r\n@default 0 (though in practice, an undefined end radius will default to the entity's width, or the cell's width)\r\n**/\r\n        endRadius: 0\r\n    };\r\n    my.mergeInto(my.work.d.RadialGradient, my.work.d.Design);\r\n\r\n    my.work.v = my.makeVector({\r\n        name: 'scrawl.v'\r\n    });\r\n    my.work.colv1 = my.makeVector({\r\n        name: 'scrawl.colv1'\r\n    });\r\n    my.work.colv2 = my.makeVector({\r\n        name: 'scrawl.colv2'\r\n    });\r\n\r\n    /**\r\nA __factory__ function to generate new Animation objects\r\n@method makeAnimation\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Animation object\r\n**/\r\n    my.makeAnimation = function(items) {\r\n        return new my.Animation(items);\r\n    };\r\n    /**\r\nAlias for makeAnimation()\r\n@method newAnimation\r\n@deprecated\r\n**/\r\n    my.newAnimation = function(items) {\r\n        return my.makeAnimation(items);\r\n    };\r\n    my.work.animate = [];\r\n    /**\r\nAnimation flag: set to false to stop animation loop\r\n@property doAnimation\r\n@type {Boolean}\r\n**/\r\n    my.work.doAnimation = false;\r\n    /**\r\nAnimation ordering flag - when set to false, the ordering of animations is skipped; default: true\r\n@property orderAnimations\r\n@type {Boolean}\r\n@default true\r\n**/\r\n    my.work.orderAnimations = true;\r\n    my.work.resortAnimations = true;\r\n    /**\r\nThe Scrawl animation loop\r\n\r\nAnimation loop is invoked automatically as part of the initialization process\r\n\r\nScrawl will run all Animation objects whose ANIMATIONNAME Strings are included in the __scrawl.animate__ Array\r\n\r\nAll animation can be halted by setting the __scrawl.doAnimation__ flag to false\r\n\r\nTo restart animation, either call __scrawl.initialize()__, or set _scrawl.doAnimation_ to true and call __scrawl.animationLoop()\r\n\r\n@method animationLoop\r\n@return Recursively calls itself - never returns\r\n**/\r\n    my.animationLoop = function() {\r\n        var i,\r\n            iz,\r\n            animate = my.work.animate,\r\n            animation = my.animation;\r\n        if (my.work.orderAnimations) {\r\n            my.sortAnimations();\r\n        }\r\n        for (i = 0, iz = animate.length; i < iz; i++) {\r\n            if (animate[i]) {\r\n                animation[animate[i]].fn();\r\n            }\r\n        }\r\n        if (my.work.doAnimation) {\r\n            window.requestAnimFrame(function() {\r\n                my.animationLoop();\r\n            });\r\n        }\r\n    };\r\n    /**\r\nAnimation sorting routine - animation objects are sorted according to their animation.order attribute value, in ascending order\r\n@method sortAnimations\r\n@return Nothing\r\n@private\r\n**/\r\n    my.sortAnimations = function() {\r\n        if (my.work.resortAnimations) {\r\n            my.work.resortAnimations = false;\r\n            my.work.animate = my.bucketSort('animation', 'order', my.work.animate);\r\n        }\r\n    };\r\n    /**\r\nStarts the animation loop\r\n@method animationInit\r\n@private\r\n**/\r\n    my.animationInit = function() {\r\n        my.makeAnimation({\r\n            name: 'viewportMasterAnimation',\r\n            fn: function() {\r\n                var dev = my.device,\r\n                    testDims, testPos;\r\n                testDims = dev.getViewportDimensions();\r\n                testPos = dev.getViewportPosition();\r\n                if (testDims) {\r\n                    my.setPerspectives();\r\n                }\r\n                if (testDims || testPos) {\r\n                    my.setDisplayOffsets('all');\r\n                }\r\n            }\r\n        });\r\n        my.work.doAnimation = true;\r\n        my.animationLoop();\r\n    };\r\n\r\n    /**\r\n# Animation\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeAnimation()\r\n\r\n## Purpose\r\n\r\n* Defines an animation function to be run by the scrawl.animationLoop() function\r\n\r\n## Access\r\n\r\n* scrawl.animation.ANIMATIONNAME - for the Animation object\r\n\r\n@class Animation\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Animation = function(items) {\r\n        var delay;\r\n        my.Base.call(this, items);\r\n        items = my.safeObject(items);\r\n        delay = (my.isa_bool(items.delay)) ? items.delay : false;\r\n        this.fn = items.fn || function() {};\r\n        this.order = items.order || 0;\r\n        my.animation[this.name] = this;\r\n        my.pushUnique(my.animationnames, this.name);\r\n        my.work.resortAnimations = true;\r\n        /**\r\nPseudo-attribute used to prevent immediate running of animation when first created\r\n\r\n_This attribute is not retained by the Animation object_\r\n@property delay\r\n@type Boolean\r\n@default false\r\n**/\r\n        if (!delay) {\r\n            this.run();\r\n        }\r\n        return this;\r\n    };\r\n    my.Animation.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Animation'\r\n@final\r\n**/\r\n    my.Animation.prototype.type = 'Animation';\r\n    my.Animation.prototype.classname = 'animationnames';\r\n    my.work.d.Animation = {\r\n        /**\r\nAnonymous function for an animation routine\r\n@property fn\r\n@type Function\r\n@default function(){}\r\n**/\r\n        fn: function() {},\r\n        /**\r\nLower order animations are run during each frame before higher order ones\r\n@property order\r\n@type Number\r\n@default 0\r\n**/\r\n        order: 0,\r\n    };\r\n    my.mergeInto(my.work.d.Animation, my.work.d.Base);\r\n    /**\r\nRun an animation\r\n@method run\r\n@return Always true\r\n**/\r\n    my.Animation.prototype.run = function() {\r\n        my.pushUnique(my.work.animate, this.name);\r\n        return true;\r\n    };\r\n    /**\r\nCheck to see if animation is running\r\n@method isRunning\r\n@return true if active; false otherwise\r\n**/\r\n    my.Animation.prototype.isRunning = function() {\r\n        return my.contains(my.work.animate, this.name);\r\n    };\r\n    /**\r\nStop an animation\r\n@method halt\r\n@return Always true\r\n**/\r\n    my.Animation.prototype.halt = function() {\r\n        my.removeItem(my.work.animate, this.name);\r\n        return true;\r\n    };\r\n    /**\r\nRemove this Animation from the scrawl library\r\n@method kill\r\n@return Always true\r\n**/\r\n    my.Animation.prototype.kill = function() {\r\n        delete my.animation[this.name];\r\n        my.removeItem(my.animationnames, this.name);\r\n        my.removeItem(my.work.animate, this.name);\r\n        my.work.resortAnimations = true;\r\n        return true;\r\n    };\r\n\r\n\r\n\r\n    /**\r\n# scrawlBlock\r\n\r\n## Purpose and features\r\n\r\nThe Block extension adds Block entitys - squares and rectangles - to the core module\r\n\r\n* Defines 'rect' objects for displaying on a Cell's canvas\r\n* Performs 'rect' based drawing operations on canvases\r\n\r\n@module scrawlBlock\r\n**/\r\n\r\n\r\n    /**\r\n# window.scrawl\r\n\r\nscrawlBlock extension adaptions to the scrawl-canvas library object\r\n\r\n@class window.scrawl_Block\r\n**/\r\n\r\n    /**\r\nAlias for makeBlock()\r\n@method newBlock\r\n@deprecated\r\n**/\r\n    my.newBlock = function(items) {\r\n        return new my.Block(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Block entitys\r\n@method makeBlock\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Block object\r\n**/\r\n    my.makeBlock = function(items) {\r\n        return new my.Block(items);\r\n    };\r\n\r\n    /**\r\n# Block\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeBlock()\r\n\r\n## Purpose\r\n\r\n* Defines 'rect' objects for displaying on a Cell's canvas\r\n* Performs 'rect' based drawing operations on canvases\r\n\r\n## Access\r\n\r\n* scrawl.entity.BLOCKNAME - for the Block entity object\r\n\r\n@class Block\r\n@constructor\r\n@extends Entity\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Block = function Block(items) {\r\n        var get = my.xtGet,\r\n            d = my.work.d.Block;\r\n        items = my.safeObject(items);\r\n        my.Entity.call(this, items);\r\n        my.Position.prototype.set.call(this, items);\r\n        this.width = get(items.width, d.width);\r\n        this.height = get(items.height, d.height);\r\n        this.setLocalDimensions();\r\n        this.registerInLibrary();\r\n        my.pushUnique(my.group[this.group].entitys, this.name);\r\n        return this;\r\n    };\r\n    my.Block.prototype = Object.create(my.Entity.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Block'\r\n@final\r\n**/\r\n    my.Block.prototype.type = 'Block';\r\n    my.Block.prototype.classname = 'entitynames';\r\n    my.work.d.Block = {\r\n        /**\r\nBlock display - width, in pixels\r\n@property localWidth\r\n@type Number\r\n@default 0\r\n@private\r\n**/\r\n        localWidth: 0,\r\n        /**\r\nBlock display - height, in pixels\r\n@property localHeight\r\n@type Number\r\n@default 0\r\n@private\r\n**/\r\n        localHeight: 0,\r\n    };\r\n    my.mergeInto(my.work.d.Block, my.work.d.Entity);\r\n    /**\r\nAugments Entity.set()\r\n@method set\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Block.prototype.set = function(items) {\r\n        my.Entity.prototype.set.call(this, items);\r\n        if (my.xto(items.width, items.height, items.scale)) {\r\n            this.setLocalDimensions();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Entity.set()\r\n@method setDelta\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Block.prototype.setDelta = function(items) {\r\n        my.Entity.prototype.setDelta.call(this, items);\r\n        if (my.xto(items.width, items.height, items.scale)) {\r\n            this.setLocalDimensions();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAugments Entity.set() - sets the local dimensions\r\n@method setLocalDimensions\r\n@return This\r\n@chainable\r\n**/\r\n    my.Block.prototype.setLocalDimensions = function() {\r\n        var cell = my.cell[my.group[this.group].cell];\r\n        if (this.width.substring) {\r\n            this.localWidth = (parseFloat(this.width) / 100) * cell.actualWidth * this.scale;\r\n        }\r\n        else {\r\n            this.localWidth = this.width * this.scale || 0;\r\n        }\r\n        if (this.height.substring) {\r\n            this.localHeight = (parseFloat(this.height) / 100) * cell.actualHeight * this.scale;\r\n        }\r\n        else {\r\n            this.localHeight = this.height * this.scale || 0;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'clip' method draw\r\n@method clip\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.clip = function(ctx, cellname, cell) {\r\n        var here = this.currentHandle;\r\n        this.rotateCell(ctx, cell);\r\n        ctx.beginPath();\r\n        ctx.rect(here.x, here.y, this.localWidth, this.localHeight);\r\n        ctx.clip();\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'clear' method draw\r\n@method clear\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.clear = function(ctx, cellname, cell) {\r\n        var here = this.currentHandle;\r\n        cell.setToClearShape();\r\n        this.rotateCell(ctx, cell);\r\n        ctx.clearRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'clearWithBackground' method draw\r\n@method clearWithBackground\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.clearWithBackground = function(ctx, cellname, cell) {\r\n        var bg = cell.get('backgroundColor'),\r\n            myCellCtx = my.ctx[cellname],\r\n            fillStyle = myCellCtx.get('fillStyle'),\r\n            strokeStyle = myCellCtx.get('strokeStyle'),\r\n            globalAlpha = myCellCtx.get('globalAlpha'),\r\n            here = this.currentHandle;\r\n        this.rotateCell(ctx, cell);\r\n        ctx.fillStyle = bg;\r\n        ctx.strokeStyle = bg;\r\n        ctx.globalAlpha = 1;\r\n        ctx.strokeRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        ctx.fillRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        ctx.fillStyle = fillStyle;\r\n        ctx.strokeStyle = strokeStyle;\r\n        ctx.globalAlpha = globalAlpha;\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'draw' method draw\r\n@method draw\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.draw = function(ctx, cellname, cell) {\r\n        var here = this.currentHandle;\r\n        cell.setEngine(this);\r\n        this.rotateCell(ctx, cell);\r\n        ctx.strokeRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'fill' method draw\r\n@method fill\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.fill = function(ctx, cellname, cell) {\r\n        var here = this.currentHandle;\r\n        cell.setEngine(this);\r\n        this.rotateCell(ctx, cell);\r\n        ctx.fillRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'drawFill' method draw\r\n@method drawFill\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.drawFill = function(ctx, cellname, cell) {\r\n        var here = this.currentHandle;\r\n        cell.setEngine(this);\r\n        this.rotateCell(ctx, cell);\r\n        ctx.strokeRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        this.clearShadow(ctx, cell);\r\n        ctx.fillRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'fillDraw' method draw\r\n@method fillDraw\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.fillDraw = function(ctx, cellname, cell) {\r\n        var here = this.currentHandle;\r\n        cell.setEngine(this);\r\n        this.rotateCell(ctx, cell);\r\n        ctx.fillRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        this.clearShadow(ctx, cell);\r\n        ctx.strokeRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'sinkInto' method draw\r\n@method sinkInto\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.sinkInto = function(ctx, cellname, cell) {\r\n        var here = this.currentHandle;\r\n        cell.setEngine(this);\r\n        this.rotateCell(ctx, cell);\r\n        ctx.fillRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        ctx.strokeRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'floatOver' method draw\r\n@method floatOver\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.floatOver = function(ctx, cellname, cell) {\r\n        var here = this.currentHandle;\r\n        cell.setEngine(this);\r\n        this.rotateCell(ctx, cell);\r\n        ctx.strokeRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        ctx.fillRect(here.x, here.y, this.localWidth, this.localHeight);\r\n        return this;\r\n    };\r\n    /**\r\nStamp helper function - perform a 'none' method draw\r\n@method floatOver\r\n@param {Object} ctx JavaScript context engine for Cell's &lt;canvas&gt; element\r\n@param {String} cell CELLNAME string of Cell to be drawn on; by default, will use the Cell associated with this entity's Group object\r\n@return This\r\n@chainable\r\n@private\r\n**/\r\n    my.Block.prototype.none = function(ctx, cellname, cell) {\r\n        return this;\r\n    };\r\n    /**\r\nCalculate the box position of the entity\r\n\r\nReturns an object with the following attributes:\r\n\r\n* __left__ - x coordinate of top-left corner of the enclosing box relative to the current cell's top-left corner\r\n* __top__ - y coordinate of top-left corner of the enclosing box relative to the current cell's top-left corner\r\n* __bottom__ - x coordinate of bottom-right corner of the enclosing box relative to the current cell's top-left corner\r\n* __left__ - y coordinate of bottom-right corner of the enclosing box relative to the current cell's top-left corner\r\n\r\n@method getMaxDimensions\r\n@param {Object} cell object\r\n@param {Object} entity object\r\n@return dimensions object\r\n@private\r\n**/\r\n    my.Block.prototype.getMaxDimensions = function(cell) {\r\n        var cw = cell.actualWidth,\r\n            ch = cell.actualHeight,\r\n            halfW = cw / 2,\r\n            halfH = ch / 2,\r\n            cx = this.currentStart.x,\r\n            cy = this.currentStart.y,\r\n            lw = this.localWidth,\r\n            lh = this.localHeight,\r\n            fr = this.flipReverse,\r\n            fu = this.flipUpend,\r\n            xtl, xtr, xbr, xbl, ytl, ytr, ybr, ybl,\r\n            x = (fr) ? cw - cx : cx,\r\n            y = (fu) ? ch - cy : cy,\r\n            w = (fr) ? -lw : lw,\r\n            h = (fu) ? -lh : lh,\r\n            o = this.currentHandle,\r\n            hx = (fr) ? -o.x : o.x,\r\n            hy = (fu) ? -o.y : o.y,\r\n            line = my.ctx[this.context].lineWidth || 0,\r\n            max, min, ax, ay, ref,\r\n            ceil = Math.ceil,\r\n            floor = Math.floor,\r\n            t, l, b, r,\r\n            roll = this.roll,\r\n            v = my.work.v,\r\n            between = my.isBetween;\r\n        l = (fr) ? x + hx + w : x + hx;\r\n        r = (fr) ? x + hx : x + hx + w;\r\n        t = (fu) ? y + hy + h : y + hy;\r\n        b = (fu) ? y + hy : y + hy + h;\r\n        if (roll) {\r\n            min = Math.min;\r\n            max = Math.max;\r\n            ref = {\r\n                x: x,\r\n                y: y\r\n            };\r\n            v.set({\r\n                x: l,\r\n                y: t\r\n            }).vectorSubtract(ref).rotate(roll).vectorAdd(ref);\r\n            xtl = v.x;\r\n            ytl = v.y;\r\n            v.set({\r\n                x: r,\r\n                y: t\r\n            }).vectorSubtract(ref).rotate(roll).vectorAdd(ref);\r\n            xtr = v.x;\r\n            ytr = v.y;\r\n            v.set({\r\n                x: r,\r\n                y: b\r\n            }).vectorSubtract(ref).rotate(roll).vectorAdd(ref);\r\n            xbl = v.x;\r\n            ybl = v.y;\r\n            v.set({\r\n                x: l,\r\n                y: b\r\n            }).vectorSubtract(ref).rotate(roll).vectorAdd(ref);\r\n            xbr = v.x;\r\n            ybr = v.y;\r\n            ax = [xtl, xtr, xbr, xbl];\r\n            ay = [ytl, ytr, ybr, ybl];\r\n            t = min.apply(Math, ay);\r\n            l = min.apply(Math, ax);\r\n            b = max.apply(Math, ay);\r\n            r = max.apply(Math, ax);\r\n        }\r\n        t = floor(t - line);\r\n        l = floor(l - line);\r\n        b = ceil(b + line);\r\n        r = ceil(r + line);\r\n        if (!between(t, 0, ch, true)) {\r\n            t = (t > halfH) ? ch : 0;\r\n        }\r\n        if (!between(b, 0, ch, true)) {\r\n            b = (b > halfH) ? ch : 0;\r\n        }\r\n        if (!between(l, 0, cw, true)) {\r\n            l = (l > halfW) ? cw : 0;\r\n        }\r\n        if (!between(r, 0, cw, true)) {\r\n            r = (r > halfW) ? cw : 0;\r\n        }\r\n        this.maxDimensions.top = t;\r\n        this.maxDimensions.bottom = b;\r\n        this.maxDimensions.left = l;\r\n        this.maxDimensions.right = r;\r\n        this.maxDimensions.flag = false;\r\n        return this.maxDimensions;\r\n    };\r\n\r\n\r\n\r\n    /**\r\n# scrawlAnimation\r\n\r\n## Purpose and features\r\n\r\nThe Animation module adds support for animation and tweening to the core\r\n\r\n* Adds and starts an animation loop to the core\r\n* Defines the Animation object, used to program animation sequences\r\n* Defines the Tween object - a specialized form of animation which has pre-determined start and end points, durations and easing options\r\n* Adds functionality to various core objects and functions so they can take advantage of the animation object\r\n\r\n@module scrawlAnimation\r\n**/\r\n    /**\r\n# window.scrawl\r\n\r\nscrawlAnimation extension adaptions to the Scrawl library object\r\n\r\n## New library sections\r\n\r\n* scrawl.tween - for Tween and Action objects\r\n\r\n## New default attributes\r\n\r\n* Position.delta - default: {x:0,y:0,z:0};\r\n* Position.deltaPathPlace - default: 0;\r\n* Position.pathSpeedConstant - default: true;\r\n* Position.tweenLock - default: false;\r\n\r\n* Cell.sourceDelta - default: {x:0, y:0, z:0};\r\n* Cell.sourceMinWidth - default: 0;\r\n* Cell.sourceMaxWidth - default: 0;\r\n* Cell.sourceMinHeight - default: 0;\r\n* Cell.sourceMaxHeight - default: 0;\r\n\r\n* PageElement.tweenLock - default: false;\r\n\r\n* Design.roll - default: 0;\r\n* Design.autoUpdate - default: false;\r\n\r\n@class window.scrawl_Animation\r\n**/\r\n\r\n    my.work.d.Position.delta = {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0\r\n    };\r\n    my.work.d.Position.deltaPathPlace = 0;\r\n    my.work.d.Position.pathSpeedConstant = true;\r\n    my.work.d.Position.tweenLock = false;\r\n    my.mergeInto(my.work.d.Cell, my.work.d.Position);\r\n    my.mergeInto(my.work.d.Entity, my.work.d.Position);\r\n    if (my.xt(my.work.d.Block)) {\r\n        my.mergeInto(my.work.d.Block, my.work.d.Entity);\r\n    }\r\n    if (my.xt(my.work.d.Shape)) {\r\n        my.mergeInto(my.work.d.Shape, my.work.d.Entity);\r\n    }\r\n    if (my.xt(my.work.d.Wheel)) {\r\n        my.mergeInto(my.work.d.Wheel, my.work.d.Entity);\r\n    }\r\n    if (my.xt(my.work.d.Picture)) {\r\n        my.mergeInto(my.work.d.Picture, my.work.d.Entity);\r\n    }\r\n    if (my.xt(my.work.d.Phrase)) {\r\n        my.mergeInto(my.work.d.Phrase, my.work.d.Entity);\r\n    }\r\n    if (my.xt(my.work.d.Path)) {\r\n        my.mergeInto(my.work.d.Path, my.work.d.Entity);\r\n    }\r\n\r\n    my.work.d.PageElement.tweenLock = false;\r\n    my.mergeInto(my.work.d.Pad, my.work.d.PageElement);\r\n    if (my.xt(my.work.d.Stack)) {\r\n        my.mergeInto(my.work.d.Stack, my.work.d.PageElement);\r\n    }\r\n    if (my.xt(my.work.d.Element)) {\r\n        my.mergeInto(my.work.d.Element, my.work.d.PageElement);\r\n    }\r\n\r\n    my.pushUnique(my.work.sectionlist, 'tween');\r\n    my.pushUnique(my.work.nameslist, 'tweennames');\r\n\r\n    /**\r\nConvert a time into its component properties\r\n\r\nExpected values:\r\n* Number - time value in milliseconds\r\n* String number+% - will always return a Number time value of 0\r\n* String number+ms - returns a Number time value in milliseconds\r\n* String number+s - converts and returns a Number time value in milliseconds\r\n\r\n@method convertTime\r\n@return [String timeUnit, Number timeValue]\r\n@private\r\n**/\r\n    my.convertTime = function(item) {\r\n        var a, timeUnit, timeValue;\r\n        if (my.xt(item)) {\r\n            if (item.toFixed) {\r\n                return ['ms', item];\r\n            }\r\n            a = item.match(/^\\d+\\.?\\d*(\\D*)/);\r\n            timeUnit = (a[1].toLowerCase) ? a[1].toLowerCase() : 'ms';\r\n            switch (timeUnit) {\r\n            case 's':\r\n                timeValue = parseFloat(item) * 1000;\r\n                break;\r\n            case '%':\r\n                timeValue = parseFloat(item);\r\n                break;\r\n            default:\r\n                timeUnit = 'ms';\r\n                timeValue = parseFloat(item);\r\n            }\r\n            return [timeUnit, timeValue];\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nA __utility__ function that adds two numbers between 0 and 1, keeping them within bounds\r\n\r\n@method addWithinBounds\r\n@param {Number} a first number\r\n@param {Number} b second number\r\n@return result of calculation\r\n**/\r\n    my.addWithinBounds = function(a, b) {\r\n        var result = a + b;\r\n        if (result > 1) {\r\n            return result - 1;\r\n        }\r\n        if (result < 0) {\r\n            return result + 1;\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\nPosition constructor hook function\r\n\r\nAdds a __delta__ (deltaX, deltaY) Vector to the object, used to give an object a 'velocity'\r\n\r\n@method animationPositionInit\r\n@private\r\n**/\r\n    my.Position.prototype.animationPositionInit = function(items) {\r\n        var temp = my.safeObject(items.delta),\r\n            vec = my.makeVector,\r\n            get = my.xtGet,\r\n            d = my.work.d[this.type];\r\n        this.delta = vec({\r\n            name: this.type + '.' + this.name + '.delta',\r\n            x: get(items.deltaX, temp.x, 0),\r\n            y: get(items.deltaY, temp.y, 0)\r\n        });\r\n        this.pathSpeedConstant = get(items.pathSpeedConstant, d.pathSpeedConstant);\r\n        this.deltaPathPlace = get(items.deltaPathPlace, d.deltaPathPlace);\r\n    };\r\n    /**\r\nPosition.get hook function - modified by animation module\r\n@method animationPositionGet\r\n@private\r\n**/\r\n    my.Position.prototype.animationPositionGet = function(item) {\r\n        var stat = ['deltaX', 'deltaY'];\r\n        if (my.contains(stat, item)) {\r\n            switch (item) {\r\n            case 'deltaX':\r\n                return this.delta.x;\r\n            case 'deltaY':\r\n                return this.delta.y;\r\n            }\r\n        }\r\n        if ('delta' === item) {\r\n            return this.delta.getVector();\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\nPosition.set hook function - modified by animation module\r\n@method animationPositionSet\r\n@private\r\n**/\r\n    my.Position.prototype.animationPositionSet = function(items) {\r\n        if (my.xto(items.delta, items.deltaX, items.deltaY)) {\r\n            this.setDeltaAttribute(items);\r\n        }\r\n    };\r\n    /**\r\nAugments Position.set(), to allow users to set the delta attributes using delta, deltaX, deltaY\r\n\r\nThe scrawlAnimation module adds a __delta__ attribute to Cells and Entitys - this is an inbuilt delta vector which can be used to automatically animate the start vector of these objects - via the updateStart, revertStart and reverse functions - as part of the animation cycle.\r\n\r\nBe aware that this is different to the Position.setDelta() function inherited by Cells and Entitys. setDelta is used to add a supplied argument value to the existing values of any numerical attribute of a Cell or Entity object, and is thus not limited to the animation cycle.\r\n\r\n@method setDeltaAttribute\r\n@param {Object} items Object consisting of key:value attributes\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.setDeltaAttribute = function(items) {\r\n        var temp,\r\n            so = my.safeObject,\r\n            get = my.xtGet;\r\n        items = so(items);\r\n        if (!my.isa_vector(this.delta)) {\r\n            this.delta = my.makeVector(items.delta || this.delta);\r\n        }\r\n        temp = so(items.delta);\r\n        this.delta.x = get(items.deltaX, temp.x, this.delta.x);\r\n        this.delta.y = get(items.deltaY, temp.y, this.delta.y);\r\n        return this;\r\n    };\r\n    /**\r\nPosition.clone hook function - modified by animation module\r\n@method animationPositionClone\r\n@private\r\n**/\r\n    my.Position.prototype.animationPositionClone = function(a, items) {\r\n        var temp = my.safeObject(items.delta),\r\n            get = my.xtGet;\r\n        a.delta = my.makeVector({\r\n            x: get(items.deltaX, temp.x, a.delta.x),\r\n            y: get(items.deltaY, temp.y, a.delta.y),\r\n        });\r\n        return a;\r\n    };\r\n    /**\r\nAdds delta values to the start vector; adds deltaPathPlace to pathPlace\r\n\r\nPermitted argument values include \r\n* 'x' - delta.x added to start.x\r\n* 'y' - delta.y added to start.y\r\n* 'path' - deltaPathPlace added to pathPlace \r\n* undefined: all values are amended\r\n@method Position.updateStart\r\n@param {String} [item] String used to limit this function's actions - permitted values include 'x', 'y', 'path'; default action: all values are amended\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.updateStart = function(item) {\r\n        item = my.xtGet(item, 'all');\r\n        this.updateStartActions[item](my.addPercentages, this.start, this.delta, my.addWithinBounds, this);\r\n        this.currentStart.flag = false;\r\n        if (my.xt(this.collisionArray)) {\r\n            this.collisionArray.length = 0;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nupdateStart helper object\r\n\r\n@method Position.updateStartActions\r\n@private\r\n**/\r\n    my.Position.prototype.updateStartActions = {\r\n        x: function(perc, start, delta, add) {\r\n            start.x = (start.x.toFixed) ? start.x + delta.x : perc(start.x, delta.x);\r\n        },\r\n        y: function(perc, start, delta, add) {\r\n            start.y = (start.y.toFixed) ? start.y + delta.y : perc(start.y, delta.y);\r\n        },\r\n        path: function(perc, start, delta, add, obj) {\r\n            obj.pathPlace = add(obj.pathPlace, obj.deltaPathPlace);\r\n        },\r\n        all: function(perc, start, delta, add, obj) {\r\n            if (obj.deltaPathPlace) {\r\n                obj.pathPlace = add(obj.pathPlace, obj.deltaPathPlace);\r\n            }\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x + delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y + delta.y : perc(start.y, delta.y);\r\n            }\r\n        }\r\n    };\r\n    /**\r\nSubtracts delta values from the start vector; subtracts deltaPathPlace from pathPlace\r\n\r\nPermitted argument values include \r\n* 'x' - delta.x subtracted from start.x\r\n* 'y' - delta.y subtracted from start.y\r\n* 'path' - deltaPathPlace subtracted from pathPlace \r\n* undefined: all values are amended\r\n@method Position.revertStart\r\n@param {String} [item] String used to limit this function's actions - permitted values include 'x', 'y', 'path'; default action: all values are amended\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.revertStart = function(item) {\r\n        item = my.xtGet(item, 'all');\r\n        this.revertStartActions[item](my.subtractPercentages, this.start, this.delta, my.addWithinBounds, this);\r\n        this.currentStart.flag = false;\r\n        if (my.xt(this.collisionArray)) {\r\n            this.collisionArray.length = 0;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nrevertStart helper object\r\n\r\n@method Position.revertStartActions\r\n@private\r\n**/\r\n    my.Position.prototype.revertStartActions = {\r\n        x: function(perc, start, delta, add) {\r\n            start.x = (start.x.toFixed) ? start.x - delta.x : perc(start.x, delta.x);\r\n        },\r\n        y: function(perc, start, delta, add) {\r\n            start.y = (start.y.toFixed) ? start.y - delta.y : perc(start.y, delta.y);\r\n        },\r\n        path: function(perc, start, delta, add, obj) {\r\n            obj.pathPlace = add(obj.pathPlace, -obj.deltaPathPlace);\r\n        },\r\n        all: function(perc, start, delta, add, obj) {\r\n            if (obj.deltaPathPlace) {\r\n                obj.pathPlace = add(obj.pathPlace, -obj.deltaPathPlace);\r\n            }\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x - delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y - delta.y : perc(start.y, delta.y);\r\n            }\r\n        }\r\n    };\r\n    /**\r\nSwaps the values of an attribute between two objects\r\n@method Position.exchange\r\n@param {Object} obj Object with which this object will swap attribute values\r\n@param {String} item Attribute to be swapped\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.exchange = function(obj, item) {\r\n        var temp;\r\n        if (my.isa_obj(obj)) {\r\n            temp = this[item] || this.get(item);\r\n            this[item] = obj[item] || obj.get(item);\r\n            obj[item] = temp;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nChanges the sign (+/-) of specified attribute values\r\n@method Position.reverse\r\n@param {String} [item] String used to limit this function's actions - permitted values include 'deltaX', 'deltaY', 'delta', 'deltaPathPlace'; default action: all values are amended\r\n@return This\r\n@chainable\r\n**/\r\n    my.Position.prototype.reverse = function(item) {\r\n        item = my.xtGet(item, 'all');\r\n        this.reverseActions[item](this.delta, my.reversePercentage, this);\r\n        return this;\r\n    };\r\n    /**\r\nreverse helper object\r\n@method Position.reverseActions\r\n@private\r\n**/\r\n    my.Position.prototype.reverseActions = {\r\n        deltaX: function(delta, perc) {\r\n            delta.x = (delta.x.toFixed) ? -delta.x : perc(delta.x);\r\n        },\r\n        deltaY: function(delta, perc) {\r\n            delta.y = (delta.y.toFixed) ? -delta.y : perc(delta.y);\r\n        },\r\n        delta: function(delta, perc) {\r\n            delta.x = (delta.x.toFixed) ? -delta.x : perc(delta.x);\r\n            delta.y = (delta.y.toFixed) ? -delta.y : perc(delta.y);\r\n        },\r\n        deltaPathPlace: function(delta, perc, obj) {\r\n            obj.deltaPathPlace = -obj.deltaPathPlace;\r\n        },\r\n        all: function(delta, perc, obj) {\r\n            obj.deltaPathPlace = -obj.deltaPathPlace;\r\n            delta.x = (delta.x.toFixed) ? -delta.x : perc(delta.x);\r\n            delta.y = (delta.y.toFixed) ? -delta.y : perc(delta.y);\r\n        }\r\n    };\r\n    my.work.d.Cell.copyDelta = {\r\n        x: 0,\r\n        y: 0,\r\n    };\r\n    my.work.d.Cell.copyMinWidth = 0;\r\n    my.work.d.Cell.copyMaxWidth = 0;\r\n    my.work.d.Cell.copyMinHeight = 0;\r\n    my.work.d.Cell.copyMaxHeight = 0;\r\n    /**\r\nCell constructor hook function\r\n\r\nAdds a __sourceDelta__ (sourceDeltaX, sourceDeltaY) Vector to the cell, used to give it a 'velocity'\r\n\r\n@method animationCellInit\r\n@private\r\n**/\r\n    my.Cell.prototype.animationCellInit = function(items) {\r\n        var temp = my.safeObject(items.copyDelta),\r\n            get = my.xtGet;\r\n        this.copyDelta = my.makeVector({\r\n            x: get(items.copyDeltaX, temp.x, 0),\r\n            y: get(items.copyDeltaY, temp.y, 0),\r\n        });\r\n    };\r\n    /**\r\nCell.get hook function - modified by animation module\r\n@method animationCellGet\r\n@private\r\n**/\r\n    my.Cell.prototype.animationCellGet = function(item) {\r\n        var stat = ['copyDeltaX', 'copyDeltaY'];\r\n        if (my.contains(stat, item)) {\r\n            switch (item) {\r\n            case 'copyDeltaX':\r\n                return this.copyDelta.x;\r\n            case 'copyDeltaY':\r\n                return this.copyDelta.y;\r\n            }\r\n        }\r\n        return my.Base.prototype.get.call(this, item);\r\n    };\r\n    /**\r\nCell.set hook function - modified by animation module\r\n@method animationCellSet\r\n@private\r\n**/\r\n    my.Cell.prototype.animationCellSet = function(items) {\r\n        var temp,\r\n            get = my.xtGet;\r\n        if (my.xto(items.copyDelta, items.copyDeltaX, items.copyDeltaY)) {\r\n            temp = my.safeObject(items.copyDelta);\r\n            this.copyDelta.x = get(items.copyDeltaX, temp.x, this.copyDelta.x);\r\n            this.copyDelta.y = get(items.copyDeltaY, temp.y, this.copyDelta.y);\r\n        }\r\n    };\r\n    /**\r\nAdds delta values to the start vector; adds sourceDelta values to the source vector; adds deltaPathPlace to pathPlace\r\n\r\nPermitted argument values include \r\n* 'x' - delta.x added to start.x; deltaSource.x added to source.x\r\n* 'y' - delta.y added to start.y; deltaSource.y added to source.y\r\n* 'start', 'target' - delta added to start\r\n* 'source' - deltaSource added to source\r\n* 'path' - deltaPathPlace added to pathPlace \r\n* undefined: all values are amended\r\n@method Cell.updateStart\r\n@param {String} [item] String used to limit this function's actions\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.updateStart = function(item) {\r\n        item = my.xtGet(item, 'all');\r\n        this.updateStartActions[item](my.addPercentages, this.start, this.delta, this.copy, this.copyDelta, my.addWithinBounds, this);\r\n        this.currentStart.flag = false;\r\n        return this;\r\n    };\r\n    /**\r\nupdateStart helper object\r\n\r\n@method Cell.updateStartActions\r\n@private\r\n**/\r\n    my.Cell.prototype.updateStartActions = {\r\n        x: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x + delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (copyDelta.x) {\r\n                copy.x = (copy.x.toFixed) ? copy.x + copyDelta.x : perc(copy.x, copyDelta.x);\r\n            }\r\n        },\r\n        y: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y + delta.y : perc(start.y, delta.y);\r\n            }\r\n            if (copyDelta.y) {\r\n                copy.y = (copy.y.toFixed) ? copy.y + copyDelta.y : perc(copy.y, copyDelta.y);\r\n            }\r\n        },\r\n        start: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x + delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y + delta.y : perc(start.y, delta.y);\r\n            }\r\n        },\r\n        paste: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x + delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y + delta.y : perc(start.y, delta.y);\r\n            }\r\n        },\r\n        copy: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (copyDelta.x) {\r\n                copy.x = (copy.x.toFixed) ? copy.x + copyDelta.x : perc(copy.x, copyDelta.x);\r\n            }\r\n            if (copyDelta.y) {\r\n                copy.y = (copy.y.toFixed) ? copy.y + copyDelta.y : perc(copy.y, copyDelta.y);\r\n            }\r\n        },\r\n        path: function(perc, start, delta, copy, copyDelta, add, obj) {\r\n            obj.pathPlace = add(obj.pathPlace, obj.deltaPathPlace);\r\n        },\r\n        all: function(perc, start, delta, copy, copyDelta, add, obj) {\r\n            if (obj.deltaPathPlace) {\r\n                obj.pathPlace = add(obj.pathPlace, obj.deltaPathPlace);\r\n            }\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x + delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y + delta.y : perc(start.y, delta.y);\r\n            }\r\n            if (copyDelta.x) {\r\n                copy.x = (copy.x.toFixed) ? copy.x + copyDelta.x : perc(copy.x, copyDelta.x);\r\n            }\r\n            if (copyDelta.y) {\r\n                copy.y = (copy.y.toFixed) ? copy.y + copyDelta.y : perc(copy.y, copyDelta.y);\r\n            }\r\n        }\r\n    };\r\n    /**\r\nSubtracts delta values from the start vector; subtracts sourceDelta values from the source vector; subtracts deltaPathPlace to pathPlace\r\n\r\nPermitted argument values include \r\n* 'x' - delta.x subtracted from start.x; deltaSource.x subtracted from source.x\r\n* 'y' - delta.y subtracted from start.y; deltaSource.y subtracted from source.y\r\n* 'start', 'target' - delta subtracted from start\r\n* 'source' - deltaSource subtracted from source\r\n* 'path' - deltaPathPlace subtracted from pathPlace \r\n* undefined: all values are amended\r\n@method Cell.revertStart\r\n@param {String} [item] String used to limit this function's actions\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.revertStart = function(item) {\r\n        item = my.xtGet(item, 'all');\r\n        this.revertStartActions[item](my.subtractPercentages, this.start, this.delta, this.copy, this.copyDelta, my.addWithinBounds, this);\r\n        this.currentStart.flag = false;\r\n        return this;\r\n    };\r\n    /**\r\nrevertStart helper object\r\n@method Cell.revertStartActions\r\n@private\r\n**/\r\n    my.Cell.prototype.revertStartActions = {\r\n        x: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x - delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (copyDelta.x) {\r\n                copy.x = (copy.x.toFixed) ? copy.x - copyDelta.x : perc(copy.x, copyDelta.x);\r\n            }\r\n        },\r\n        y: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y - delta.y : perc(start.y, delta.y);\r\n            }\r\n            if (copyDelta.y) {\r\n                copy.y = (copy.y.toFixed) ? copy.y - copyDelta.y : perc(copy.y, copyDelta.y);\r\n            }\r\n        },\r\n        start: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x - delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y - delta.y : perc(start.y, delta.y);\r\n            }\r\n        },\r\n        paste: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x - delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y - delta.y : perc(start.y, delta.y);\r\n            }\r\n        },\r\n        copy: function(perc, start, delta, copy, copyDelta, add) {\r\n            if (copyDelta.x) {\r\n                copy.x = (copy.x.toFixed) ? copy.x - copyDelta.x : perc(copy.x, copyDelta.x);\r\n            }\r\n            if (copyDelta.y) {\r\n                copy.y = (copy.y.toFixed) ? copy.y - copyDelta.y : perc(copy.y, copyDelta.y);\r\n            }\r\n        },\r\n        path: function(perc, start, delta, copy, copyDelta, add, obj) {\r\n            obj.pathPlace = add(obj.pathPlace, -obj.deltaPathPlace);\r\n        },\r\n        all: function(perc, start, delta, copy, copyDelta, add, obj) {\r\n            if (obj.deltaPathPlace) {\r\n                obj.pathPlace = add(obj.pathPlace, -obj.deltaPathPlace);\r\n            }\r\n            if (delta.x) {\r\n                start.x = (start.x.toFixed) ? start.x - delta.x : perc(start.x, delta.x);\r\n            }\r\n            if (delta.y) {\r\n                start.y = (start.y.toFixed) ? start.y - delta.y : perc(start.y, delta.y);\r\n            }\r\n            if (copyDelta.x) {\r\n                copy.x = (copy.x.toFixed) ? copy.x - copyDelta.x : perc(copy.x, copyDelta.x);\r\n            }\r\n            if (copyDelta.y) {\r\n                copy.y = (copy.y.toFixed) ? copy.y - copyDelta.y : perc(copy.y, copyDelta.y);\r\n            }\r\n        }\r\n    };\r\n    /**\r\nZooms one cell in relation to another cell\r\n@method Cell.zoom\r\n@param {Number} item Number of pixels to amend the zoomed cell's start and dimensions by\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.zoom = function(item) {\r\n        var sWidth,\r\n            sHeight,\r\n            aWidth,\r\n            aHeight,\r\n            minWidth,\r\n            minHeight,\r\n            maxWidth,\r\n            maxHeight,\r\n            sx,\r\n            sy,\r\n            myW,\r\n            myH,\r\n            myX,\r\n            myY;\r\n        if (item.toFixed) {\r\n            sWidth = this.copyWidth;\r\n            sHeight = this.copyHeight;\r\n            aWidth = this.actualWidth;\r\n            aHeight = this.actualHeight;\r\n            minWidth = my.xtGet(this.copyMinWidth, this.copyWidth);\r\n            minHeight = my.xtGet(this.copyMinHeight, this.copyHeight);\r\n            maxWidth = my.xtGet(this.copyMaxWidth, this.copyWidth);\r\n            maxHeight = my.xtGet(this.copyMaxHeight, this.copyHeight);\r\n            sx = this.copy.x;\r\n            sy = this.copy.y;\r\n            myW = sWidth + item;\r\n            myH = sHeight + item;\r\n            if (my.isBetween(myW, minWidth, maxWidth, true) && my.isBetween(myH, minHeight, maxHeight, true)) {\r\n                sWidth = myW;\r\n                myX = sx - (item / 2);\r\n                if (myX < 0) {\r\n                    sx = 0;\r\n                }\r\n                else if (myX > (aWidth - sWidth)) {\r\n                    sx = aWidth - sWidth;\r\n                }\r\n                else {\r\n                    sx = myX;\r\n                }\r\n                sHeight = myH;\r\n                myY = sy - (item / 2);\r\n                if (myY < 0) {\r\n                    sy = 0;\r\n                }\r\n                else if (myY > (aHeight - sHeight)) {\r\n                    sy = aHeight - sHeight;\r\n                }\r\n                else {\r\n                    sy = myY;\r\n                }\r\n                this.copy.x = sx;\r\n                this.copy.y = sy;\r\n                this.copyWidth = sWidth;\r\n                this.copyHeight = sHeight;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nPerform a splice-shift-join operation on the &lt;canvas&gt; element's current scene\r\n\r\nArgument is an Object in the form:\r\n\r\n* {edge:String, strip:Number}\r\n\r\nPermitted values for the argument Object's attributes are:\r\n\r\n* __edge__ - one from 'horizontal', 'vertical', 'top', 'bottom', 'left', 'right'\r\n* __strip__ - a width/height Number (in pixels) of the strip that is to be moved from the named edge of the &lt;canvas&gt; to the opposite edge\r\n* __shiftSource__ - boolean - when true, will automatically shift the sourceX and sourceY coordinates; default: false\r\n\r\n_Note that this function is only effective in achieving a parallax effect if the user never clears or updates the cell's &lt;canvas&gt; element, and takes steps to shift the cell's source vector appropriately each time the splice operation is performed_\r\n\r\n@method Cell.spliceCell\r\n@param {Object} items Object containing data for the splice operation\r\n@return This\r\n@chainable\r\n**/\r\n    my.Cell.prototype.spliceCell = function(items) {\r\n        var stat = ['horizontal', 'vertical', 'top', 'bottom', 'left', 'right'],\r\n            myStrip,\r\n            myRemains,\r\n            myEdge,\r\n            myShift,\r\n            height,\r\n            width,\r\n            ctx,\r\n            c,\r\n            cv = my.work.cv,\r\n            cvx = my.work.cvx;\r\n        items = my.safeObject(items);\r\n        if (my.contains(stat, items.edge)) {\r\n            myShift = my.xtGet(items.shiftCopy, false);\r\n            height = this.actualHeight;\r\n            width = this.actualWidth;\r\n            ctx = my.context[this.name];\r\n            c = my.canvas[this.name];\r\n            cv.width = width;\r\n            cv.height = height;\r\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n            switch (items.edge) {\r\n            case 'horizontal':\r\n                myRemains = width / 2;\r\n                myStrip = myRemains;\r\n                myEdge = 'left';\r\n                break;\r\n            case 'vertical':\r\n                myRemains = height / 2;\r\n                myStrip = myRemains;\r\n                myEdge = 'top';\r\n                break;\r\n            case 'top':\r\n            case 'bottom':\r\n                myStrip = my.xtGet(items.strip, 20);\r\n                myRemains = height - myStrip;\r\n                myEdge = items.edge;\r\n                break;\r\n            case 'left':\r\n            case 'right':\r\n                myStrip = my.xtGet(items.strip, 20);\r\n                myRemains = width - myStrip;\r\n                myEdge = items.edge;\r\n                break;\r\n            }\r\n            switch (myEdge) {\r\n            case 'top':\r\n                cvx.drawImage(c, 0, 0, width, myStrip, 0, myRemains, width, myStrip);\r\n                cvx.drawImage(c, 0, myStrip, width, myRemains, 0, 0, width, myRemains);\r\n                this.copy.y -= (myShift) ? myStrip : 0;\r\n                break;\r\n            case 'bottom':\r\n                cvx.drawImage(c, 0, 0, width, myRemains, 0, myStrip, width, myRemains);\r\n                cvx.drawImage(c, 0, myRemains, width, myStrip, 0, 0, width, myStrip);\r\n                this.copy.y += (myShift) ? myStrip : 0;\r\n                break;\r\n            case 'left':\r\n                cvx.drawImage(c, 0, 0, myStrip, height, myRemains, 0, myStrip, height);\r\n                cvx.drawImage(c, myStrip, 0, myRemains, height, 0, 0, myRemains, height);\r\n                this.copy.x -= (myShift) ? myStrip : 0;\r\n                break;\r\n            case 'right':\r\n                cvx.drawImage(c, 0, 0, myRemains, height, myStrip, 0, myRemains, height);\r\n                cvx.drawImage(c, myRemains, 0, myStrip, height, 0, 0, myStrip, height);\r\n                this.copy.x += (myShift) ? myStrip : 0;\r\n                break;\r\n            }\r\n            ctx.clearRect(0, 0, width, height);\r\n            ctx.drawImage(cv, 0, 0, width, height);\r\n            if (myShift) {\r\n                this.setCopy();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAsk all entitys in the Group to perform an updateStart() operation\r\n\r\nEach entity will add their delta values to their start Vector, and/or add deltaPathPlace from pathPlace\r\n@method Group.updateStart\r\n@param {String} [item] String used to limit this function's actions - permitted values include 'x', 'y', 'path'; default action: all values are amended\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.updateStart = function(item) {\r\n        var entitys = this.entitys,\r\n            e = my.entity;\r\n        for (var i = 0, iz = entitys.length; i < iz; i++) {\r\n            e[entitys[i]].updateStart(item);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAsk all entitys in the Group to perform a revertStart() operation\r\n\r\nEach entity will subtract their delta values to their start Vector, and/or subtract deltaPathPlace from pathPlace\r\n@method Group.revertStart\r\n@param {String} [item] String used to limit this function's actions - permitted values include 'x', 'y', 'path'; default action: all values are amended\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.revertStart = function(item) {\r\n        var entitys = this.entitys,\r\n            e = my.entity;\r\n        for (var i = 0, iz = entitys.length; i < iz; i++) {\r\n            e[entitys[i]].revertStart(item);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAsk all entitys in the group to perform a reverse() operation\r\n\r\nEach entity will change the sign (+/-) of specified attribute values\r\n@method Group.reverse\r\n@param {String} [item] String used to limit this function's actions - permitted values include 'deltaX', 'deltaY', 'delta', 'deltaPathPlace'; default action: all values are amended\r\n@return This\r\n@chainable\r\n**/\r\n    my.Group.prototype.reverse = function(item) {\r\n        var entitys = this.entitys,\r\n            e = my.entity;\r\n        for (var i = 0, iz = entitys.length; i < iz; i++) {\r\n            e[entitys[i]].reverse(item);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nA value for shifting the color stops (was __roll__ in versions prior to v4.0)\r\n@property shift\r\n@type Number\r\n@default 0\r\n**/\r\n    my.work.d.Design.shift = 0;\r\n    /**\r\nA flag to indicate that stop color shifts should be automatically applied\r\n@property autoUpdate\r\n@type Boolean\r\n@default false\r\n**/\r\n    my.work.d.Design.autoUpdate = false;\r\n    my.mergeInto(my.work.d.Gradient, my.work.d.Design);\r\n    my.mergeInto(my.work.d.RadialGradient, my.work.d.Design);\r\n    if (my.xt(my.work.d.Pattern)) {\r\n        my.mergeInto(my.work.d.Pattern, my.work.d.Design);\r\n    }\r\n    /**\r\nCreates the gradient\r\n\r\n_This function replaces the one in the core module_\r\n@method Design.update\r\n@param {String} [entity] SPRITENAME String\r\n@param {String} [cell] CELLNAME String\r\n@return This\r\n@chainable\r\n**/\r\n    my.Design.prototype.update = function(entity, cell) {\r\n        this.makeGradient(entity, cell);\r\n        this.sortStops();\r\n        this.applyStops();\r\n        return this;\r\n    };\r\n    /**\r\nGradient builder helper function - sorts color attribute Objects by their stop attribute values, after adding the roll value to them\r\n@method Design.sortStops\r\n@return Nothing\r\n@private\r\n**/\r\n    my.Design.prototype.sortStops = function() {\r\n        var color,\r\n            shift,\r\n            i,\r\n            iz;\r\n        color = this.get('color');\r\n        shift = this.get('shift');\r\n        for (i = 0, iz = color.length; i < iz; i++) {\r\n            color[i].stop += shift;\r\n            if (!my.isBetween(color[i].stop, 0, 1, true)) {\r\n                color[i].stop = (color[i].stop > 0.5) ? color[i].stop - 1 : color[i].stop + 1;\r\n            }\r\n            if (color[i].stop <= 0) {\r\n                color[i].stop = 0.000001;\r\n            }\r\n            else if (color[i].stop >= 1) {\r\n                color[i].stop = 0.999999;\r\n            }\r\n        }\r\n        color.sort(function(a, b) {\r\n            return a.stop - b.stop;\r\n        });\r\n        this.color = color;\r\n    };\r\n    /**\r\nA __factory__ function to generate new Ticker objects\r\n@method makeTicker\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Ticker object\r\n**/\r\n    my.makeTicker = function(items) {\r\n        return new my.Ticker(items);\r\n    };\r\n    /**\r\nAlias for makeTween()\r\n@method newTween\r\n@deprecated\r\n**/\r\n    my.newTween = function(items) {\r\n        return my.makeTween(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Tween objects\r\n@method makeTween\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Tween object\r\n**/\r\n    my.makeTween = function(items) {\r\n        return new my.Tween(items);\r\n    };\r\n    /**\r\nAlias for makeAction()\r\n@method newAction\r\n@deprecated\r\n**/\r\n    my.newAction = function(items) {\r\n        return my.makeAction(items);\r\n    };\r\n    /**\r\nA __factory__ function to generate new Action objects\r\n@method makeAction\r\n@param {Object} items Key:value Object argument for setting attributes\r\n@return Action object\r\n**/\r\n    my.makeAction = function(items) {\r\n        return new my.Action(items);\r\n    };\r\n    /**\r\nLocate a target object\r\n@method locateTarget\r\n@param {String} OBJECTNAME string of required target\r\n@private\r\n@return target Object; false if not found\r\n**/\r\n    my.locateTarget = function(item) {\r\n        var sections = ['entity', 'cell', 'pad', 'stack', 'element', 'point', 'group', 'design', 'animation', 'tween', 'anim', 'filter', 'image', 'force', 'spring', 'physics'],\r\n            section, name, j, jz,\r\n            contains = my.contains,\r\n            xt = my.xt;\r\n        if (my.xt(item) && item.substring) {\r\n            for (j = 0, jz = sections.length; j < jz; j++) {\r\n                section = sections[j];\r\n                name = section + 'names';\r\n                if (xt(my[name]) && my[name].indexOf(item) >= 0) {\r\n                    return my[section][item];\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n# Ticker\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeTicker()\r\n\r\n## Purpose\r\n\r\n* Defines a linear time sequence to which tweens and other actions can subscribe\r\n\r\n## Access\r\n\r\n* scrawl.animation.TICKERNAME - for the Ticker object\r\n\r\n## Ticker functions\r\n\r\n* Start a Ticker from 0 by calling the __run()__ function on it.\r\n* Tickers can be stopped by calling the __halt()__ function on it.\r\n* Start a Ticker from the point at which it was previously halted by calling the __resume()__ function on it.\r\n* A Ticker can have its current tick amended by calling the __seekTo()__ function on it.\r\n* A Ticker can be deleted by calling the __kill()__ function on it.\r\n\r\n@class Ticker\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Ticker = function(items) {\r\n        var xtGet = my.xtGet,\r\n            temp;\r\n        my.Base.call(this, items);\r\n        items = my.safeObject(items);\r\n        this.order = xtGet(items.order, 0);\r\n        this.subscribers = [];\r\n        this.duration = xtGet(items.duration, 0);\r\n        this.eventChoke = xtGet(items.eventChoke, 0);\r\n        this.killOnComplete = xtGet(items.killOnComplete, false);\r\n        this.cycles = xtGet(items.cycles, 1);\r\n        this.cycleCount = 0;\r\n        this.active = false;\r\n        this.effectiveDuration = 0;\r\n        this.startTime = 0;\r\n        this.currentTime = 0;\r\n        this.tick = 0;\r\n        this.lastEvent = 0;\r\n        if (items.subscribers) {\r\n            this.subscribe(items.subscribers);\r\n        }\r\n        this.setEffectiveDuration();\r\n        my.animation[this.name] = this;\r\n        my.pushUnique(my.animationnames, this.name);\r\n        return this;\r\n    };\r\n    my.Ticker.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Ticker'\r\n@final\r\n**/\r\n    my.Ticker.prototype.type = 'Ticker';\r\n    my.Ticker.prototype.classname = 'animationnames';\r\n    my.work.d.Ticker = {\r\n        /**\r\nAnimation order\r\n\r\nObjects in the animation loop are sorted by their order values, and run as part of the animation loop from lowest to highest order value. There is no guarantee in which order objects with the same order value will run during each animation loop\r\n@property order\r\n@type Number\r\n@default 0\r\n**/\r\n        order: 0,\r\n        /**\r\nTicker length, in milliseconds\r\n\r\nIf no duration is set, Ticker will set the last subscribed object's end time as its effective duration\r\n@property duration\r\n@type Number\r\n@default 0\r\n**/\r\n        duration: 0,\r\n        /**\r\nArray of String names of tween and action subscribers to this Ticker\r\n\r\n@property subscribers\r\n@type Array\r\n@default []\r\n**/\r\n        subscribers: [],\r\n        /**\r\nWhen set to true, Ticker will delete itself and any associated tweens from the scrawl library\r\n\r\n@property killOnComplete\r\n@type Boolean\r\n@default false\r\n**/\r\n        killOnComplete: false,\r\n        /**\r\nNumber of times to cycle the ticker:\r\n\r\n* 0 - the ticker will repeat until stopped\r\n* > 0 - the ticker will repeat the given number of cycles, then stop\r\n\r\nDefault action is to run the ticker once, then stop it\r\n\r\n@property cycles\r\n@type Number\r\n@default 1\r\n**/\r\n        cycles: 1,\r\n        /**\r\nEvent choke value\r\n\r\nA ticker will trigger a __timeupdate__ event on the document object as it runs, with details of the ticker's current state including:\r\n\r\n* __name__\r\n* __tick__ (milliseconds)\r\n\r\nIf the eventChoke attribute is set to 0 (default), no tickerupdate events are fired as the ticker runs - thus this value needs to be set explicitly to make the Ticker emit events. Otherwise, this value represents the time between each event emission\r\n\r\n@property eventChoke\r\n@type Number\r\n@default 0\r\n**/\r\n        eventChoke: 0\r\n    };\r\n    my.mergeInto(my.work.d.Ticker, my.work.d.Base);\r\n    /**\r\nMake a new tickerupdate customEvent object\r\n@method makeTickerUpdateEvent\r\n@return customEvent object, or null if browser does not support custom events\r\n**/\r\n    my.Ticker.prototype.makeTickerUpdateEvent = function() {\r\n        var e = null,\r\n            data = {\r\n                name: this.name,\r\n                type: 'Ticker',\r\n                tick: this.tick,\r\n                reverseTick: this.effectiveDuration - this.tick\r\n            };\r\n        if (window.MSInputMethodContext) {\r\n            //do IE9-11 stuff\r\n            e = document.createEvent('CustomEvent');\r\n            e.initCustomEvent('tickerupdate', true, true, data);\r\n        }\r\n        else {\r\n            if (window.CustomEvent) {\r\n                e = new CustomEvent('tickerupdate', {\r\n                    detail: data,\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n            }\r\n        }\r\n        return e;\r\n    };\r\n    /**\r\nAdd a Tween or Action's name to the Ticker's .subscribers array\r\n\r\n@method subscribe\r\n@param {Array} [items] Array containing String name values, or Objects with a .name attribute; alternatively can be a single String or Object\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.subscribe = function(items) {\r\n        var myItems = [].concat(items),\r\n            i, iz,\r\n            item, safeItem, name,\r\n            pu = my.pushUnique,\r\n            so = my.safeObject;\r\n        for (i = 0, iz = myItems.length; i < iz; i++) {\r\n            item = myItems[i];\r\n            if (item.substring) {\r\n                name = item;\r\n            }\r\n            else {\r\n                safeItem = so(item);\r\n                name = safeItem.name || false;\r\n            }\r\n            if (name) {\r\n                pu(this.subscribers, name);\r\n            }\r\n        }\r\n        if (myItems.length) {\r\n            this.sortSubscribers();\r\n            this.recalculateEffectiveDuration();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRemove a Tween or Action's name from the Ticker's .subscribers array\r\n\r\n@method unsubscribe\r\n@param {Array} [items] Array containing String name values, or Tween/Action Objects with a .name attribute; alternatively can be a single String or Object\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.unsubscribe = function(items) {\r\n        var myItems = [].concat(items),\r\n            i, iz,\r\n            item, safeItem, name,\r\n            ri = my.removeItem,\r\n            so = my.safeObject;\r\n        for (i = 0, iz = myItems.length; i < iz; i++) {\r\n            item = items[i];\r\n            if (item.substring) {\r\n                name = item;\r\n            }\r\n            else {\r\n                safeItem = so(item);\r\n                name = safeItem.name || false;\r\n            }\r\n            if (name) {\r\n                ri(this.subscribers, name);\r\n            }\r\n        }\r\n        if (myItems.length) {\r\n            this.sortSubscribers();\r\n            this.recalculateEffectiveDuration();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRecalculate the ticker's effective duration\r\n\r\n@method recalculateEffectiveDuration\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Ticker.prototype.recalculateEffectiveDuration = function() {\r\n        var i, iz, obj, durationValue, duration = 0,\r\n            t = my.tween;\r\n        if (!this.duration) {\r\n            for (i = 0, iz = this.subscribers.length; i < iz; i++) {\r\n                obj = t[this.subscribers[i]];\r\n                durationValue = obj.getEndTime();\r\n                if (durationValue > duration) {\r\n                    duration = durationValue;\r\n                }\r\n            }\r\n            this.effectiveDuration = duration;\r\n        }\r\n        else {\r\n            this.setEffectiveDuration(); // shouldn't cause an infinite loop ...\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nSet the ticker's effective duration from this.duration\r\n\r\n@method setEffectiveDuration\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Ticker.prototype.setEffectiveDuration = function() {\r\n        var temp;\r\n        if (this.duration) {\r\n            temp = my.convertTime(this.duration);\r\n            if (temp[0] === '%') {\r\n                // cannot use percentage values for ticker durations\r\n                this.duration = 0;\r\n                this.recalculateEffectiveDuration();\r\n            }\r\n            else {\r\n                this.effectiveDuration = temp[1];\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nOrder subscriber tweens by their time attributes, lowest to highest\r\n\r\n@method sortSubscribers\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Ticker.prototype.sortSubscribers = function() {\r\n        my.bucketSort('tween', 'effectiveTime', this.subscribers);\r\n    };\r\n    /**\r\nSet attributes - restricted so that only subscribers, order, duration and cycles attributes can be amended\r\n\r\n@method set\r\n@param {Object} [items] Object containing key:value parameters for updating\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.set = function(items) {\r\n        items = my.safeObject(items);\r\n        var xt = my.xt,\r\n            i, iz, obj;\r\n        if (xt(items.order)) {\r\n            this.order = items.order;\r\n            if (this.active) {\r\n                my.work.resortAnimations = true;\r\n            }\r\n        }\r\n        if (xt(items.cycles)) {\r\n            this.cycles = items.cycles;\r\n            if (!this.cycles) {\r\n                this.cycleCount = 0;\r\n            }\r\n        }\r\n        if (xt(items.subscribers)) {\r\n            this.subscribers = [];\r\n            this.subscribe(items.subscribers);\r\n        }\r\n        if (xt(items.duration)) {\r\n            this.duration = items.duration;\r\n            this.setEffectiveDuration();\r\n            for (i = 0, iz = this.subscribers.length; i < iz; i++) {\r\n                obj = my.tween[this.subscribers[i]];\r\n                obj.calculateEffectiveTime();\r\n                if (obj.type === 'Tween') {\r\n                    obj.calculateEffectiveDuration();\r\n                }\r\n            }\r\n        }\r\n        if (xt(items.killOnComplete)) {\r\n            this.killOnComplete = items.killOnComplete;\r\n        }\r\n        if (xt(items.eventChoke)) {\r\n            this.eventChoke = items.eventChoke;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAnimation function\r\n\r\n@method fn\r\n@chainable\r\n@param {Boolean} [reverseOrder] when true, perform update from last subscriber to first; default false\r\n@private\r\n@return this\r\n**/\r\n    my.Ticker.prototype.fn = function(reverseOrder) {\r\n        var i, iz, subs, sub, eTime, now, e,\r\n            t = my.tween,\r\n            result = {\r\n                tick: 0,\r\n                reverseTick: 0,\r\n                willLoop: false,\r\n                next: false\r\n            };\r\n        reverseOrder = my.xt(reverseOrder) ? reverseOrder : false;\r\n        if (this.active && this.startTime) {\r\n            if (!this.cycles || this.cycleCount < this.cycles) {\r\n                this.currentTime = Date.now();\r\n                this.tick = this.currentTime - this.startTime;\r\n                if (!this.cycles || this.cycleCount + 1 < this.cycles) {\r\n                    if (this.tick >= this.effectiveDuration) {\r\n                        this.tick = 0;\r\n                        this.startTime = this.currentTime;\r\n                        result.tick = this.effectiveDuration;\r\n                        result.reverseTick = 0;\r\n                        result.willLoop = true;\r\n                        if (this.cycles) {\r\n                            this.cycleCount++;\r\n                        }\r\n                    }\r\n                    else {\r\n                        result.tick = this.tick;\r\n                        result.reverseTick = this.effectiveDuration - this.tick;\r\n                    }\r\n                    result.next = true;\r\n                }\r\n                else {\r\n                    if (this.tick >= this.effectiveDuration) {\r\n                        result.tick = this.effectiveDuration;\r\n                        result.reverseTick = 0;\r\n                        this.active = false;\r\n                        if (this.cycles) {\r\n                            this.cycleCount++;\r\n                        }\r\n                    }\r\n                    else {\r\n                        result.tick = this.tick;\r\n                        result.reverseTick = this.effectiveDuration - this.tick;\r\n                        result.next = true;\r\n                    }\r\n                }\r\n                subs = [].concat(this.subscribers);\r\n                if (reverseOrder) {\r\n                    subs.reverse();\r\n                }\r\n                for (i = 0, iz = subs.length; i < iz; i++) {\r\n                    sub = t[subs[i]];\r\n                    sub.update(result);\r\n                }\r\n                // need to add in here code for triggering makeTickerUpdateEvent calls\r\n                if (this.eventChoke) {\r\n                    eTime = this.lastEvent + this.eventChoke;\r\n                    now = Date.now();\r\n                    if (eTime < now) {\r\n                        e = this.makeTickerUpdateEvent();\r\n                        window.dispatchEvent(e);\r\n                        this.lastEvent = now;\r\n                    }\r\n                }\r\n                if (!this.active) {\r\n                    this.halt();\r\n                }\r\n                if (this.killOnComplete && this.cycleCount >= this.cycles) {\r\n                    this.killTweens(true);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\nChange the supplied attributes for each subscribed tween and action\r\n\r\n@method updateSubscribers\r\n@param {Object} items Object containing key:value parameters for updating\r\n@param {Boolean} [reversed] when true, perform update from last subscriber to first; default false\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Ticker.prototype.updateSubscribers = function(items, reversed) {\r\n        var subs = [].concat(this.subscribers);\r\n        reversed = (my.xt(reversed)) ? reversed : false;\r\n        if (reversed) {\r\n            subs.reverse();\r\n        }\r\n        for (var i = 0, iz = subs.length; i < iz; i++) {\r\n            scrawl.tween[subs[i]].set(items);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nBulk-change the playing direction for all subscribed tweens and actions\r\n\r\n@method changeSubscriberDirection\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Ticker.prototype.changeSubscriberDirection = function() {\r\n        var subs = [].concat(this.subscribers),\r\n            sub;\r\n        for (var i = 0, iz = subs.length; i < iz; i++) {\r\n            sub = scrawl.tween[subs[i]];\r\n            sub.reversed = !sub.reversed;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nStart ticker from 0\r\n\r\n@method run\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.run = function() {\r\n        if (!this.active) {\r\n            this.startTime = this.currentTime = Date.now();\r\n            this.cycleCount = 0;\r\n            this.updateSubscribers({\r\n                reversed: false\r\n            });\r\n            this.active = true;\r\n            this.fn(true);\r\n            my.pushUnique(my.work.animate, this.name);\r\n            my.work.resortAnimations = true;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nReset ticker to initial conditions\r\n\r\n@method reset\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.reset = function() {\r\n        if (this.active) {\r\n            this.halt();\r\n        }\r\n        this.startTime = this.currentTime = Date.now();\r\n        this.cycleCount = 0;\r\n        this.updateSubscribers({\r\n            reversed: false\r\n        });\r\n        this.active = true;\r\n        this.fn(true);\r\n        this.active = false;\r\n        return this;\r\n    };\r\n    /**\r\nReset ticker to final conditions\r\n\r\n@method complete\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.complete = function() {\r\n        if (this.active) {\r\n            this.halt();\r\n        }\r\n        this.startTime = this.currentTime = Date.now();\r\n        this.cycleCount = 0;\r\n        this.updateSubscribers({\r\n            reversed: true\r\n        });\r\n        this.active = true;\r\n        this.fn();\r\n        this.active = false;\r\n        return this;\r\n    };\r\n    /**\r\nReverse tracker direction and continue playing\r\n\r\n@method reverse\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.reverse = function() {\r\n        var timePlayed;\r\n        if (this.active) {\r\n            this.halt();\r\n        }\r\n        timePlayed = this.currentTime - this.startTime;\r\n        this.startTime = this.currentTime - (this.effectiveDuration - timePlayed);\r\n        this.changeSubscriberDirection();\r\n        this.active = true;\r\n        this.fn();\r\n        this.active = false;\r\n        return this;\r\n    };\r\n    /**\r\nHalt ticker\r\n\r\n@method halt\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.halt = function() {\r\n        this.active = false;\r\n        my.removeItem(my.work.animate, this.name);\r\n        my.work.resortAnimations = true;\r\n        return this;\r\n    };\r\n    /**\r\nResume ticker\r\n\r\n@method resume\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.resume = function() {\r\n        var now, current, start;\r\n        if (!this.active) {\r\n            now = Date.now(),\r\n            current = this.currentTime,\r\n            start = this.startTime;\r\n            this.startTime = now - (current - start);\r\n            this.currentTime = now;\r\n            this.active = true;\r\n            my.pushUnique(my.work.animate, this.name);\r\n            my.work.resortAnimations = true;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nseekTo a different specific point on the ticker\r\n\r\n@method seekTo\r\n@param {Number} seekto time in milliseconds from start of ticker; default 0 - effectively sets ticker back to starting conditions\r\n@param {Boolean} [resume] - flag - when true, the resume() function will trigger; false (default) triggers a single call to the fn() function\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.seekTo = function(milliseconds, resume) {\r\n        var xtGet = my.xtGet,\r\n            backwards = false;\r\n        milliseconds = xtGet(milliseconds, 0);\r\n        resume = xtGet(resume, false);\r\n        if (this.active) {\r\n            this.halt();\r\n        }\r\n        if (this.cycles && this.cycleCount >= this.cycles) {\r\n            this.cycleCount = this.cycles - 1;\r\n        }\r\n        if (milliseconds < this.tick) {\r\n            backwards = true;\r\n        }\r\n        this.currentTime = Date.now();\r\n        this.startTime = this.currentTime - milliseconds;\r\n        this.active = true;\r\n        this.fn(backwards);\r\n        this.active = false;\r\n        if (resume) {\r\n            this.resume();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nseekFor a different relative point on the ticker\r\n\r\n@method seekFor\r\n@param {Number} seekfor time in milliseconds from current tick; default 0 - no change\r\n@param {Boolean} [resume] - flag - when true, the resume() function will trigger; false (default) triggers a single call to the fn() function\r\n@chainable\r\n@return this\r\n**/\r\n    my.Ticker.prototype.seekFor = function(milliseconds, resume) {\r\n        var xtGet = my.xtGet,\r\n            backwards = false;\r\n        milliseconds = xtGet(milliseconds, 0);\r\n        milliseconds = xtGet(resume, false);\r\n        if (this.active) {\r\n            this.halt();\r\n        }\r\n        if (this.cycles && this.cycleCount >= this.cycles) {\r\n            this.cycleCount = this.cycles - 1;\r\n        }\r\n        this.startTime -= milliseconds;\r\n        if (milliseconds < 0) {\r\n            backwards = true;\r\n        }\r\n        this.active = true;\r\n        this.fn(backwards);\r\n        this.active = false;\r\n        if (resume) {\r\n            this.resume();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRemove this Ticker from the scrawl library\r\n@method kill\r\n@return Always true\r\n**/\r\n    my.Ticker.prototype.kill = function() {\r\n        if (this.active) {\r\n            this.halt();\r\n        }\r\n        delete my.animation[this.name];\r\n        my.removeItem(my.animationnames, this.name);\r\n        my.removeItem(my.work.animate, this.name);\r\n        my.work.resortAnimations = true;\r\n        return true;\r\n    };\r\n    /**\r\nRemove this Ticker from the scrawl library (if argument is true), alongside any tweens associated with it\r\n@method killTweens\r\n@return true if argument is true; this otherwise (default)\r\n**/\r\n    my.Ticker.prototype.killTweens = function(autokill) {\r\n        var i, iz, sub,\r\n            t = my.tween;\r\n        autokill = (my.xt(autokill)) ? autokill : false;\r\n        for (i = 0, iz = this.subscribers.length; i < iz; i++) {\r\n            sub = t[this.subscribers[i]];\r\n            sub.kill();\r\n        }\r\n        if (autokill) {\r\n            this.kill();\r\n            return true;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n# Action\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeAction()\r\n\r\n## Purpose\r\n\r\n* Defines a reversible function which can subscribe to a ticker so that it gets invoked at a particular moment after the ticker starts to run\r\n\r\nActions only really make sense when they are associated with a Ticker object. They have no duration as such (unless their action/revert functions include asynchronous activities, in which case - you're on your own!). The action() function should define a set of near-instant actions; the revert() function should mirror the action, to allow the Action object to be reversible.\r\n\r\nAction and revert functions are not expected to take any arguments - they are expected to act on the objects assigned to their __targets__ Array\r\n\r\nTo access the Action functions directly, assign it to a variable, or call it from the library: \r\n\r\n* scrawl.tween[ACTIONNAME].action()\r\n* scrawl.tween[ACTIONNAME].revert()\r\n\r\n## Access\r\n\r\n* scrawl.tween.ACTIONNAME - for the Action object\r\n\r\n## Action functions\r\n\r\n* An Action can be invoked by calling its __action()__ function.\r\n* An Action can be reversed by calling its __revert()__ function.\r\n* An Action can be deleted by calling the __kill()__ function on it.\r\n\r\n@class Action\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Action = function(items) {\r\n        var xtGet = my.xtGet;\r\n        my.Base.call(this, items);\r\n        items = my.safeObject(items);\r\n        if (my.xt(items.targets)) {\r\n            this.setTargets(items.targets);\r\n        }\r\n        else {\r\n            this.targets = [];\r\n        }\r\n        this.reverseOnCycleEnd = xtGet(items.reverseOnCycleEnd, false);\r\n        this.reversed = xtGet(items.reversed, false);\r\n        this.action = (typeof items.action === 'function') ? items.action : function() {};\r\n        this.revert = (typeof items.revert === 'function') ? items.revert : function() {};\r\n        this.time = xtGet(items.time, 0);\r\n        this.order = xtGet(items.order, 0);\r\n        this.triggered = false;\r\n        this.calculateEffectiveTime();\r\n        my.tween[this.name] = this;\r\n        my.pushUnique(my.tweennames, this.name);\r\n        this.ticker = '';\r\n        if (my.xt(items.ticker)) {\r\n            this.addToTicker(items.ticker);\r\n        }\r\n        return this;\r\n    };\r\n    my.Action.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Action'\r\n@final\r\n**/\r\n    my.Action.prototype.type = 'Action';\r\n    my.Action.prototype.classname = 'tweennames';\r\n    my.work.d.Action = {\r\n        /**\r\nTicker name\r\nIf an Action object is associated with a ticker, it will fire (or revert) at the appropriate point in the course of the ticker's run.\r\n@property ticker\r\n@type String\r\n@default ''\r\n**/\r\n        ticker: '',\r\n        /**\r\nArray of Objects on which this Action will perform its action and revert functions; if the array includes Strings, the constructor, set and clone functions will search for the Objects in the Scrawl library, checking sections (if they currently exist) in the following order: \r\n\r\n* entity, cell, pad, stack, element, point, group, design, animation, tween, anim, filter, image, force, spring, physics\r\n\r\nThis attribute can also accept a single Object or String as its value in the \r\n\r\n@property targets\r\n@type Array\r\n@default []\r\n**/\r\n        targets: [],\r\n        /**\r\nAction function\r\n@property action\r\n@type Function\r\n@default function(){}\r\n**/\r\n        action: function() {},\r\n        /**\r\nRevert function - should reverse the actions of the .action function\r\n@property revert\r\n@type Function\r\n@default function(){}\r\n**/\r\n        revert: function() {},\r\n        /**\r\nTime - point (in milliseconds) following the start of the Action's ticker when the action function will trigger\r\n@property time\r\n@type Number\r\n@default 0\r\n**/\r\n        time: 0,\r\n        /**\r\nReversable flag - when true, the action will alternate the tick and reverseTick values as the ticker cycles\r\n@property reverseOnCycleEnd\r\n@type Boolean\r\n@default false\r\n**/\r\n        reverseOnCycleEnd: false,\r\n        /**\r\nReversed - when true, the action is using reverseTick value\r\n@property reversed\r\n@type Boolean\r\n@default false\r\n**/\r\n        reversed: false,\r\n        /**\r\nSort order - for Actions that share the same time value on a given Ticker. Without a sort order, there will be no guarantee which actions with the same time value will be performed first\r\n@property order\r\n@type Number\r\n@default 0\r\n**/\r\n        order: 0\r\n    };\r\n    my.mergeInto(my.work.d.Action, my.work.d.Base);\r\n    /**\r\nGet the effective (millisecond number) time when action will trigger\r\n@method calculateEffectiveTime\r\n@param {String} [item] new time value; defaults to this.time\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Action.prototype.calculateEffectiveTime = function(item) {\r\n        var time = my.xtGet(item, this.time),\r\n            calculatedTime = my.convertTime(time),\r\n            cTime = calculatedTime[1],\r\n            cType = calculatedTime[0],\r\n            ticker, tickerDuration = 0;\r\n        this.effectiveTime = 0;\r\n        if (cType === '%' && cTime <= 100) {\r\n            if (this.ticker) {\r\n                ticker = my.animation[this.ticker];\r\n                if (ticker) {\r\n                    tickerDuration = ticker.effectiveDuration;\r\n                    this.effectiveTime = tickerDuration * (cTime / 100);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.effectiveTime = cTime;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdd action to given ticker\r\n\r\nIf action is already subscribed to a different ticker, the function will automatically unsubscribe from that ticker before subscribing to the new ticker\r\n@method addToTicker\r\n@param {String} item TICKERNAME to which this Action will subscribe  \r\n@chainable\r\n@return this\r\n**/\r\n    my.Action.prototype.addToTicker = function(item) {\r\n        var xt = my.xt,\r\n            tick;\r\n        if (xt(item)) {\r\n            if (this.ticker && this.ticker !== item) {\r\n                this.removeFromTicker(this.ticker);\r\n            }\r\n            tick = my.animation[item];\r\n            if (xt(tick)) {\r\n                this.ticker = item;\r\n                tick.subscribe(this.name);\r\n                this.calculateEffectiveTime();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRemove action from given ticker\r\n@method removeFromTicker\r\n@param {String} item TICKERNAME to which this Action will unsubscribe  \r\n@chainable\r\n@return this\r\n**/\r\n    my.Action.prototype.removeFromTicker = function(item) {\r\n        var xt = my.xt,\r\n            tick;\r\n        if (xt(item)) {\r\n            tick = my.animation[item];\r\n            if (xt(tick)) {\r\n                this.ticker = '';\r\n                tick.unsubscribe(this.name);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nretrieve the completion time for the action\r\n@method getEndTime\r\n@private\r\n@return Number\r\n**/\r\n    my.Action.prototype.getEndTime = function() {\r\n        return this.effectiveTime;\r\n    };\r\n    /**\r\nInvestigate the data supplied by the ticker and, if necessary, invoke the action or revert functions, as appropriate\r\n\r\nThe object passed by the ticker has the following attributes:\r\n\r\n* tick - milliseconds since ticker started its run\r\n* reverseTick - milliseconds before ticker reaches the end of its run\r\n* willLoop - boolean indicating whether ticker is about to restart\r\n* next - boolean indicating whether this is the ticker's last update\r\n\r\n@method update\r\n@param {Object} items Object sent by ticker  \r\n@private\r\n@return always true\r\n**/\r\n    my.Action.prototype.update = function(items) {\r\n        if (this.reversed) {\r\n            if (items.reverseTick >= this.effectiveTime) {\r\n                if (!this.triggered) {\r\n                    this.action();\r\n                    this.triggered = true;\r\n                }\r\n            }\r\n            else {\r\n                if (this.triggered) {\r\n                    this.revert();\r\n                    this.triggered = false;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (items.tick >= this.effectiveTime) {\r\n                if (!this.triggered) {\r\n                    this.action();\r\n                    this.triggered = true;\r\n                }\r\n            }\r\n            else {\r\n                if (this.triggered) {\r\n                    this.revert();\r\n                    this.triggered = false;\r\n                }\r\n            }\r\n        }\r\n        if (this.reverseOnCycleEnd && items.willLoop) {\r\n            if (items.next) {\r\n                this.reversed = !this.reversed;\r\n            }\r\n            else {\r\n                this.reversed = false;\r\n                this.triggered = false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\nSet attributes\r\n@method set\r\n@param {Object} Object containing key:value attributes\r\n@chainable\r\n@return this\r\n**/\r\n    my.Action.prototype.set = function(items) {\r\n        var xt = my.xt,\r\n            ticker;\r\n        items = my.safeObject(items);\r\n        ticker = (xt(items.ticker)) ? this.ticker : false;\r\n        // if either ticker or time change, then this.effectiveTime will need recalculation\r\n        if (ticker) {\r\n            this.ticker = ticker;\r\n            this.addToTicker(items.ticker);\r\n        }\r\n        else if (xt(items.time)) {\r\n            this.time = items.time;\r\n            this.calculateEffectiveTime();\r\n        }\r\n        if (xt(items.targets)) {\r\n            this.setTargets(items.targets);\r\n        }\r\n        if (my.xto(items.reverseOnCycleEnd, items.reversed, items.order)) {\r\n            if (xt(items.reverseOnCycleEnd)) {\r\n                this.reverseOnCycleEnd = items.reverseOnCycleEnd;\r\n            }\r\n            if (xt(items.reversed)) {\r\n                this.reversed = items.reversed;\r\n            }\r\n            if (xt(items.order)) {\r\n                this.order = items.order;\r\n            }\r\n        }\r\n        if (xt(items.triggered) && this.triggered !== items.triggered) {\r\n            if (items.triggered) {\r\n                this.action();\r\n            }\r\n            else {\r\n                this.revert();\r\n            }\r\n            this.triggered = items.triggered;\r\n        }\r\n        if (xt(items.action)) {\r\n            this.action = items.action;\r\n            if (typeof this.action !== 'function') {\r\n                this.action = function() {};\r\n            }\r\n        }\r\n        if (xt(items.revert)) {\r\n            this.revert = items.revert;\r\n            if (typeof this.revert !== 'function') {\r\n                this.revert = function() {};\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nSet targets attribute - assumes that the supplied Array will replace, not amend, any existing targets array\r\n@method setTargets\r\n@param {Array} items Array of Objects and/or Strings, can also be single Object or string\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Action.prototype.setTargets = function(items) {\r\n        items = [].concat(items);\r\n        var newTargets = [],\r\n            item, i, iz, result;\r\n        for (i = 0, iz = items.length; i < iz; i++) {\r\n            item = items[i];\r\n            if (typeof item === 'function') {\r\n                if (typeof item.set === 'function') {\r\n                    newTargets.push(item);\r\n                }\r\n            }\r\n            else if (typeof item === 'object' && my.xt(item.name)) {\r\n                newTargets.push(item);\r\n            }\r\n            else {\r\n                result = my.locateTarget(item);\r\n                if (result) {\r\n                    newTargets.push(result);\r\n                }\r\n            }\r\n        }\r\n        this.targets = newTargets;\r\n        return this;\r\n    };\r\n    /**\r\nAdd Objects to targets attribute - assumes that the supplied Array will augment any existing targets array\r\n@method addToTargets\r\n@param {Array} items Array of Objects and/or Strings, can also be single Object or string\r\n@chainable\r\n@return this\r\n**/\r\n    my.Action.prototype.addToTargets = function(items) {\r\n        items = [].concat(items);\r\n        var item, i, iz, result;\r\n        for (i = 0, iz = items.length; i < iz; i++) {\r\n            item = items[i];\r\n            if (typeof item === 'function') {\r\n                if (typeof item.set === 'function') {\r\n                    this.targets.push(item);\r\n                }\r\n            }\r\n            else {\r\n                result = my.locateTarget(item);\r\n                if (result) {\r\n                    this.targets.push(result);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRemove Objects from targets attribute - will not remove an object with no name and/or type attributes\r\n@method removeFromTargets\r\n@param {Array} items Array of Objects and/or Strings, can also be single Object or string\r\n@chainable\r\n@return this\r\n**/\r\n    my.Action.prototype.removeFromTargets = function(items) {\r\n        items = [].concat(items);\r\n        var item, i, iz, j, jz, k, kz,\r\n            t, type, name, doRemove, obj, objName,\r\n            identifiers = [],\r\n            newTargets = [].concat(this.targets),\r\n            contains = my.contains;\r\n        for (j = 0, jz = newTargets.length; j < jz; j++) {\r\n            t = newTargets[j];\r\n            type = t.type || 'unknown';\r\n            name = t.name || 'unnamed';\r\n            if (type !== 'unknown' && name !== 'unnamed') {\r\n                identifiers.push(type + '_' + name);\r\n            }\r\n        }\r\n        for (i = 0, iz = items.length; i < iz; i++) {\r\n            item = items[i];\r\n            obj = false;\r\n            if (typeof item === 'function') {\r\n                obj = item;\r\n            }\r\n            else {\r\n                // obj = this.locateTarget(item);\r\n                obj = my.locateTarget(item);\r\n            }\r\n            if (obj) {\r\n                type = obj.type || 'unknown';\r\n                name = obj.name || 'unnamed';\r\n                if (type !== 'unknown' && name !== 'unnamed') {\r\n                    objName = type + '_' + name;\r\n                    doRemove = identifiers.indexOf(objName);\r\n                    if (doRemove >= 0) {\r\n                        newTargets[doRemove] = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.targets = [];\r\n        for (k = 0, kz = newTargets; k < kz; k++) {\r\n            if (newTargets[k]) {\r\n                this.targets.push(newTargets[k]);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nCreate a clone of this Action\r\n\r\nNote: strongly advise every call to this function includes newly created anonymous functions for the action and revert attributes in the argument object - Scrawl's clone functionality does not clone function attributes!\r\n\r\n@method clone\r\n@param {Object} Object containing key:value attributes\r\n@chainable\r\n@return a new copy of the Action object\r\n**/\r\n    my.Action.prototype.clone = function(items) {\r\n        items = my.safeObject(items);\r\n        var c, xt = my.xt;\r\n        c = my.Base.prototype.clone.call(this, items);\r\n        if (xt(items.targets)) {\r\n            c.setTargets(items.targets);\r\n        }\r\n        else {\r\n            c.targets = [].concat(this.targets);\r\n        }\r\n        c.reverseOnCycleEnd = (xt(items.reverseOnCycleEnd)) ? items.reverseOnCycleEnd : this.reverseOnCycleEnd;\r\n        c.revert = (xt(items.revert)) ? items.revert : this.revert;\r\n        c.action = (xt(items.action)) ? items.action : this.action;\r\n        c.revert = (xt(items.revert)) ? items.revert : this.revert;\r\n        c.time = (xt(items.time)) ? items.time : this.time;\r\n        c.order = (xt(items.order)) ? items.order : this.order;\r\n        c.triggered = false;\r\n        c.calculateEffectiveTime();\r\n        return c;\r\n    };\r\n    /**\r\nRemove this Action from the scrawl library\r\n@method kill\r\n@return Always true\r\n**/\r\n    my.Action.prototype.kill = function() {\r\n        if (this.ticker) {\r\n            this.removeFromTicker(this.ticker);\r\n        }\r\n        delete my.tween[this.name];\r\n        my.removeItem(my.tweennames, this.name);\r\n        return true;\r\n    };\r\n    /**\r\nUpdate target attributes\r\n@method updateTargets\r\n@param {Object} items - containing key:value attributes to be forwarded to target set() functions\r\n@chainable\r\n@return this\r\n**/\r\n    my.Action.prototype.updateTargets = function(items) {\r\n        for (var i = 0, iz = this.targets.length; i < iz; i++) {\r\n            this.targets[i].set(items);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n# Tween\r\n\r\n## Instantiation\r\n\r\n* scrawl.makeTween()\r\n\r\n## Purpose\r\n\r\n* Defines a set of attribute update definitions for objects\r\n\r\n## Access\r\n\r\n* scrawl.tween.TWEENNAME - for the Tween object\r\n\r\n## Tween functions\r\n\r\n* A Tween can be deleted by calling the __kill()__ function on it.\r\n\r\n@class Tween\r\n@constructor\r\n@extends Base\r\n@param {Object} [items] Key:value Object argument for setting attributes\r\n**/\r\n    my.Tween = function(items) {\r\n        var xtGet = my.xtGet,\r\n            xt = my.xt,\r\n            tickerName;\r\n        my.Base.call(this, items);\r\n        items = my.safeObject(items);\r\n        this.ticker = xtGet(items.ticker, '');\r\n        if (my.xt(items.targets)) {\r\n            this.setTargets(items.targets);\r\n        }\r\n        else {\r\n            this.targets = [];\r\n        }\r\n        this.definitions = xt(items.definitions) ? [].concat(items.definitions) : [];\r\n        this.setDefinitionsValues();\r\n        this.time = xtGet(items.time, 0);\r\n        this.duration = xtGet(items.duration, 0);\r\n        this.reverseOnCycleEnd = xtGet(items.reverseOnCycleEnd, false);\r\n        this.reversed = xtGet(items.reversed, false);\r\n        this.order = xtGet(items.order, 0);\r\n        this.action = (xt(items.action)) ? items.action : false;\r\n        this.status = 'before';\r\n        this.calculateEffectiveTime();\r\n        this.calculateEffectiveDuration();\r\n        my.tween[this.name] = this;\r\n        my.pushUnique(my.tweennames, this.name);\r\n        this.ticker = '';\r\n        if (my.xt(items.ticker)) {\r\n            this.addToTicker(items.ticker);\r\n        }\r\n        else {\r\n            // here is where we create the ticker - will have same name as the tween\r\n            tickerName = this.name + '_ticker';\r\n            my.makeTicker({\r\n                name: tickerName,\r\n                order: this.order,\r\n                subscribers: this.name,\r\n                duration: this.effectiveDuration,\r\n                eventChoke: xtGet(items.eventChoke, 0),\r\n                cycles: xtGet(items.cycles, 1),\r\n                killOnComplete: xtGet(items.killOnComplete, false)\r\n            });\r\n            this.ticker = tickerName;\r\n            my.animation[tickerName].recalculateEffectiveDuration();\r\n        }\r\n        return this;\r\n    };\r\n    my.Tween.prototype = Object.create(my.Base.prototype);\r\n    /**\r\n@property type\r\n@type String\r\n@default 'Tween'\r\n@final\r\n**/\r\n    my.Tween.prototype.type = 'Tween';\r\n    my.Tween.prototype.classname = 'tweennames';\r\n    my.work.d.Tween = {\r\n        /**\r\nTicker name\r\nIf a Tween object is associated with a ticker, it will fire (or revert) at the appropriate point in the course of the ticker's run.\r\n@property ticker\r\n@type String\r\n@default ''\r\n**/\r\n        ticker: '',\r\n        /**\r\nArray of Objects on which this Tween will perform its action and revert functions; if the array includes Strings, the constructor, set and clone functions will search for the Objects in the Scrawl library, checking sections (if they currently exist) in the following order: \r\n\r\n* entity, cell, pad, stack, element, point, group, design, animation, tween, anim, filter, image, force, spring, physics\r\n\r\nThis attribute can also accept a single Object or String as its value in the \r\n\r\n@property targets\r\n@type Array\r\n@default []\r\n**/\r\n        targets: [],\r\n        /**\r\nArray of Objects which define the actions this tween will take. The Objects must include the following attributes: \r\n* attribute - (required) a String of the attribute key value\r\n* start - (required) a Number or String value determining the point on the Ticker at which the tween will activate (eg: 100, '10%', '2px')\r\n* end - (required) a Number or String value determining the point on the Ticker at which the tween will deactivate (eg: 900, '90%', '50px')\r\n* engine - (optional) a String value supplying the name of the easing engine to use; default 'linear'\r\n* integer - (optional) a Boolean: when true, the calculated value will have Math.round() applied before targets are set; default false\r\n\r\nThis attribute can also accept a single Object as its value \r\n\r\n@property definitions\r\n@type Array\r\n@default []\r\n**/\r\n        definitions: [],\r\n        /**\r\nTime - point (in milliseconds) following the start of the Tween's ticker when the tween will trigger\r\n@property time\r\n@type Number\r\n@default 0\r\n**/\r\n        time: 0,\r\n        /**\r\nFunction to be called at the end of each tween recalculation - takes no arguments\r\n@property action\r\n@type Function\r\n@default false\r\n**/\r\n        action: false,\r\n        /**\r\nDuration - time required for tween to run\r\n@property duration\r\n@type Number\r\n@default 0\r\n**/\r\n        duration: 0,\r\n        /**\r\nReversable flag - when true, the tween will reverse its direction of play as each ticker cycle completes; default false (will go back to beginning and play in the current direction)\r\n@property reverseOnCycleEnd\r\n@type Boolean\r\n@default false\r\n**/\r\n        reverseOnCycleEnd: false,\r\n        /**\r\nReversed - determines the directin in which the tween will run - true means that reverseTick values will be used for calculations; default false\r\n@property reversed\r\n@type Boolean\r\n@default false\r\n**/\r\n        reversed: false,\r\n        /**\r\nSort order - for Actions that share the same time value on a given Ticker. Without a sort order, there will be no guarantee which actions with the same time value will be performed first\r\n@property order\r\n@type Number\r\n@default 0\r\n**/\r\n        order: 0\r\n    };\r\n    my.mergeInto(my.work.d.Tween, my.work.d.Base);\r\n    /**\r\nretrieve the completion time for the action\r\n@method getEndTime\r\n@private\r\n@return Number\r\n**/\r\n    my.Tween.prototype.getEndTime = function() {\r\n        return this.effectiveTime + this.effectiveDuration;\r\n    };\r\n    /**\r\nGet the effective (millisecond number) time when tween will trigger\r\n@method calculateEffectiveTime\r\n@param {String} [item] new time value; defaults to this.time\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Tween.prototype.calculateEffectiveTime = function(item) {\r\n        my.Action.prototype.calculateEffectiveTime.call(this, item);\r\n        return this;\r\n    };\r\n    /**\r\nGet the effective (millisecond number) duration for the tween\r\n@method calculateEffectiveDuration\r\n@param {String} [item] new time value; defaults to this.time\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Tween.prototype.calculateEffectiveDuration = function(item) {\r\n        var tweenDuration = my.xtGet(item, this.duration),\r\n            calculatedDur = my.convertTime(tweenDuration),\r\n            cDur = calculatedDur[1],\r\n            cType = calculatedDur[0],\r\n            ticker, tickerDuration = 0;\r\n        this.effectiveDuration = 0;\r\n        if (cType === '%') {\r\n            if (this.ticker) {\r\n                ticker = my.animation[this.ticker];\r\n                if (ticker) {\r\n                    tickerDuration = ticker.effectiveDuration;\r\n                    this.effectiveDuration = tickerDuration * (cDur / 100);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.effectiveDuration = cDur;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nAdd tween to given ticker\r\n\r\nIf tween is already subscribed to a different ticker, the function will automatically unsubscribe from that ticker before subscribing to the new ticker\r\n@method addToTicker\r\n@param {String} item TICKERNAME to which this Tween will subscribe  \r\n@chainable\r\n@return this\r\n**/\r\n    my.Tween.prototype.addToTicker = function(item) {\r\n        my.Action.prototype.addToTicker.call(this, item);\r\n        this.calculateEffectiveDuration();\r\n        return this;\r\n    };\r\n    /**\r\nRemove action from given ticker\r\n@method removeFromTicker\r\n@param {String} item TICKERNAME to which this Tween will unsubscribe  \r\n@chainable\r\n@return this\r\n**/\r\n    my.Tween.prototype.removeFromTicker = function(item) {\r\n        my.Action.prototype.removeFromTicker.call(this, item);\r\n        return this;\r\n    };\r\n    /**\r\nInvestigate the data supplied by the ticker and, if necessary, invoke the action or revert functions, as appropriate\r\n\r\nThe object passed by the ticker has the following attributes:\r\n\r\n* tick - milliseconds since ticker started its run\r\n* reverseTick - milliseconds before ticker reaches the end of its run\r\n* willLoop - boolean indicating whether ticker is about to restart\r\n* next - boolean indicating whether this is the ticker's last update\r\n\r\n@method update\r\n@param {Object} items Object sent by ticker  \r\n@private\r\n@return always true\r\n**/\r\n    my.Tween.prototype.update = function(items) {\r\n        items = my.safeObject(items);\r\n        var starts, ends,\r\n            tick = items.tick || 0,\r\n            revTick = items.reverseTick || 0,\r\n            status = 'running';\r\n\r\n        // 1. Should we do work for this tween?\r\n        if (!this.reversed) {\r\n            starts = this.effectiveTime;\r\n            ends = this.effectiveTime + this.effectiveDuration;\r\n            if (tick < starts) {\r\n                status = 'before';\r\n            }\r\n            else if (tick > ends) {\r\n                status = 'after';\r\n            }\r\n        }\r\n        else {\r\n            starts = this.effectiveTime + this.effectiveDuration;\r\n            ends = this.effectiveTime;\r\n            if (revTick > starts) {\r\n                status = 'after';\r\n            }\r\n            else if (revTick < ends) {\r\n                status = 'before';\r\n            }\r\n        }\r\n\r\n        // for tweens with a duration > 0\r\n        if (this.effectiveDuration) {\r\n            if (status === 'running' || status !== this.status) {\r\n                this.status = status;\r\n                this.doSimpleUpdate(items);\r\n                this.updateCleanup(items);\r\n            }\r\n        }\r\n        // for tweens with a duration == 0\r\n        else {\r\n            if (status !== this.status) {\r\n                this.status = status;\r\n                this.doSimpleUpdate(items);\r\n                this.updateCleanup(items);\r\n            }\r\n        }\r\n        if (items.willLoop) {\r\n            if (this.reverseOnCycleEnd) {\r\n                this.reversed = !this.reversed;\r\n            }\r\n            else {\r\n                this.status = 'before';\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\nPerform a simple update\r\n@method doSimpleUpdate\r\n@param {Object} items Object sent by ticker  \r\n@private\r\n@return always true\r\n**/\r\n    my.Tween.prototype.doSimpleUpdate = function(items) {\r\n        items = my.safeObject(items);\r\n        var starts = this.effectiveTime,\r\n            effectiveTick,\r\n            actions = my.Tween.prototype.engineActions,\r\n            i, iz, j, jz, def, progress,\r\n            setObj = {};\r\n\r\n        // 2. Ticks only run forward - check if tween is in reverse mode\r\n        effectiveTick = (this.reversed) ? items.reverseTick - starts : items.tick - starts;\r\n\r\n        // 3. determine the current progress of the tween\r\n        if (this.effectiveDuration && this.status === 'running') {\r\n            progress = effectiveTick / this.effectiveDuration;\r\n        }\r\n        else {\r\n            progress = (this.status === 'after') ? 1 : 0;\r\n        }\r\n\r\n        // 4. calculate the current value for each definition\r\n        for (i = 0, iz = this.definitions.length; i < iz; i++) {\r\n            def = this.definitions[i];\r\n            if (def.engine.substring) {\r\n                def.value = actions[def.engine](def.effectiveStart, def.effectiveChange, progress);\r\n            }\r\n            else {\r\n                def.value = def.engine(def.effectiveStart, def.effectiveChange, progress);\r\n            }\r\n            if (def.integer) {\r\n                def.value = Math.round(def.value);\r\n            }\r\n            if (def.suffix) {\r\n                def.value += def.suffix;\r\n            }\r\n            setObj[def.attribute] = def.value;\r\n        }\r\n\r\n        // 5. Apply all definitions updates to target objects\r\n        for (j = 0, jz = this.targets.length; j < jz; j++) {\r\n            this.targets[j].set(setObj);\r\n        }\r\n\r\n        // 6. perform any action\r\n        if (this.action) {\r\n            this.action();\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\nupdate cleanup\r\n@method updateCleanup\r\n@param {Object} items Object sent by ticker  \r\n@private\r\n@return always true\r\n**/\r\n    my.Tween.prototype.updateCleanup = function(items) {\r\n        items = my.safeObject(items);\r\n        // do cleanup stuff here\r\n        if (!items.next) {\r\n            this.status = (this.reverse) ? 'before' : 'after';\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\nTween engine helper object\r\n@method engineActions\r\n@private\r\n**/\r\n    my.Tween.prototype.engineActions = {\r\n        out: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (start + change) + (Math.cos((position * 90) * my.work.radian) * -change);\r\n        },\r\n        in : function(start, change, position) {\r\n            return start + (Math.sin((position * 90) * my.work.radian) * change);\r\n        },\r\n        easeIn: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (start + change) + ((temp * temp) * -change);\r\n        },\r\n        easeIn3: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (start + change) + ((temp * temp * temp) * -change);\r\n        },\r\n        easeIn4: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (start + change) + ((temp * temp * temp * temp) * -change);\r\n        },\r\n        easeIn5: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (start + change) + ((temp * temp * temp * temp * temp) * -change);\r\n        },\r\n        easeOutIn: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (position < 0.5) ?\r\n                start + ((position * position) * change * 2) :\r\n                (start + change) + ((temp * temp) * -change * 2);\r\n        },\r\n        easeOutIn3: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (position < 0.5) ?\r\n                start + ((position * position * position) * change * 4) :\r\n                (start + change) + ((temp * temp * temp) * -change * 4);\r\n        },\r\n        easeOutIn4: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (position < 0.5) ?\r\n                start + ((position * position * position * position) * change * 8) :\r\n                (start + change) + ((temp * temp * temp * temp) * -change * 8);\r\n        },\r\n        easeOutIn5: function(start, change, position) {\r\n            var temp = 1 - position;\r\n            return (position < 0.5) ?\r\n                start + ((position * position * position * position * position) * change * 16) :\r\n                (start + change) + ((temp * temp * temp * temp * temp) * -change * 16);\r\n        },\r\n        easeOut: function(start, change, position) {\r\n            return start + ((position * position) * change);\r\n        },\r\n        easeOut3: function(start, change, position) {\r\n            return start + ((position * position * position) * change);\r\n        },\r\n        easeOut4: function(start, change, position) {\r\n            return start + ((position * position * position * position) * change);\r\n        },\r\n        easeOut5: function(start, change, position) {\r\n            return start + ((position * position * position * position * position) * change);\r\n        },\r\n        linear: function(start, change, position) {\r\n            return start + (position * change);\r\n        }\r\n    };\r\n    /**\r\nSet attributes\r\n@method set\r\n@param {Object} Object containing key:value attributes\r\n@chainable\r\n@return this\r\n**/\r\n    my.Tween.prototype.set = function(items) {\r\n        var xt = my.xt,\r\n            ticker;\r\n        items = my.safeObject(items);\r\n        ticker = (xt(items.ticker)) ? this.ticker : false;\r\n        my.Base.prototype.set.call(this, items);\r\n        // if either ticker or time change, then this.effectiveTime will need recalculation\r\n        if (ticker) {\r\n            this.ticker = ticker;\r\n            this.addToTicker(items.ticker);\r\n        }\r\n        else if (my.xto(items.time, items.duration)) {\r\n            this.calculateEffectiveTime();\r\n            this.calculateEffectiveDuration();\r\n        }\r\n        if (xt(items.targets)) {\r\n            this.setTargets(items.targets);\r\n        }\r\n        if (xt(items.definitions)) {\r\n            this.definitions = [].concat(items.definitions);\r\n            this.setDefinitionsValues();\r\n        }\r\n        if (xt(items.action)) {\r\n            this.action = items.action;\r\n            if (typeof this.action !== 'function') {\r\n                this.action = false;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nCalculate the effective values for definitions\r\n@method setDefinitionsValues\r\n@param {Object} Object containing key:value attributes\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Tween.prototype.setDefinitionsValues = function() {\r\n        var i, iz, temp, def,\r\n            xt = my.xt;\r\n        for (i = 0, iz = this.definitions.length; i < iz; i++) {\r\n            def = this.definitions[i];\r\n            temp = this.parseDefinitionsValue(def.start);\r\n            def.effectiveStart = temp[1];\r\n            def.suffix = temp[0];\r\n            temp = this.parseDefinitionsValue(def.end);\r\n            def.effectiveEnd = temp[1];\r\n            if (!xt(def.engine)) {\r\n                def.engine = 'linear';\r\n            }\r\n            def.effectiveChange = def.effectiveEnd - def.effectiveStart;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nsetDefinitionsValues helper function\r\n@method parseDefinitionsValue\r\n@param {String} value to be parsed; can also be a Number\r\n@private\r\n@return Array of parsed values in the form ['Suffix', Number]\r\n**/\r\n    my.Tween.prototype.parseDefinitionsValue = function(item) {\r\n        var result = ['', 0],\r\n            a, xt = my.xt;\r\n        if (xt(item)) {\r\n            if (item.toFixed) {\r\n                result[1] = item;\r\n            }\r\n            else if (item.substring) {\r\n                a = item.match(/^-?\\d+\\.?\\d*(\\D*)/);\r\n                if (xt(a[0])) {\r\n                    result[1] = parseFloat(a);\r\n                }\r\n                if (xt(a[1])) {\r\n                    result[0] = a[1];\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\nSet targets attribute - assumes that the supplied Array will replace, not amend, any existing targets array\r\n@method setTargets\r\n@param {Array} items Array of Objects and/or Strings, can also be single Object or string\r\n@chainable\r\n@private\r\n@return this\r\n**/\r\n    my.Tween.prototype.setTargets = function(items) {\r\n        my.Action.prototype.setTargets.call(this, items);\r\n        return this;\r\n    };\r\n    /**\r\nAdd Objects to targets attribute - assumes that the supplied Array will augment any existing targets array\r\n@method addToTargets\r\n@param {Array} items Array of Objects and/or Strings, can also be single Object or string\r\n@chainable\r\n@return this\r\n**/\r\n    my.Tween.prototype.addToTargets = function(items) {\r\n        my.Action.prototype.addToTargets.call(this, items);\r\n        return this;\r\n    };\r\n    /**\r\nRemove Objects from targets attribute - will not remove an object with no name and/or type attributes\r\n@method removeFromTargets\r\n@param {Array} items Array of Objects and/or Strings, can also be single Object or string\r\n@chainable\r\n@return this\r\n**/\r\n    my.Tween.prototype.removeFromTargets = function(items) {\r\n        my.Action.prototype.removeFromTargets.call(this, items);\r\n        return this;\r\n    };\r\n    /**\r\nCreate a clone of this Tween\r\n\r\nNote: strongly advise every call to this function includes newly created anonymous functions for the action and revert attributes in the argument object - Scrawl's clone functionality does not clone function attributes!\r\n\r\n@method clone\r\n@param {Object} Object containing key:value attributes\r\n@chainable\r\n@return a new copy of the Tween object\r\n**/\r\n    my.Tween.prototype.clone = function(items) {\r\n        var c = my.Base.prototype.clone.call(this, items);\r\n        items = my.safeObject(items);\r\n        if (!items.targets) {\r\n            c.setTargets(this.targets);\r\n        }\r\n        return c;\r\n    };\r\n    /**\r\nStart the tween's ticker from 0\r\n\r\n@method run\r\n@return this\r\n**/\r\n    my.Tween.prototype.run = function() {\r\n        var t = my.animation[this.ticker];\r\n        if (t) {\r\n            t.run();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nHalt the tween's ticker\r\n\r\n@method halt\r\n@return this\r\n**/\r\n    my.Tween.prototype.halt = function() {\r\n        var t = my.animation[this.ticker];\r\n        if (t) {\r\n            t.halt();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nResume the tween's ticker\r\n\r\n@method resume\r\n@return this\r\n**/\r\n    my.Tween.prototype.resume = function() {\r\n        var t = my.animation[this.ticker];\r\n        if (t) {\r\n            t.resume();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nseekTo a different specific point on the tween's ticker\r\n\r\n@method seekTo\r\n@return this\r\n**/\r\n    my.Tween.prototype.seekTo = function(milliseconds) {\r\n        var t = my.animation[this.ticker];\r\n        if (t) {\r\n            t.seekTo(milliseconds);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nseekFor a different relative point on the tween's ticker\r\n\r\n@method seekFor\r\n@return this\r\n**/\r\n    my.Tween.prototype.seekFor = function(milliseconds) {\r\n        var t = my.animation[this.ticker];\r\n        if (t) {\r\n            t.seekFor(milliseconds);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\nRemove this Tween from the scrawl library (including any self-created ticker associated with the tween)\r\n@method kill\r\n@return Always true\r\n**/\r\n    my.Tween.prototype.kill = function() {\r\n        var t;\r\n        if (this.ticker === this.name + '_ticker') {\r\n            t = my.animation[this.ticker];\r\n            if (t) {\r\n                t.kill();\r\n            }\r\n        }\r\n        my.Action.prototype.kill.call(this);\r\n    };\r\n\r\n\r\n\r\n    var exports = my;\r\n\r\n    return my;\r\n}());\r\n\r\nexport default scrawl;","\r\nimport scrawl from './scrawlCanvas';\r\n\r\nexport default {\r\n    init () {\r\n        scrawl.init();\r\n    },\r\n    \r\n    radialGradient: null,\r\n    gradient1: null,\r\n    gradient2: null,\r\n    spotlight: null,\r\n    light1: null,\r\n    light2: null,\r\n    animation: null,\r\n\r\n    draw (ww, wh) {\r\n        if (this.radialGradient) {\r\n            // \r\n            this.animation.kill();\r\n            this.radialGradient.remove();\r\n            this.gradient1.remove();\r\n            this.gradient2.remove();\r\n            scrawl.deleteEntity([\r\n                'spotlightBlock',\r\n                'lightBlock1',\r\n                'lightBlock2'\r\n            ]);\r\n            this.radialGradient = null;\r\n        }\r\n\r\n        var here = { x: 0, y: 0 };\r\n        var r = 100;\r\n        var animationState = 0;\r\n        var animationDirection = true;\r\n    \r\n        this.radialGradient = scrawl.makeRadialGradient({\r\n            name: 'spotlight',\r\n            startRadius: 0,\r\n            endRadius: r,\r\n            color: [{\r\n                color: 'rgba(0,0,0,0)',\r\n                stop: 0\r\n            }, {\r\n                color: 'rgba(0,0,0,0)',\r\n                stop: 0.8\r\n            }, {\r\n                color: 'rgba(0,0,0,0.2)',\r\n                stop: 1\r\n            }]\r\n        });\r\n    \r\n        this.gradient1 = scrawl.makeGradient({\r\n            name: 'light1',\r\n            startX: 0,\r\n            startY: 0,\r\n            endX: 0,\r\n            endY: 0,\r\n            color: [{\r\n                color: 'rgba(0,0,0,0.3)',\r\n                stop: 0\r\n            }, {\r\n                color: 'rgba(0,0,0,0)',\r\n                stop: 0.2\r\n            }, {\r\n                color: 'rgba(0,0,0,0)',\r\n                stop: 0.8\r\n            }, {\r\n                color: 'rgba(0,0,0,0.3)',\r\n                stop: 1\r\n            }]\r\n        });\r\n    \r\n        this.gradient2 = this.gradient1.clone({\r\n            name: 'light2'\r\n        });\r\n    \r\n        this.spotlight = scrawl.makeBlock({\r\n            name: 'spotlightBlock',\r\n            fillStyle: 'spotlight',\r\n            method: 'fill',\r\n            width: ww,\r\n            height: wh,\r\n            order: 1\r\n        });\r\n    \r\n        this.light1 = this.spotlight.clone({\r\n            name: 'lightBlock1',\r\n            fillStyle: 'light1'\r\n        });\r\n    \r\n        this.light2 = this.spotlight.clone({\r\n            name: 'lightBlock2',\r\n            fillStyle: 'light2'\r\n        });\r\n    \r\n        const self = this;\r\n        this.animation = scrawl.makeAnimation({\r\n            fn: function() {\r\n                changeParam();\r\n    \r\n                self.spotlight.set({ width: ww, height: wh });\r\n                self.light1.set({ width: ww, height: wh });\r\n                self.light2.set({ width: ww, height: wh });\r\n    \r\n                self.radialGradient.set({\r\n                    startX: here.x,\r\n                    startY: here.y,\r\n                    endX: here.x,\r\n                    endY: here.y,\r\n                    endRadius: r\r\n                });\r\n    \r\n                var v1 = getPerpendicularVector(here.x, here.y);\r\n                self.gradient1.set({\r\n                    startX: v1[0] * r,\r\n                    startY: v1[1] * r,\r\n                    endX: -v1[0] * r,\r\n                    endY: -v1[1] * r\r\n                });\r\n    \r\n                var v2 = getPerpendicularVector(here.x - ww, here.y);\r\n                self.gradient2.set({\r\n                    startX: v2[0] * r + ww,\r\n                    startY: v2[1] * r,\r\n                    endX: -v2[0] * r + ww,\r\n                    endY: -v2[1] * r\r\n                });\r\n                scrawl.render();\r\n            }\r\n        });\r\n    \r\n        function changeParam() {\r\n            var limit = 0;\r\n            if (ww / wh >= 16 / 9) {\r\n                limit = 0.3;\r\n                r = ww / 10;\r\n            } else {\r\n                limit = (wh * 0.15) / (ww / 2);\r\n                r = wh / 10;\r\n            }\r\n    \r\n            here = { x: ww / 2 * (1 + animationState), y: wh / 5 * 3 };\r\n            if (animationDirection) {\r\n                animationState  += 0.02 * (0.1 + Math.abs(limit - Math.abs(animationState)));\r\n            } else {\r\n                animationState -= 0.02 * (0.1 + Math.abs(limit - Math.abs(animationState)));\r\n            }\r\n            if (Math.abs(animationState) > limit) {\r\n                animationDirection = !animationDirection;\r\n            }\r\n        }\r\n    \r\n        function getPerpendicularVector(x, y) {\r\n            var num = Math.sqrt(x * x + y * y);\r\n            var v = [x / num, y / num];\r\n            return [-v[1], v[0]];\r\n        }\r\n    }\r\n};"],"sourceRoot":""}